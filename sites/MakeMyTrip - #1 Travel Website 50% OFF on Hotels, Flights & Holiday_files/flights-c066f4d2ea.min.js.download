function TemplatesProvider(e){this.templateMap=e,this.getTemplateFor=function(e){var t=e.screen;return this.getScreenTemplateWithScreenKey(t)},this.getScreenTemplateWithScreenKey=function(e){e&&""!==e||(e="default");var t=this.templateMap[e],r=t.url;return r?this.getTemplate(r,t):void MMT.log.fatal("Template "+e+" is not defined in Templates JS File")},this.getScreenModelCallStartListener=function(e){var t=this.templateMap[e];return t&&t.screenModelCallStart?t.screenModelCallStart:void 0},this.getScreenModelCallCompleteListener=function(e){var t=this.templateMap[e];return t&&t.screenModelCallComplete?t.screenModelCallComplete:void 0},this.getScreenModelCallErrorListener=function(e){var t=this.templateMap[e];return t&&t.screenModelCallError?t.screenModelCallError:void 0},this.getTemplateForInterstitial=function(e){e&&""!==e||(e="default");var t=this.templateMap[e],r="";r=t&&t.interstitialUrl?t.interstitialUrl:this.templateMap["default"].interstitialUrl;var a="";if(r){var i=MMT.templateCache.get(r);if(i){a=i;var n=document.getElementsByTagName("page-view")[0];n.innerHTML=a}else $.ajax({url:r,async:!0,success:function(e){MMT.templateCache.put(r,e),a=e;var t=document.getElementsByTagName("page-view")[0];t.innerHTML=a},error:function(e){MMT.log.error("Error while fetching Interstitial Template for URL:: "+r+" :: Error :: "+e)}});return!0}},this.getTemplate=function(e,t){var r=MMT.templateCache.get(e),a=$.Deferred();return r?a.resolve(r,t):$.ajax({url:e,async:!0,success:function(r){MMT.templateCache.put(e,r),a.resolve(r,t)},error:function(t){MMT.log.error("Error while fetching template for URL:: "+e+" :: Error :: "+t)}}),a.promise()},this.fetchDefaultInterstitial=function(e){return"default"!=e&&this.getTemplateForInterstitial("default")}}function AbstractRenderer(){this.constructor===AbstractRenderer&&new Error("Abstract Renderer is an Abstract Class")}function resolveMTCustomAttribute(e,t,r){var a=e.name.split("mt-attr-")[1],i=t.getAttribute(e.name),n=MMT.compiler.evalFunctionsMap[i](r);return t.setAttribute(a,n),!0}function resolveMTShow(e,t,r){var a=e.value,i=MMT.compiler.evalFunctionsMap[a](r);return i?t.style.display="":t.style.display="none",i}function resolveMTrenderIf(e,t,r){var a=e.value,i=MMT.compiler.evalFunctionsMap[a](r);return i||t.parentNode.removeChild(t),i}function resolveMTAddClass(currentAttribute,template,viewModel){var addClassCommandAttribute=currentAttribute.value,classApplied=!1;if(null!==addClassCommandAttribute)if(addClassCommandAttribute.startsWith("{")){var addClassCommandParsedObject=JSON.parse(addClassCommandAttribute);if(addClassCommandParsedObject&&"object"==typeof addClassCommandParsedObject)for(var key in addClassCommandParsedObject)addClassCommandParsedObject.hasOwnProperty(key)&&("classList"in document.createElement("_")&&template.classList.remove(key),eval(addClassCommandParsedObject[key])&&classApplied===!1&&(template.className+=" "+key,classApplied=!0))}else{addClassCommandAttribute=MMT.compiler.evalFunctionsMap[addClassCommandAttribute](viewModel);var currentClassName=template.className,classNames=currentClassName.split(" ");classNames.contains(addClassCommandAttribute)||(template.className+=" "+addClassCommandAttribute)}return!0}function handleMTComputed(e,t,r){var a=e.value,i=MMT.compiler.evalFunctionsMap[a](r);return t.innerHTML=i,!0}function handleMTStyle(e,t,r){var a=e.value,i=MMT.compiler.evalFunctionsMap[a](r);return t.setAttribute("style",i),!0}function handleMTid(e,t,r){var a=e.value;return t.innerHTML=r.data[a],!0}function handleMTSrc(e,t,r){var a=e.value;return t.setAttribute("src",r.data[a]),!0}function handleMThref(e,t,r){var a=e.value;return t.setAttribute("href",r.data[a]),!0}function MTAttributeResolver(){this.resolverObject={"mt-computed":handleMTComputed,"mt-style":handleMTStyle,"mt-id":handleMTid,"mt-src":handleMTSrc,"mt-href":handleMThref,"mt-show":resolveMTShow,"mt-render-if":resolveMTrenderIf,"mt-addclass":resolveMTAddClass},this.resolveAttribute=function(e,t,r){if(e&&e.name){var a=this.resolverObject[e.name];if(a)return console.log(e.name),a.call(e,t,r)}return!0}}function AggregateViewEventBinder(){this.bindEvents=function(e,t,r){t.events,handleViewEvents(t,e,r,"AggregateViewEventBinder"),handleMTClick(t,e,r)}}function AggregateViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=t.data;for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o&&o instanceof Object&&o.hasOwnProperty("view")){var s=router.getViewRendererFactory().getRenderer(o.view);try{s.render(getFirstElementWithClass(e,n),o,n)}catch(l){MMT.log.error("render in AggregateViewRenderer failed"),MMT.log.error(l.name+" for :: "+n+" with message "+l.stack)}}}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=(a.oldViewModel,t.data);for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o&&o instanceof Object&&o.hasOwnProperty("view")){var s=router.getViewRendererFactory().getRenderer(o.view);try{s.rerender(getFirstElementWithClass(e,n),o,n)}catch(l){MMT.log.error("render in AggregateViewRenderer failed"),MMT.log.error(l.name+" with message "+l.message)}}}this.postRenderActions(e,t,r)}}}function AjaxViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=t.data;executeMultiAjaxView(i,e,r,!0),this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,executeMultiAjaxView(t.data,e,r,!1),this.postRenderActions(e,t,r))}}function AjaxViewEventBinder(){this.bindEvents=function(e,t,r){}}function CarouselViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=t&&t.data&&t.data.list,n=t&&t.data&&t.data.meta;n=JSON.stringify(n),e.setAttribute("mt-carousel-meta",n);var o=document.createElement("img");o.setAttribute("class","img-responsive"),o.setAttribute("mt-view","image_view"),e.setAttribute("mt-hash-osel","carousel_"+(new Date).getTime());for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];if(l&&l instanceof Object&&l.hasOwnProperty("view")){var d=router.getViewRendererFactory().getRenderer(l.view),c=o.cloneNode(!0);c.style.display="",e.appendChild(c),d.render(c,l,s)}}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){this.render(e,t,r)}}function CarouselViewEventBinder(){this.bindEvents=function(e,t,r){router.getRenderedViewModelMap()[r]=deepCopyObject(t);var a=t.events;for(var i in a)if(i.startsWith("mt_event_")){var n=a[i];i=i.split("mt_event_")[1];try{var o=$("div[mt-hash-osel='"+e.getAttribute("mt-hash-osel")+"']");"carousel"==n.type&&(bindExecuteCarouselEvent(n,o,e),handleMTClick(t,e,r))}catch(s){MMT.log.error("CarouselEvent failed to bind events"),MMT.log.error(s.name+" with message "+s.message)}}}}function CheckboxViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=getCheckboxElementFromCheckBoxView(e);i&&(t.data[t.data.key]="true"===t.data.value.toString(),i.setAttribute("id",t.data.key),i.checked=t.data[t.data.key]);var n=getLabelElementFromCheckBoxView(e);n&&n.setAttribute("for",t.data.key),this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=(a.oldViewModel,getCheckboxElementFromCheckBoxView(e));i&&(t.data[t.data.key]="true"===t.data.value.toString(),i.setAttribute("id",t.data.key),i.checked=t.data[t.data.key]);var n=getLabelElementFromCheckBoxView(e);n&&n.setAttribute("for",t.data.key),this.postRenderActions(e,t,r)}}}function CheckboxViewEventBinder(){this.bindEvents=function(e,t,r){var a=(t.events,e.getElementsByTagName("input"));if(a&&a.length>0){var i=a[0];i.onclick=function(){setTimeout(function(){router.handleCheckBoxClick(i,t)},0)}}}}function ComputedViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,a.oldViewModel,this.postRenderActions(e,t,r))}}function ComputedViewEventBinder(){this.bindEvents=function(e,t,r){}}function DropdownItemViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,a.oldViewModel,this.postRenderActions(e,t,r))}}function DropdownItemViewEventBinder(){this.bindEvents=function(e,t,r){e.onclick=function(){t.data.selected=!0,router.viewModelChangeListener.publish(r)}}}function DropdownViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=t.data;for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o&&o instanceof Object&&o.hasOwnProperty("view")){if("LIST_VIEW"===o.view){var s=function(){return o.data}();router.viewModelChangeListener.subscribe(n,function(){for(var e=s,a=0;a<e.length;a++){var i=e[a].data;i.selected===!0&&(t.data.selectedValue=i.option_name,router.rerender(r))}})}var l=router.getViewRendererFactory().getRenderer(o.view);try{l.render(getFirstElementWithClass(e,n),o,n)}catch(d){MMT.log.error("render in DropdownViewRenderer failed"),MMT.log.error(d.name+" for :: "+n+" with message "+d.message)}}}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=(a.oldViewModel,t.data);for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o&&o instanceof Object&&o.hasOwnProperty("view")){var s=router.getViewRendererFactory().getRenderer(o.view);try{s.rerender(getFirstElementWithClass(e,n),o,n)}catch(l){MMT.log.error("render in DropdownViewRenderer failed"),MMT.log.error(l.name+" with message "+l.message)}}}this.postRenderActions(e,t,r)}}}function DropdownViewEventBinder(){this.bindEvents=function(e,t,r){}}function FormViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,a.oldViewModel,this.postRenderActions(e,t,r))}}function FormViewEventBinder(){this.bindEvents=function(e,t,r){var a=t.events;MMT.log.info("FormViewEventBinder :: "+r+" :: "+a),handleViewEvents(t,e,r,"FormViewEventBinder"),handleMTClick(t,e,r)}}function ImageViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,this.populateImgSrcViewModelData(e,t.data),this.postRenderActions(e,t,r))},this.populateImgSrcViewModelData=function(e,t){try{t&&t.oLazyLoad&&!/rcarousel/i.test(t.type)&&"false"!==t.oLazyLoad.toLowerCase()?(e.setAttribute("data-src",t&&t.imgSrc),e.className+=" owl-lazy"):e.setAttribute("src",t&&t.imgSrc),t&&t.defaultImage&&e.setAttribute("onError","this.onerror=null;this.src='"+t.defaultImage+"'")}catch(r){MMT.log.error("populateImgSrcViewModelData failed for key, "+key),MMT.log.error(r.name+" with message "+r.message)}}}function ImageViewEventBinder(){this.bindEvents=function(e,t,r){router.getRenderedViewModelMap()[r]=deepCopyObject(t),t.events}}function ListViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;for(var i=0;i<t.data.length;i++)setGeneratedIndexValue(t.data[i],i);MMT.log.debug("ListView Render started for className ::"+r),appendViewNodes(e,t,r,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),router.listViewRenderCompleteListener.publish(r,t),this.postRenderActions(e,t,r),MMT.log.debug("ListView Render ended for className ::"+r)}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=a.oldViewModel,n=t.data,o=i&&i.data,s=(new Date).getTime();MMT.log.debug("ListView Rerender started for className"+r),MMT.log.debug("ListView Rerender started "+s);var l=n.length,d=o&&o.length;d||(d=0);for(var c=0;c<n.length;c++)setGeneratedIndexValue(n[c],c);if(d>l)deleteAllViewNodes(e,MMT_CONSTANTS.LIST_VIEW_WRAPPER),appendViewNodes(e,t,r,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),o=null;else{for(var p=-1,c=0;d>c;c++){if(!o[c].data.hasOwnProperty("hashid")||!n[c].data.hasOwnProperty("hashid")){MMT.log.error("Error :: Missing Hash Id");break}if(o[c].data.hashid!==n[c].data.hashid)break;p=c}if(MMT.log.info("Index Till Same is :: "+p),p+1>=l)return;p>=0?(deleteAllViewNodesFrom(e,p+1,MMT_CONSTANTS.LIST_VIEW_WRAPPER),appendViewNodesFrom(e,t,r,p+1,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),o=o.slice(0,p+1)):(deleteAllViewNodes(e,MMT_CONSTANTS.LIST_VIEW_WRAPPER),appendViewNodes(e,t,r,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),o=null)}MMT.log.info("ListView Nodes addition ended "+((new Date).getTime()-s+" ms")),MMT.log.info("ListView Rerender ended "+((new Date).getTime()-s+" ms")),MMT.log.debug("ListView Rerender ended for className"+r),router.listViewRenderCompleteListener.publish(r,t),this.postRenderActions(e,t,r)}}}function ListViewEventBinder(){this.bindEvents=function(e,t,r){var a=t.events;MMT.log.debug("ListViewEventBinder :: "+r+" :: "+a),handleViewEvents(t,e,r,"ListViewEventBinder"),handleMTClick(t,e,r)}}function PaginatedCarouselViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;var i=t&&t.data&&t.data.list,n=t&&t.data&&t.data.meta;n=JSON.stringify(n),e.setAttribute("mt-carousel-meta",n);var o=(new Date).getTime(),s=document.createElement("div");s.setAttribute("mt-hash-osel-inner","carousel_"+o),e.appendChild(s);var l=getFirstElementWithAttributeName(e,"mt-carousel-next"),d=getFirstElementWithAttributeName(e,"mt-carousel-prev");l&&l.setAttribute("id","rcarousel_next_"+o),d&&d.setAttribute("id","rcarousel_prev_"+o);var c=document.createElement("img");c.setAttribute("class","img-responsive"),c.setAttribute("mt-view","image_view"),e.setAttribute("mt-hash-osel","carousel_"+o);for(var p in i)if(i.hasOwnProperty(p)){var u=i[p];if(u&&u instanceof Object&&u.hasOwnProperty("view")){var h=document.createElement("div");h.setAttribute("class","mt-item");var f=router.getViewRendererFactory().getRenderer(u.view),m=c.cloneNode(!0);m.style.display="",h.appendChild(m),s.appendChild(h),f.render(m,u,p)}}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var a=e.getAttribute("mt-hash-osel");e.removeChild(e.querySelector('[mt-hash-osel-inner="'+a+'"]')),this.render(e,t,r)}}function PaginatedViewEventBinder(){this.bindEvents=function(e,t,r){router.getRenderedViewModelMap()[r]=deepCopyObject(t);var a=t.events;for(var i in a)if(i.startsWith("mt_event_")){var n=a[i];i=i.split("mt_event_")[1];try{bindExecutePaginatedCarouselEvent(n,e),handleMTClick(t,e,r)}catch(o){MMT.log.error("Paginated CarouselEvent failed to bind events"),MMT.log.error(o.name+" with message "+o.message)}}}}function RadioButtonViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;for(var i=e.getElementsByTagName("input"),n=0;n<i.length;n++){var o=i[n];"radio"===o.getAttribute("type")&&o.getAttribute("name")===t.data.name&&(o.value===t.data.selected?o.checked=!0:o.checked=!1)}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,a.oldViewModel,this.postRenderActions(e,t,r))}}function RadioButtonViewEventBinder(){this.radioClickFunction=function(e,t){return function(){router.handleRadioButtonClick(e,t)}},this.bindEvents=function(e,t,r){var a=e.getElementsByTagName("input");if(a)for(var i=0;i<a.length>0;i++){var n=a[i];"radio"===n.getAttribute("type")&&n.getAttribute("name")===t.data.name&&(MMT.log.info("Event bound for "+n.value),n.onclick=this.radioClickFunction(n,t))}}}function ScrollViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){t=a.viewModel;for(var i=0;i<t.data.length;i++)setGeneratedIndexValue(t.data[i],i);var n=(new Date).getTime();MMT.log.debug("ScrollView Render started for className ::"+r),appendViewNodes(e,t,r,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),router.getMoreListeners.publish(r,t),this.postRenderActions(e,t,r),MMT.log.debug("ScrollView Render ended for className ::"+r+" :: took :: "+((new Date).getTime()-n+" ms"))}},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);if(a){var i=a.viewModel,n=a.oldViewModel,o=i.data,s=n&&n.data,l=(new Date).getTime();MMT.log.debug("ScrollView Rerender started for className ::"+r),MMT.log.debug("ScrollView Rerender started at "+new Date(l).toString());var d=o.length,c=s&&s.length;c||(c=0);for(var p=0;p<o.length;p++)setGeneratedIndexValue(o[p],p);if(c>d)deleteAllViewNodes(e,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER),appendViewNodes(e,i,r,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),s=null;else{for(var u=-1,p=0;c>p;p++){if(!s[p].data.hasOwnProperty("hashid")||!o[p].data.hasOwnProperty("hashid")){MMT.log.error("Error :: Missing Hash Id");break}if(s[p].data.hashid!==o[p].data.hashid)break;u=p}if(MMT.log.info("Index Till Same is :: "+u),u+1>=d)return;u>=0?(deleteAllViewNodesFrom(e,u+1,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER),appendViewNodesFrom(e,i,r,u+1,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),s=s.slice(0,u+1)):(deleteAllViewNodes(e,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER),appendViewNodes(e,i,r,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),s=null)}MMT.log.info("ScrollView Nodes addition ended "+((new Date).getTime()-l+" ms")),MMT.log.info("ScrollView Rerender ended "+((new Date).getTime()-l+" ms")),MMT.log.debug("ScrollView Rerender ended for className"+r),router.getMoreListeners.publish(r,i),this.postRenderActions(e,i,r)}}}function ScrollViewEventBinder(){function e(e,t,r){$.ajax({url:e,async:!0,success:function(e,a,i){t=router.getViewModel(r);for(var n in e)if("data"===n)for(var o=0;o<e.data.length;o++)t.data.push(e.data[o]);else t[n]=e[n];e.textStatus=a,e.XHR=i,router.getMoreListeners.publish(r,e),router.rerender(r)},error:function(e,t,a){var i={XHR:e,textStatus:t,errorThrown:a};router.getMoreListeners.publish(r,i)}})}this.bindEvents=function(t,r,a){var i=r.events;if(MMT.log.debug("ScrollViewEventBinder :: "+a+" :: "+i),handleViewEvents(r,t,a,"ScrollViewEventBinder"),handleMTClick(r,t,a),i&&i.get_more_api){var n=i.get_more_api,o=function(){return this.getMore=function(){e(n,r,a)},{getMore:getMore}}();getMoreExecutorsMap[a]=o}}}function StaticViewRenderer(){this.render=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,a.oldViewModel,this.postRenderActions(e,t,r))}}function StaticViewEventBinder(){this.bindEvents=function(e,t,r){var a="StaticViewEventBinder";handleViewEvents(t,e,r,a),handleMTClick(t,e,r)}}function TextboxViewRenderer(){this.render=function(e,t,r){this.canBeShown(t,e)&&(e.value=t.data.value,this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var a=this.preRenderActions(e,t,r);a&&(t=a.viewModel,a.oldViewModel,e.value=t.data.value,this.postRenderActions(e,t,r))}}function TextboxViewEventBinder(){this.modifyViewModel=function(e,t){return function(){router.handleTextboxChange(e,t)}},this.propagateChanges=function(e,t){return function(){router.handleTextboxUpdate(e,t)}},this.bindEvents=function(e,t,r){var a=this.modifyViewModel(e,t);e.onkeyup=a,e.onpaste=a,e.onblur=this.propagateChanges(e,t)}}function EventBinderFactory(){this.eventBinderMap={},this.getEventBinder=function(e){return"STATIC_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new StaticViewEventBinder),this.eventBinderMap[e]):"DROPDOWN_ITEM_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new DropdownItemViewEventBinder),this.eventBinderMap[e]):"AGGREGATE_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new AggregateViewEventBinder),this.eventBinderMap[e]):"SCROLL_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ScrollViewEventBinder),this.eventBinderMap[e]):"FORM_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new FormViewEventBinder),this.eventBinderMap[e]):"CAROUSEL_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new CarouselViewEventBinder),this.eventBinderMap[e]):"PAGINATEDCAROUSEL_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new PaginatedViewEventBinder),this.eventBinderMap[e]):"IMAGE_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ImageViewEventBinder),this.eventBinderMap[e]):"AJAX_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new AjaxViewEventBinder),this.eventBinderMap[e]):"LIST_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ListViewEventBinder),this.eventBinderMap[e]):"DROPDOWN_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new DropdownViewEventBinder),this.eventBinderMap[e]):"CHECKBOX_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new CheckboxViewEventBinder),this.eventBinderMap[e]):"RADIOBUTTON_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new RadioButtonViewEventBinder),this.eventBinderMap[e]):"TEXTBOX_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new TextboxViewEventBinder),this.eventBinderMap[e]):"COMPUTED_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ComputedViewEventBinder),this.eventBinderMap[e]):void 0}}function ViewRendererFactory(){this.rendererMap={},this.getRenderer=function(e){return"STATIC_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new StaticViewRenderer),this.rendererMap[e]):"AGGREGATE_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new AggregateViewRenderer),this.rendererMap[e]):"SCROLL_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ScrollViewRenderer),this.rendererMap[e]):"FORM_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new FormViewRenderer),this.rendererMap[e]):"AJAX_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new AjaxViewRenderer),this.rendererMap[e]):"CAROUSEL_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new CarouselViewRenderer),this.rendererMap[e]):"PAGINATEDCAROUSEL_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new PaginatedCarouselViewRenderer),this.rendererMap[e]):"IMAGE_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ImageViewRenderer),this.rendererMap[e]):"LIST_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ListViewRenderer),this.rendererMap[e]):"DROPDOWN_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new DropdownViewRenderer),this.rendererMap[e]):"DROPDOWN_ITEM_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new DropdownItemViewRenderer),this.rendererMap[e]):"CHECKBOX_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new CheckboxViewRenderer),this.rendererMap[e]):"RADIOBUTTON_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new RadioButtonViewRenderer),this.rendererMap[e]):"COMPUTED_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ComputedViewRenderer),this.rendererMap[e]):"TEXTBOX_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new TextboxViewRenderer),this.rendererMap[e]):void 0}}function bindExecuteEvent(viewModel,eventView,eventElement){if("execute"===eventView.type){var evalValue=eventView.value;if(!eventElement)return void MMT.log.debug("Problem :: "+JSON.stringify(viewModel));eventElement.onclick=function(){MMT.log.debug("Eval content :: "+evalValue),eval(evalValue)}}}function bindExecuteCarouselEvent(e,t,r){var a={items:1,navigation:!0,loop:!0},i=r.getAttribute("mt-carouseloptions");if(i)try{i=JSON.parse(i),a={};for(var n in i)i.hasOwnProperty(n)&&(a[n]=i[n])}catch(o){}"carousel"===e.type&&setTimeout(function(){t.owlCarousel(a)},1)}function bindExecutePaginatedCarouselEvent(e,t){var r=t.querySelectorAll("[mt-hash-osel-inner]")[0].getAttribute("mt-hash-osel-inner"),a=r.split("carousel_")[1],i=$("div[mt-hash-osel-inner='"+r+"']"),n={visible:1,step:1,orientation:"horizontal",auto:{enabled:!0,direction:"next",interval:2e3}},o=t.getAttribute("mt-carouseloptions");if(o)try{o=JSON.parse(o),n={};for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}catch(l){}n.navigation&&(n.navigation.next="#rcarousel_next_"+a,n.navigation.prev="#rcarousel_prev_"+a),"rcarousel"===e.type&&setTimeout(function(){i.rcarousel(n)},1)}function bindFormSubmitEvent(e,t,r,a){if("submit"===e.type){var i=e.value;t.onclick=function(){for(var e in r)if("view"!==e&&!e.startsWith("mt_event_"))try{r[e]=getFirstElementWithID(a,e).value}catch(t){MMT.log.error("FormViewEventBinder failed to bind events"),MMT.log.error(t.name+" with message "+t.message)}MMT.log.info("API to POST is : "+i),MMT.log.info("Value to POST is : "+JSON.stringify(r))}}}function bindAjaxEvent(e,t,r){if("ajax"===t.type){var a=t.value;r.onclick=function(){$.ajax({url:a,async:!0,success:function(e){var t=e;router.updatePartialModel(t)},error:function(e){MMT.log.error("Error while bindAjaxEvent for URL:: "+a+" :: Error :: "+e)}})}}}function bindClientSideExecutionEvent(e,t,r){r.onclick=function(){if("client"===t.type){var e=r.getAttribute("mt-command");if(e){MMT.log.info("Command String :: "+e);var a=e.split(" "),i=a[2],n=a[1];router.addFilter(i,n)}}}}function EventIDNotInTemplateException(e){this.message=e,this.name="EventIDNotInTemplateException"}function MTClassNotInTemplateException(e){this.message=e,this.name="MTClassNotInTemplateException"}function MTIDNotInTemplateException(e){this.message=e,this.name="MTIDNotInTemplateException"}function getElementWithEventID(e,t){var r=e.querySelectorAll('[mt-event-id="'+t+'"]');return r.length>0?r[0]:void 0}function getFirstElementWithClass(e,t){if(e){var r=e.querySelectorAll('[mt-class="'+t+'"]');if(r.length>0)return r[0]}}function getFirstElementWithAttributeName(e,t){var r=e.querySelectorAll("["+t+"]");return r.length>0?r[0]:void 0}function getFirstElementWithID(e,t){var r=e.querySelectorAll('[mt-id="'+t+'"]');return r&&r.length>0?r[0]:void 0}function extractUrlDetails(){var e={};return e.pathName=window.location.pathname.substr(1),e.params=extractQueryParams(),e}function extractQueryParams(){var e=window.location.search.substring(1);return parseQueryString(e)}function encodeURIComponentIfNeeded(e){var t=decodeURIComponent(e);return t===e?encodeURIComponent(e):e}function getAllElementWithClass(e,t){var r=e.querySelectorAll('[mt-class="'+t+'"]');if(r.length>0)return r;throw new MTClassNotInTemplateException("mt class not exists in template, "+t+" And the template is :: "+e.outerHTML)}function insertAfter(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function executeMultiAjaxView(e,t,r,a){var i="";for(var n in e)if(e.hasOwnProperty(n))try{if(n===MMT_CONSTANTS.AJAX_VIEW_LOADER)i=e[MMT_CONSTANTS.AJAX_VIEW_LOADER];else if(n===MMT_CONSTANTS.AJAX_VIEW_GET_API){var o=router.getScreenModel(router.currentScreenKey,null,!0,!1);o.done(function(){var t={};t.url=e[MMT_CONSTANTS.AJAX_VIEW_GET_API],t.async=!0,t.method="GET",t.ttlInSeconds=0,t.queryParams=null,t.data=null,router.ajaxOnStartListener.publish(r,t),"GET"===t.method?MMT.ajaxCall.get(t.url,t.ttlInSeconds,t.queryParams,null).success(function(t){ajaxViewOnSuccess(e,r,i,t)}).error(function(e,t,r){ajaxViewOnError(e,t,r)}):"POST"===t.method?MMT.ajaxCall.post(t.url,t.ttlInSeconds,null,t.data).success(function(t){ajaxViewOnSuccess(e,r,i,t)}).error(function(e,t,r){ajaxViewOnError(e,t,r)}):"PUT"===t.method?MMT.ajaxCall.put(t.url,t.ttlInSeconds,null,t.data).success(function(t){ajaxViewOnSuccess(e,r,i,t)}).error(function(e,t,r){ajaxViewOnError(e,t,r)}):"DELETE"===t.method&&MMT.ajaxCall["delete"](t.url,t.ttlInSeconds,null,t.data).success(function(t){ajaxViewOnSuccess(e,r,i,t)}).error(function(e,t,r){ajaxViewOnError(e,t,r)})})}else if(e[n]instanceof Object){var s=router.getViewRendererFactory().getRenderer(e[n].view);a?s.render(getFirstElementWithClass(t,n),e[n],n):s.rerender(getFirstElementWithClass(t,n),e[n],n)}else{var l=getFirstElementWithID(t,n);l&&(l.innerHTML=e[n])}}catch(d){return MMT.log.error("executeMultiAjaxView failed for key, "+n),void MMT.log.error(d.name+" with message "+d.message)}}function ajaxViewOnSuccess(e,t,r,a){var i=a;for(var n in i)i.hasOwnProperty(n)&&(e[n]={},delete e[MMT_CONSTANTS.AJAX_VIEW_GET_API]);router.ajaxViewPostAPIResponseListener.publish(t),handleResponseFromAjaxViewCall(a,r),router.ajaxCompleteListener.publish(t),toggleAjaxViewLoading(r)}function ajaxViewOnError(e,t,r){var a={XHR:e,textStatus:t,errorThrown:r};router.ajaxCompleteErrorListener.publish(className,a),toggleAjaxViewLoading(loader)}function handleResponseFromAjaxViewCall(e,t){var r=e;router.updatePartialModel(r);for(var a in r)if(r.hasOwnProperty(a)){var i=router.getTemplateFor(a);i.style.display=""}}function toggleAjaxViewLoading(e){if(""!=e){var t=getAllElementWithClass(router.getMainTemplate(),e);for(i=0;i<t.length;i++)t[i].style.display=MMT_CONSTANTS.NONE}}function executePostDownloadActions(e,t){return importTemplates(e,t)}function importTemplates(domTemplate,viewModel){var partialTemplate=domTemplate.querySelectorAll('[mt-include="import"]'),importPromises=[],resultPromise=$.Deferred();if(partialTemplate.length>0)for(index=0;index<partialTemplate.length;index++){var load=!0;if(partialTemplate[index].getAttribute("mt-include-if")){var cond=partialTemplate[index].getAttribute("mt-include-if");eval("isImport = "+cond),isImport||(load=!1)}if(load){var promiseInternal=makeDeferredAjaxCall(evaluateMTincludeUrl(partialTemplate[index].getAttribute("href")),index).done(function(e,t){var r=partialTemplate[t].parentNode,a=document.createElement("div");a.innerHTML=e,r.replaceChild(a.childNodes[0],partialTemplate[t])});importPromises.push(promiseInternal)}}return 0===importPromises.length?setTimeout(function(){resultPromise.resolve()},0):$.when.apply($,importPromises).always(function(){resultPromise.resolve()}),resultPromise.promise()}function makeDeferredAjaxCall(e,t){var r=$.Deferred(),a=MMT.templateCache.get(e);return a?r.resolve(a,t):(MMT.ajaxCall.get(e,0,null,null).success(function(a){MMT.templateCache.put(e,a),r.resolve(a,t)}).error(function(t){MMT.log.error("Error while downloading import template via DefferedAjaxCall for URL:: "+e+" :: Error :: "+t),r.reject()}),r.promise())}function evaluateMTincludeUrl(e){return e=new Function("url","return "+e)(e)}function manageMMTBrowserStates(e,t){e&&"initial"==e?(mmtReplaceState(t),router.setInitialRequest(!1)):e&&"pop"==e||mmtPushState(t)}function mmtPushState(e){MMT.log.info("State URL :: "+e.url),window.history.pushState(e,null,e.url)}function mmtReplaceState(e){"undefined"!=typeof history.replaceState&&window.history.replaceState(e,null,e.url)}function bindEventsWithElement(e,t,r,a){e&&("execute"==t.type?bindExecuteEvent(a,t,e):"ajax"==t.type?bindAjaxEvent(a,t,e):"client"==t.type&&bindClientSideExecutionEvent(a,t,e))}function resolveMTClick(clickableElement,viewModel){var functionName=clickableElement.getAttribute("mt-click");return clickableElement.onclick=function(event){eval(functionName+"(viewModel,event)")},functionName}function handleMTClick(e,t,r){if(t)if(t&&t.hasAttribute&&t.hasAttribute("mt-click"))resolveMTClick(t,e);else for(var a=0,i=t.childNodes;a<i.length;){var n=i[a++];n&&n.hasAttribute&&n.hasAttribute("mt-view")||n&&n.hasAttribute&&handleMTClick(e,n,r)}}function handleViewEvents(e,t,r,a){var i=e.events;if(i)for(var n in i)if(n.startsWith("mt_event_")){var o=i[n];n=n.split("mt_event_")[1];try{var s=getElementWithEventID(t,n);bindEventsWithElement(s,o,r,e)}catch(l){MMT.log.error(a+" failed to bind events"),MMT.log.error(l.name+" with message "+l.message)}}}function getCheckboxElementFromCheckBoxView(e){var t=e.getElementsByTagName("input");if(t&&t.length>0){var r=t[0];return r}}function getLabelElementFromCheckBoxView(e){var t=e.getElementsByTagName("label");if(t&&t.length>0){var r=t[0];return r}}function appendViewNodes(e,t,r,a,i){var n=(new Date).getTime();MMT.log.debug("appendViewNodes started for className:: "+r),appendViewNodesFrom(e,t,r,0,a,i),MMT.log.debug("appendViewNodes ended for className:: "+r+" :: took :: "+((new Date).getTime()-n+" ms"))}function appendViewNodesFrom(e,t,r,a,i,n){var o="";if(i===MMT_CONSTANTS.LIST_VIEW_WRAPPER?o=MMT.compiler.getTemplateNodeForListViewItem(r):i===MMT_CONSTANTS.SCROLL_VIEW_WRAPPER&&(o=MMT.compiler.getTemplateNodeForScrollViewItem(r)),
e.hasAttribute("mt-gen-class")&&(r=e.getAttribute("mt-gen-class")),o)for(var s=a;s<t.data.length;s++){var l=createViewNode(t.data,s,o,n,r);e.appendChild(l)}else MMT.log.error("Template is missing for "+i+" for className :: "+r)}function setGenClassNames(e,t){e.setAttribute("mt-gen-class",t);for(var r=e.querySelectorAll("[mt-class]"),a=0;a<r.length;a++){var i=r[a],n=i.getAttribute("mt-class");n&&i.setAttribute("mt-gen-class",t+"---"+n)}}function addAnimationAttributes(e){e.style.display="none"}function createViewNode(e,t,r,a,i){var n=((new Date).getTime(),e[t]);router.getViewRendererFactory().getRenderer(n.view);try{var o={},s=i+"---"+e[t].data.hashid;return"STATIC_VIEW"===n.view?o=MMT.ListNodeProcessor.cloneListNode(n,i):(o=r.cloneNode(!0),router.getViewRendererFactory().getRenderer(n.view).render(o,n,s),o.style.display=""),MMT.compiler.addInGenClassNameMap(s,o),setGenClassNames(o,s),o.setAttribute(a,t),router.getEventBinderFactory().getEventBinder(n.view).bindEvents(o,n,s),o}catch(l){MMT.log.error("createViewNode in Renderer failed for className :: "+i),MMT.log.error(l.name+" with message "+l.message)}}function getAllDirectChildViewNodes(e,t){for(var r=[],a=e.childNodes,i=0;i<a.length;i++){var n=a[i];n&&n.hasAttribute&&n.getAttribute("mt-class")===t&&r.push(n)}return r}function animateAndDisplayElement(e){window.getComputedStyle(e).opacity,e.style.opacity=1}function renderAndBindAllViewNodes(e,t,r,a,i){var n=(new Date).getTime();MMT.log.debug("renderAndBindAllViewNodes started for className:: "+i);for(var o=getAllDirectChildViewNodes(e,a),s=0;s<o.length;s++){var l=t[s];if(!l)return void MMT.log.info(" Failed :: "+s+" Partial Elements :: "+o.length);if(setGeneratedIndexValue(l,s),!(r&&r.length>s&&r[s].data.hashid===l.data.hashid)){var d=router.getViewRendererFactory().getRenderer(l.view);l.data||MMT.log.error("Some error :: "+JSON.stringify(l.data));var c=i+"---"+l.data.hashid,p=o[s];p.style.display="",d.render(p,l,c)}}MMT.log.debug("renderAndBindAllViewNodes ended for className:: "+i+" :: took :: "+((new Date).getTime()-n+" ms"))}function setGeneratedIndexValue(e,t){for(var r in e.data)if(e.data.hasOwnProperty(r)){var a=e.data[r];a&&a instanceof Object&&a.hasOwnProperty("view")&&"LIST_VIEW"!==a.view&&"SCROLL_VIEW"!==a.view&&setGeneratedIndexValue(a,t)}e&&e.data&&(e.data._index=t)}function deleteAllViewNodesFrom(e,t,r){for(var a=getAllDirectChildViewNodes(e,r);t<a.length;t++)a[t].parentNode&&a[t].parentNode.removeChild(a[t])}function deleteAllViewNodes(e,t){deleteAllViewNodesFrom(e,0,t)}function Router(e,t,r,a){function i(e,t,r,a){var i=prepareUrl("/"+e,t);MMT.log.info("Address Bar URL :: "+i);var n={url:i,screenKey:r,params:t};router.screenState=n,manageMMTBrowserStates(a,n)}function n(e){var t=this.templatesProvider.getScreenModelCallStartListener(e);t&&t.call()}function o(e){var t=this.templatesProvider.getScreenModelCallCompleteListener(e);t&&t.call()}function s(e){var t=this.templatesProvider.getScreenModelCallErrorListener(e);t&&t.call()}this.viewRendererFactory=t,this.eventBinderFactory=r,this.templatesProvider=e,this.initialRequest=!1,this.SCREEN_MODEL_TTL=0,this.templateViewModelMap={},this.init=function(e){function t(e){for(var t in MMT.templateMap)if(MMT.templateMap.hasOwnProperty(t)){var r=MMT.templateMap[t];if(r.hasOwnProperty("screenUrl")&&r.screenUrl===e)return t}return e}this.initialRequest=!0,this.screenUrlPrefix=e?e:"/pwa-hlp/screen/",window.addEventListener("popstate",function(e){e.state&&e.state.screenKey&&router.switchState(e.state.screenKey,e.state.params?e.state.params:{},"pop")});var r=extractUrlDetails();if(MMT.log.info(r),r.state=t(r.pathName),r.state)router.switchState(r.state,r.params);else{var i=a?a:"default";router.switchState(i,r.params)}};var l={};this.viewModelChangeListener={subscribe:function(e,t){l[e]?l[e].push(t):(l[e]=[],l[e].push(t)),MMT.log.debug("Subscribed :: "+e)},publish:function(e){if(e.startsWith("_gen_")){var t=e.split("---");e=t[t.length-1]}if(MMT.log.debug("Gonna Publish :: "+e),l[e]){var r=l[e];for(var a in r){var i=r[a];r.hasOwnProperty(a)&&i.apply()}}}};var d=$.Deferred(),c=[];this.pageLoadCompleteListener={pageLoad:d,subscribe:function(e){c.push(e),MMT.log.info("Subscribed for PageLoadComplete")},publish:function(){if(MMT.log.info("Publishing for PageLoadComplete"),c)for(var e in c){var t=c[e];c.hasOwnProperty(e)&&(t.apply(),d.resolve())}}};var p={};this.getMoreListeners={subscribe:function(e,t){p[e]?p[e].push(t):(p[e]=[],p[e].push(t)),MMT.log.info("Get More Listener Subscribed :: "+e)},publish:function(e,t){if(MMT.log.info("Get More Publish :: "+t),p[e]){var r=p[e];for(var a in r){var i=r[a];r.hasOwnProperty(a)&&i.call(null,t)}}},reinit:function(){p={}}};var u={};this.ajaxOnStartListener={subscribe:function(e,t){MMT.log.info("Ajax OnStartListener Subscribed :: "+e),u[e]?u[e].push(t):(u[e]=[],u[e].push(t))},publish:function(e,t){if(u[e]){var r=u[e];for(var a in r){var i=r[a];r.hasOwnProperty(a)&&i(t)}}},reinit:function(){u={}}};var h={};this.ajaxViewPostAPIResponseListener={subscribe:function(e,t){h[e]?h[e].push(t):(h[e]=[],h[e].push(t)),MMT.log.info("Ajax View API Response Listener Subscribed :: "+e)},publish:function(e){if(MMT.log.info("Ajax View API Response Publish :: "+e),h[e]){var t=h[e];for(var r in t){var a=t[r];t.hasOwnProperty(r)&&a.call()}}},reinit:function(){h={}}};var f={};this.ajaxCompleteListener={subscribe:function(e,t){f[e]?f[e].push(t):(f[e]=[],f[e].push(t)),MMT.log.info("Ajax Complete Listener Subscribed :: "+e)},publish:function(e){if(MMT.log.info("Ajax Complete Publish :: "+e),f[e]){var t=f[e];for(var r in t){var a=t[r];t.hasOwnProperty(r)&&a.call()}}},reinit:function(){f={}}};var m={};this.ajaxCompleteErrorListener={subscribe:function(e,t){m[e]?m[e].push(t):(m[e]=[],m[e].push(t)),MMT.log.info("Ajax Complete Error Listener Subscribed :: "+e)},publish:function(e,t){if(MMT.log.info("Ajax Complete Error Publish :: "+e+" :: "+t.textStatus),m[e]){var r=m[e];for(var a in r){var i=r[a];r.hasOwnProperty(a)&&i.call(null,t)}}},reinit:function(){m={}}};var v={};this.listViewRenderCompleteListener={subscribe:function(e,t){MMT.log.info("ListView RenderCompleteListener Subscribed :: "+e),v[e]?v[e].push(t):(v[e]=[],v[e].push(t))},publish:function(e,t){if(v[e]){var r=v[e];for(var a in r){var i=r[a];r.hasOwnProperty(a)&&i(t)}}},reinit:function(){v={}}},this.mainViewTemplate=null,this.mainScreenModel=null,this.getRenderedViewModelMap=function(){return this.templateViewModelMap},this.getViewRendererFactory=function(){return this.viewRendererFactory},this.getEventBinderFactory=function(){return this.eventBinderFactory},this.getMainTemplate=function(){return this.screenTemplate},this.getMainScreenModelReference=function(){return this.mainScreenModel},this.getInitialRequest=function(){return this.initialRequest},this.setInitialRequest=function(e){this.initialRequest=e},this.updateMainViewModelInternal=function(e,t,r){for(var a in r){if(a===e)return void(r[a]=t);if(a instanceof Object)return this.updateMainViewModelInternal(mref,t,r[a].data)}},this.updateMainViewModel=function(e,t){this.updateMainViewModelInternal(e,t,this.mainScreenModel.data)},this.renderInitialViewModel=function(e,t,r){var a=this.getViewRendererFactory().getRenderer(e.view);a.render(t,e,r);var i=this.updateDOM(t);this.screenTemplate=i,this.renderComputedViews(),bindNavigationEvents(e,i,r),this.bindViewModelChangeListeners()},this.bindViewModelChangeListeners=function(){for(var e=this.screenTemplate.querySelectorAll("[mt-compute-on]"),t=0;t<e.length;t++){var r=e[t],a=r.getAttribute("mt-compute-on");router.viewModelChangeListener.subscribe(a,function(){router.rerender()})}},this.renderComputedViews=function(){for(var e=this.screenTemplate.querySelectorAll('[mt-view="computed_view"]'),t=0;t<e.length;t++){var r=this.getViewRendererFactory().getRenderer("COMPUTED_VIEW"),a=e[t];MMT.log.info("Computed View :: "+a.tagName);var i=a.getAttribute("mt-parent-view");if(i){var n=router.getViewModel(i);n?r.render(a,n,""):MMT.log.debug("Error in COMPUTED_VIEW :: parentViewModel not found for node.")}else r.render(a,this.mainScreenModel,"")}},this.getTemplateFor=function(e){return e.includes("---")?MMT.compiler.getTemplateNodeWithGenClass(e):MMT.compiler.getTemplateNodeWithMTClass(e)},this.rerender=function(e){var t=this.mainScreenModel,r=this.mainViewKey,a=this.mainViewTemplate;e&&(t=this.getViewModel(e),r=e,a=this.getTemplateFor(e));var i=this.getViewRendererFactory().getRenderer(t.view);i.rerender(a,t,r),this.renderComputedViews()},this.initializeMainScreenModel=function(e){var t=e.screenModel;for(var r in t){t.hasOwnProperty(r)&&(this.mainViewKey=r,this.mainScreenModel=t[r],MMT.log.info("Main View Key :: "+this.mainViewKey),MMT.log.info("Main View Model :: "+this.mainScreenModel));break}},this.noScreenModel=function(e){var t=MMT.templateMap[e];return!(!t||!t.noScreenModel)&&t.noScreenModel},this.getScreenUrl=function(e){var t=MMT.templateMap[e];return t&&"undefined"!=typeof t.screenUrl?t.screenUrl:e},this.screenPromises={},this.getScreenModel=function(e,t,r,a){var i=this;if(i.currentScreenKey=e,this.screenPromises[e]&&!a)return this.screenPromises[e].promise();this.screenPromises[e]=$.Deferred();var n=this.screenPromises[e],o="",s=this.getScreenUrl(e);return this.noScreenModel(e)?(o="Error Screen is not defined for the screen state key, "+e,MMT.log.error(o),setTimeout(function(){n.reject(o,i)},0)):MMT.ajaxCall.get("/pwa-hlp/screen/"+s,this.SCREEN_MODEL_TTL,t,null).success(function(e){n.resolve(deepCopyObject(e),i)}).error(function(t){o="Error while fetching ScreenModel for Key:: "+e+" :: Error :: "+t,MMT.log.error(o),n.reject(o,i)}),n.promise()},this.executeStyleElements=function(e){if(e){if("LINK"===e.tagName)document.getElementsByTagName("head")[0].appendChild(function(e){var t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e.href,t}(e));else for(var t=0,r=e.childNodes;t<r.length;)this.executeStyleElements(r[t++]);return e}},this.resetRouterState=function(){c=[],MMT.ajaxCall.resetCallbacks(),router.screenState={},router.templateViewModelMap={},MMT.compiler.reinit(),MMT.ViewModelPreProcessor.init(),this.ajaxCompleteListener.reinit(),this.ajaxOnStartListener.reinit(),this.ajaxViewPostAPIResponseListener.reinit(),this.ajaxCompleteErrorListener.reinit(),this.listViewRenderCompleteListener.reinit(),this.getMoreListeners.reinit()},this.switchStateWithInitialScreenModel=function(e,t,r,a){r=r?r:{},this.resetRouterState();var n=(this.templatesProvider.getTemplateForInterstitial(e),this.getScreenUrl(e));this.getInitialRequest()&&(a="initial"),i(n,r,e,a),o.call(this,e);var s=t;this.initializeMainScreenModel(s);var l=this.templatesProvider.getTemplateFor(s);l.done(function(e,t){t.pageComplete&&router.pageLoadCompleteListener.subscribe(t.pageComplete);var r=document.getElementsByTagName("page-view")[0];r.innerHTML=e;var a=executePostDownloadActions(r,s);a.always(function(){MMT.compiler.transformEvals(r),MMT.compiler.compile(r),router.screenTemplate=r,router.mainViewTemplate=MMT.compiler.getTemplateNodeWithMTClass(router.mainViewKey),router.renderInitialViewModel(router.mainScreenModel,router.mainViewTemplate,router.mainViewKey)})})},this.switchState=function(e,t,r){t=t?t:{},this.resetRouterState();var a=this.templatesProvider.getTemplateForInterstitial(e),l=this.getScreenUrl(e);this.getInitialRequest()&&(r="initial"),i(l,t,e,r),n.call(this,e);var d=this.getScreenModel(e,t,a,!0);d.done(function(t,r){o.call(r,e),r.initializeMainScreenModel(t);var a=r.templatesProvider.getTemplateFor(t);a.done(function(e,a){a.pageComplete&&r.pageLoadCompleteListener.subscribe(a.pageComplete);var i=document.getElementsByTagName("page-view")[0];i.innerHTML=e;var n=executePostDownloadActions(i,t);n.always(function(){MMT.compiler.transformEvals(i),MMT.compiler.compile(i),r.screenTemplate=i,r.mainViewTemplate=MMT.compiler.getTemplateNodeWithMTClass(r.mainViewKey),r.renderInitialViewModel(r.mainScreenModel,r.mainViewTemplate,r.mainViewKey)})})}).fail(function(t,r){s.call(r,e);var a={};a.screen=e;var i=r.templatesProvider.getTemplateFor(a);i.done(function(e,t){t.pageComplete&&r.pageLoadCompleteListener.subscribe(t.pageComplete);var a=document.getElementsByTagName("page-view")[0];a.innerHTML=e,r.pageLoadCompleteListener.publish()})})},this.updateDOM=function(e){var t=document.getElementsByTagName("page-view");if(t.length>0){var r=t[0];return this.totalScripts=this.screenTemplate.getElementsByTagName("script").length,MMT.log.info("Total number of scripts to include is, "+this.totalScripts),this.totalScripts&&0!==this.totalScripts?this.executeScriptElements(this.screenTemplate):router.pageLoadCompleteListener.publish(),r}throw new PageViewMissingException("Fatal Error :: page-view tag is missing!")},this.executeScriptElements=function(e){if(this.isScriptNode(e)===!0)e.parentNode.replaceChild(this.cloneScriptNode(e),e);else for(var t=0,r=e.childNodes;t<r.length;)this.executeScriptElements(r[t++]);return e},this.isScriptNode=function(e){return"SCRIPT"===e.tagName},this.cloneScriptNode=function(e){var t=document.createElement("script");t.text=e.innerHTML,t.async=!1;for(var r=e.attributes.length-1;r>=0;r--)t.setAttribute(e.attributes[r].name,e.attributes[r].value);return t.onload=function(){router.totalScripts-=1,0===router.totalScripts&&router.pageLoadCompleteListener.publish()},t.onerror=function(){router.totalScripts-=1,0===router.totalScripts&&router.pageLoadCompleteListener.publish()},t},this.addFilter=function(e,t,r){MMT.ViewModelPreProcessor.addFilter(e,t,r)},this.removeFilter=function(e,t,r){MMT.ViewModelPreProcessor.removeFilter(e,t,r)},this.addSorter=function(e,t,r){MMT.ViewModelPreProcessor.addSorter(e,t,r)},this.removeSorter=function(e,t,r){MMT.ViewModelPreProcessor.removeSorter(e,t,r)},this.propagateUpward=function(e){setTimeout(function(t){if(e){if(e.getAttribute("mt-class")){var r=e.getAttribute("mt-class");MMT.log.info("Publishing the change :: "+r),t.viewModelChangeListener.publish(r)}e.parentNode&&e.parentNode.getAttribute&&t.propagateUpward(e.parentNode)}}(this),0)},this.getViewModelInternalWithBaseRef=function(e,t){for(var r in t)if(t.hasOwnProperty(r)){if(r===e)return t[r];if("object"==typeof t[r]){var a=this.getViewModelInternalWithBaseRef(e,t[r]);if(a)return a}}},this.updatePartialModelInternal=function(e,t,r){for(var a in r)if(r.hasOwnProperty(a)){if(a===e)return r[a]=t,router.rerender(a),!0;if("object"==typeof r[a]){var i=this.updatePartialModelInternal(e,t,r[a]);if(i)return i}}},this.getRenderedViewModel=function(e){return e&&this.getRenderedViewModelMap()[e]?this.getRenderedViewModelMap()[e]:void 0},this.getViewModel=function(e){if(e===this.mainViewKey)return this.mainScreenModel;var t=this.mainScreenModel;return this.getViewModelWithBaseRef(e,t)},this.getViewModelWithBaseRef=function(e,t){if(e.includes("---")){var r=e.split("---");e=r[0];var a=this.getViewModelWithBaseRef(e,t),i=r[1];if(a&&a.data)for(var n=a.data,o=0;o<n.length;o++){var s=n[o].data.hashid;if(s&&s===i){var l=a.data[o];return 2===r.length?l:(r=r.splice(2),this.getViewModelWithBaseRef(r.join("---"),l))}}}return this.getViewModelInternalWithBaseRef(e,t)},this.updatePartialModel=function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],a=this.getViewModel(t);if(!a){MMT.log.error("View Model not found in screenModel for Key :: "+t);continue}a.data=r.data,a.view=r.view,a.events=r.events,this.rerender(t)}},this.handleCheckBoxClick=function(e,t){MMT.log.info(e.id),MMT.log.info(e.checked),t.data.value=e.checked.toString(),t.data[t.data.key]=e.checked,MMT.log.info(JSON.stringify(t)),this.propagateUpward(e)},this.handleRadioButtonClick=function(e,t){MMT.log.info(e.value),MMT.log.info(e.checked),e.checked&&(t.data.selected=e.value),MMT.log.info(JSON.stringify(t)),this.propagateUpward(e)},this.handleTextboxChange=function(e,t){t.data.value=e.value},this.handleTextboxUpdate=function(e,t){t.data.value=e.value,this.propagateUpward(e)}}function loadBanner(){$(".hp-banner2").on("initialized.owl.carousel",function(e){$(".owl-item.active img").prop("src",function(){return $(this).attr("data-src")})}),$(".hp-banner2").owlCarousel({margin:0,items:4,autoWidth:!0,lazyLoad:!0,nav:!0,loop:!0,navText:['<span class="nav-prev"></span>','<span class="nav-next"></span>']}).on("changed.owl.carousel",function(e){var t=$(this).find(".owl-item.active").last().index(),r=3,a=t+r;for(i=t;i<=a;i++){var n=$(".hp-banner2").find(".owl-item").eq(i).find("img").attr("data-src");$(".hp-banner2").find(".owl-item").eq(i).find("img").attr("src",n)}})}function banner(){setTimeout(function(){if("undefined"==typeof ttMETA&&($(".item_loading").hide(),$("#mbox_container").hide(),$("#default_container").show(),loadBanner(),window.s))try{var e=s_gi("mmtprod");e.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop22",e.prop22="Mbox_timeout",e.tl(this,"o","Mbox_timeout")}catch(t){}},mboxDefaultTimeout)}function signInCurrentPage(){isLoggedIn=!0,loginDone=!0,email_id=email&&"NA"!=email?btoa(email):"NA",_satellite.track("email_id"),void 0!==isCorporate&&isCorporate&&"false"!==isCorporate||hitCosmos&&"true"===hitCosmos&&getWalletCard()}function mobileOTPVerified(){isLoggedIn=!0,void 0!==isCorporate&&isCorporate&&"false"!==isCorporate||hitCosmos&&"true"===hitCosmos&&getWalletCard()}function showModal(e){var t=e.attr("data-modal");$("#otp_overlay").show(),$("body").addClass("overflow"),$("#"+t).show(),$("div.hm_otp-overlay").find("div.new_user__verify").show()}function lazyLoad(e){$(".lazy").Lazy({scrollDirection:"vertical",effect:"fadeIn",bind:e,threshold:50,visibleOnly:!0,onError:function(e){MMT.log.error("error loading "+e.data("src"))}})}function detachContent(e,t){$(e).addClass("deactivate").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){setTimeout(function(){$(e).detach(),null!=t&&t()},300)})}function addShortListCard(){$(".hp-shortlist>div").prepend($(".shortlist:first-child").clone())}function removeShortListCard(e){detachContent($(e).parent(),null)}function isLobCookieModified(){var e=$.cookie("lobModified");return!(!e||"true"!==e)}function updateLobModified(){void 0!=$.cookie("lob")&&""!=$.cookie("lob")&&null!=$.cookie("lob")?$.cookie("lobModified",!0):$.cookie("lobModified",!1)}function filterUpdate(e,t,r,a){var i;$(a).hasClass(e)&&(1==r.length&&$(a).text()===r?($(a).addClass("active"),setTimeout(function(){$(a).removeClass("active")},200),$(a).removeClass("disable"),i="remove"):contains($(a).text(),r)?($(a).addClass("active"),setTimeout(function(){$(a).removeClass("active")},200),$(a).addClass("disable"),i="remove"):($(a).addClass("active"),setTimeout(function(){$(a).removeClass("active")},200),$(a).removeClass("disable"),i="add"),updateCookie(t,i,$(a).text(),r),"lob_tags"===e?onClickFilters(r,$(".lob_tags")):"dest_tags"===e?onClickFilters(r,$(".dest_tags")):"month_tags"===e&&onClickFilters(r,$(".month_tags")))}function lobFilterUpdate(e,t,r,a){var i;$(a).hasClass(e)&&(1==r.length&&$(a).text()===r?($(a).addClass("active"),setTimeout(function(){$(a).removeClass("active")},200),$(a).removeClass("disable"),i="remove"):contains($(a).text(),r)?($(a).addClass("active"),setTimeout(function(){$(a).removeClass("active")},200),$(a).addClass("disable"),i="remove"):($(a).addClass("active"),setTimeout(function(){$(a).removeClass("active")},200),$(a).removeClass("disable"),i="add"),updateCookie(t,i,$(a).text(),r),onClickFilters(r,$(".tagName")))}function animate__add__to__cart(e,t){try{var r=document.createElement("div");$(r).addClass("hp-listing").append(e.clone());var a=e.offset();$(t).offset();$(r).appendTo("body"),$(e).css("opacity","0.2").slideUp(1e3),$(e).addClass("animated zoomOutRight"),$(r).css({position:"absolute",top:a.top,left:a.left,width:$(e).width(),height:$(e).height(),opacity:.8,"z-index":1e3}).animate({},800).fadeOut({complete:function(){$(this).remove(),addShortListCard()}})}catch(i){console.log(i)}}function getDestListData(e,t){var r=e.term;$.ajax({async:!0,global:!1,url:"/pwa-hlp/destinations?&term="+r,dataType:"json",success:function(e){t(e)}})}function sticky_relocate(){var e=$(window).scrollTop();if($(".fd_filter__gutter").length){var t=$(".fd_filter__gutter").offset().top;e>t?($("#fd_Filters_wrap").addClass("fd_filter__stick"),$(".fd_filter__gutter").height($("#fd_Filters_wrap").outerHeight()),$(".hp-bestFare--interested").hide(),$(".hp-bestFare--interested-fromCity").hide(),$(".fd_filter__option .showhide_text").html("Show Filters"),$(".fd_filter__search , .fd_filter__left, .fd_categories__option").addClass("hide")):($("#fd_Filters_wrap").removeClass("fd_filter__stick"),$(".fd_filter__gutter").height(0),$(".fd_filter__search , .fd_filter__left, .fd_categories__option").removeClass("hide"))}}function FromFiltercatcomplete(e,t){var r=e.term;if(r.length<1){if(""in fromFilterCache)return void t(fromFilterCache[""]);$.ajax({async:!0,global:!1,url:"/pwa-hlp/assets/js/miscellaneous/top_cities_flight.json",dataType:"json",success:function(e){fromFilterCache[""]=e.city,t(e.city)}})}else $.ajax({async:!0,global:!1,url:"/pwa-hlp/getFlightsCityFilters?term="+r,dataType:"json",success:function(e){fromFilterCache[r]=e,t(e)}})}function onClickFilters(e,t){for(var r=0;r<t.length;r++)for(var a=0;a<e.length;a++){if($(t[r]).text()===e[a]){$(t[r]).removeClass("disable");break}$(t[r]).addClass("disable")}var i=lobDeslectTest($(".lob_tags"));i||$(".sry_noDeals").removeClass("hidden")}function lobDeslectTest(e){for(var t=!1,r=0;r<e.length;r++)if(!$(e[r]).hasClass("disable")){t=!0;break}return t}function defStateFilters(){deals.destSet.length>0&&onClickFilters(deals.destSet,$(".dest_tags")),deals.monthSet.length>0&&onClickFilters(deals.monthSet,$(".month_tags")),deals.lobSet.length>0&&onClickFilters(deals.lobSet,$(".lob_tags")),void 0!=deals.city&&""!=deals.city&&$("#city_change").val(deals.city)}function cityCheckDest(){var e=$(".dest_tags");if(deals.destSet.length>0)for(var t=deals.destSet,r=0;r<t.length;r++){for(var a=!0,i=0;i<e.length;i++){if(t[r]===$(e[i]).text()){a=!0;break}a=!1}if(!a){for(var n=e.length-1;n>0;n--)$(e[n]).text($(e[n-1]).text());$(e[0]).text(t[r])}}}function createLoadingLI(){var e=$('<li id="loading1" class="hidden"></li>'),t=$('<li id="loading2" class="hidden"></li>'),r=$('<li id="loading3" class="hidden"></li>'),a=addLoadingState(e),i=addLoadingState(t),n=addLoadingState(r);$("#dealCardUL").append(a),$("#dealCardUL").append(i),$("#dealCardUL").append(n)}function appendInnerLoader(e){var t=$('<span class="inner_loader"></span>');return e.append(t)}function addLoadingState(e){var t=$('<div class="fd_card__hotel clearfix"></div>'),r=$('<div class="fd_hotel__loadingimg clearfix"></div>'),a=$('<div class="fd_hotel__details fd_hotel__det_loading clearfix"></div>'),i=$('<div class="fd_hotel__left"></div>'),n=$('<p class="loading_line_l append_bottom20"></p>'),o=$('<div class="fd_hotel__right"></div>'),s=$('<p class="fd_hotel__shortlist clearfix"></p>'),l=$('<a href="#"></a>'),d=$('<span class="fd_heartOutline__icon"></span>'),c=$('<p class="loading_line_s clearfix fd_hotel__dealInfo"></div>'),p=$('<div class="clearfix fd_hotel__price_loading"></div>'),u=$('<div class="clearfix fd_price__info"></div>'),h=$('<div class="fd_hotel__left lato_medium"></div>'),f=$('<div class="fd_hotel__right lato_medium"></div>'),m=$('<p class="loading_line_s clearfix fd_hotel__dealInfo"></p>');return i.append(appendInnerLoader(n)),i.append(appendInnerLoader($('<p class="loading_line_l"></p>'))),l.append(d),s.append(l),o.append(s),o.append(appendInnerLoader(c)),h.append($('<p class="loading_line_l"></p>')),f.append(appendInnerLoader(m)),u.append(h),u.append(f),p.append(u),a.append(i),a.append(o),t.append(r),t.append(a),t.append(p),e.append(t)}function addDataToCard(e){var t=$('<li class="clearfix cardLi"></li>'),r=$('<div class="landingLink hidden"></div>');r.text(e.landingLink);var a=$('<span class="fd_hotel__left lato_medium"></span>'),i=$('<span class="fd_price__discount"></span>');i.text("₹ "+e.price);var n=$('<span class="fd_price__date"></span>');n.text(e.stringDate);var o=$('<span class="fd_price__savePercent"></span>'),s=$('<span class="fd_price__save"></span>'),l=$('<span class="fd_price__saveNet">Book Now</span>'),d=$('<span class="fd_hotel__right lato_medium"></span>');return d.append(s),a.append(i,n),null!=e.depPrecentage&&"null"!=e.depPrecentage?o.text("Save "+e.depPrecentage+" %"):o.text("Book Now"),s.append(o,l),t.append(r,d,a),t}function addDataToTemplate(e){var t=$('<li id="cardLi" class="cardLiClass"></li>'),r=$('<div class="destCity hidden"></div>'),a=$('<div class="starCat hidden"></div>'),i=$('<div class="seatsLeft hidden"></div>'),n=$('<div class="lob hidden">${card.lob }</div>');r.text(e.destCityString),"HOTEL"===e.lob&&a.text(e.starCat),i.text(e.seatsLeft),n.text(e.lob);var o=$('<div class="fd_card__hotel clearfix"> </div>'),s=$('<a class="fd_hotel__img clearfix" href="#"></a>'),l=$('<img alt="" class="lazy" />');l.attr("data-src",e.imgSrc);var d=$('<div class="fd_flight_info"></div>'),c=$('<p class="clearfix">Flight to</p>'),p=$('<p class="fd_flight_city clearfix"></p>');return p.text(e.destCityString),d.append(c,p),"FLIGHT"==e.lob?s.append(l,d):s.append(l),"HOTEL"===e.lob?o.append(r,n,s,i,a,TemplateDetails(e),TemplatePrice(e)):o.append(r,n,s,i,TemplateDetails(e),TemplatePrice(e)),t.append(o),t}function TemplateDetails(e){var t=$('<div class="fd_hotel__details clearfix"></div>'),r=$('<div class="fd_hotel__left"></div>'),a=$('<p class="fd_hotel__name lato_medium largename"></p>');a.text(e.sector);var i=$('<p class="fd_hotel__info"></p>');i.text(e.persuation),r.append(a,i);var n=$('<div class="fd_hotel__right"></div>'),o=$('<p class="fd_hotel__dealInfo clearfix"></div>'),s=$('<a href="#"></a>'),l=$('<span class="fd_greenArrow__icon"></span>'),d=$("<span></span>");return 1===e.count?d.text(" "+e.count+" deal"):d.text(" "+e.count+" deals"),s.append(l,d),n.append(o,s),t.append(r,n),t}function TemplatePrice(e){var t=$('<div class="clearfix fd_hotel__price"></div>'),r=$('<div class="clearfix fd_price__info"></div>'),a=$('<div class="fd_hotel__left lato_medium"></div>'),i=$('<span class="fd_price__discount"></span>');if(i.text("₹ "+e.dealPrice),null!=e.strickedPrice){var n=$('<span class="fd_price__actual"></span>');n.text("₹ "+e.strickedPrice),a.append(i,n)}else a.append(i);var o=$('<div class="fd_hotel__right lato_medium"></div>'),s=$('<span class="fd_price__save"></span>'),l=$('<span class="fd_price__savePercent"></span>');null!=e.dealPercentageDeprecation?(l.text(e.dealPercentageDeprecation+"%"),s.text("Save ")):s.text("View More"),s.append(l),o.append(s),r.append(a,o);for(var d=$('<div class="clearfix fd_price__all"><div>'),c=$('<ul class="fd_price__withDate clearfix"></ul>'),p=0;p<e.dealsCardList.length;p++)c.append(addDataToCard(e.dealsCardList[p]));if(null!=e.dealPercentageDeprecation&&"HOTEL"===e.lob){var u=$('<p class="fd_price__average clearfix"></p>');u.text("₹ "+e.strickedPrice+" is the average price of this hotel"),d.append(u,c)}else d.append(c);return t.append(r,d),t}function getFilteredData(e){$(".dt__tags").css({"pointer-events":"none"}),"load_more"===e.attr("id")?($("#dealCardUL").outerHeight($("#dealCardUL").outerHeight()+333),createLoadingLI(),$("#loading1,#loading2,#loading3").css("margin-top",$("#dealCardUL").outerHeight()-323),$("#loading1,#loading2,#loading3").removeClass("hidden")):(createLoadingLI(),$("#loading1,#loading2,#loading3").removeClass("hidden")),$.ajax({async:!0,global:!1,cache:!1,url:"/pwa-hlp/getFilteredDeals?offset="+deals.offset,dataType:"json",success:function(e){var t=e.list;setDealCount(),e.defFlag||!lobDeslectTest($(".lob_tags"))?($(".sry_noDeals").removeClass("hidden"),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Live_Best_Fares_No_Deals_Found",s.tl(this,"o","Live_Best_Fares_No_Deals_Found")):$(".sry_noDeals").addClass("hidden");for(var r=0;r<t.length;r++)$("#dealCardUL").append(addDataToTemplate(t[r]));$(".dt__tags").css({"pointer-events":"auto"}),$("#loading1,#loading2,#loading3").remove(),deals.offset=deals.offset+t.length,$("#dealCardUL").children().length>=parseInt(dealMaxLoad)||t.length<parseInt(dealsPerLoad)?$(".fd_loadmore").hide():$("#dealCardUL").children().length===deals.dealCount?$(".fd_loadmore").hide():$(".fd_loadmore").show(),createCards(),lazyLoad("event")}})}function setDefaultCity(){$.ajax({async:!0,global:!1,url:"/pwa-hlp/defaultCity",dataType:"json",success:function(e){null!=e&&"null"!=e?($("#city_change").val(e),deals.city=e,$.cookie("city",deals.city)):$("#city_change").val(""),setDealCount()}})}function setDestinationsInTile(){$.ajax({async:!0,global:!1,url:"/pwa-hlp/destinationTile",dataType:"json",success:function(e){for(var t=0;t<e.length;t++){var r=$('<li class="dt__tags dest_tags"></li>');r.text(e[t]),$("#destFilters").append(r)}addDisableToDestTile(deals.destSet,$(".dest_tags"))}})}function addDisableToDestTile(e,t){for(var r=0;r<e.length;r++){for(var a=!1,i=0;i<t.length;i++){if($(t[i]).text()===e[r]){$(t[i]).removeClass("disable"),a=!0;break}$(t[i]).addClass("disable")}if(!a){var n=$('<li class="dt__tags dest_tags"></li>');n.text(e[r]),$("#destFilters").prepend(n),$("#destFilters").children()[16].remove()}}}function setDealCount(){try{$.ajax({async:!0,global:!1,cache:!1,url:"/pwa-hlp/listCount",dataType:"json",success:function(e){e<=parseInt(dealsPerLoad)&&$(".fd_loadmore").hide(),deals.dealCount=parseInt(e),$(".deal_count").text("("+e+")"),$(".bounce").text(" Discover "+e+" Special Deals"),$(".bounce").prepend('<span class="discover_tagicon"></span>')}})}catch(e){}}function updateCookie(e,t,r,a){if("add"===t)a.push(r);else{var i=a.indexOf(r);i>-1&&a.splice(i,1)}unique(a),"dest"===e&&(deals.destSet=a,$.cookie("dest",unique(a).toString())),"month"===e&&(deals.monthSet=a,$.cookie("month",unique(a).toString())),"lob"===e&&(deals.lobSet=a,$.cookie("lob",unique(a).toString()),updateLobModified())}function firstFilterClick(e,t,r){if($(r).addClass("active"),"dest"===e){for(var a=$(".dest_tags"),i=0;i<a.length;i++)$(a[i]).addClass("disable");updateCookie(e,"add",t,deals.destSet)}else if("month"===e){for(var n=$(".month_tags"),i=0;i<n.length;i++)$(n[i]).addClass("disable");updateCookie(e,"add",t,deals.monthSet)}else if("lob"===e){for(var o=$(".lob_tags"),i=0;i<o.length;i++)$(o[i]).addClass("disable");updateCookie(e,"add",t,deals.lobSet)}setTimeout(function(){$(r).removeClass("active")},200),$(r).removeClass("disable")}function unique(e){for(var t={},r=[],a=0,i=e.length;a<i;++a)t.hasOwnProperty(e[a])||("null"!=e[a]&&null!=e[a]&&"function"!==jQuery.type(e[a])&&r.push(e[a]),t[e[a]]=1);return r}function checkIfAllTagsAreInactive(e,t){0==e.length&&$(t).removeClass("disable")}function contains(e,t){for(var r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}function toggleFilter(e,t){for(var r=0;r<e.length;r++)$(t).text()===$(e[r]).text()&&($(e[r]).hasClass("disable")?$(e[r]).removeClass("disable"):$(e[r]).addClass("disable"))}function mouseOverFilters(e,t,r){for(var a=0;a<e.length;a++)0==t.length?($(r).text()===$(e[a]).text()?$(e[a]).removeClass("disable"):$(e[a]).addClass("disable"),t===deals.destSet&&$("#js-dt__tags_more").addClass("disable")):1==t.length?contains($(r).text(),t)?($(e[a]).removeClass("disable"),t===deals.destSet&&$("#js-dt__tags_more").removeClass("disable")):contains($(e[a]).text(),t)||$(r).text()===$(e[a]).text()?$(e[a]).removeClass("disable"):$(e[a]).addClass("disable"):($(r).text()===$(e[a]).text()?$(r).hasClass("disable")?$(e[a]).removeClass("disable"):$(e[a]).addClass("disable"):contains($(e[a]).text(),t)?$(e[a]).removeClass("disable"):$(e[a]).addClass("disable"),t===deals.destSet&&$("#js-dt__tags_more").addClass("disable"))}function createCards(){$("#dealCardUL").BlocksIt({numOfCol:3,offsetX:10,offsetY:10,blockElement:".cardLiClass"})}function alignCards(){setTimeout(function(){$("#dealCardUL").BlocksIt()},10),setTimeout(function(){$("#dealCardUL").BlocksIt()},50),setTimeout(function(){$("#dealCardUL").BlocksIt()},250),setTimeout(function(){$("#dealCardUL").BlocksIt();
},500)}function bouncing(){$("html, body").animate({scrollTop:$("#fd-wrap").position().top-125},"slow"),setTimeout(function(){$(".discovery_tag").fadeOut()},200)}function Tracking(e,t){this.metaContent=e,this.sr=t,this.sendMetricData=function(e,i,s,l,d,c,p){var u={metaContent:this.metaContent,pageURL:s,timestampCreated:(new Date).getTime(),referrerURL:null==a()?"NA":a(),deviceResolution:o(),activityName:e,displayLatency:l,networkLatency:d,serverLatency:c,totalLatency:p,sr:t,type:i,svi:r(),loggedInChannel:n()};$.ajax({type:"POST",url:"/pwa-hlp/sendMetricData",dataType:"json",contentType:"application/json",data:JSON.stringify(u)})};var r=function(){var e=$.cookie("s_vi");return"undefined"!=typeof e&&null!=e&&""!=e?e:"NA"},a=function(){return document.refferer},i=function(e){var t,r,a,i=document.cookie.split(";");for(t=0;t<i.length;t++)if(r=i[t].substr(0,i[t].indexOf("=")),a=i[t].substr(i[t].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==e)return unescape(a)},n=function(){var e=i("fbEmail"),t="";return t=e?e.startsWith("stgoogle")?"g+":"fb":"mmt"},o=function(){return window.screen.width+" x "+window.screen.height}}!function(e){var t,r,a={numOfCol:3,offsetX:15,offsetY:25,adjustWidth:!1,blockElement:".cardLiClass"},i=[];Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for(r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1});var n=function(){i=[];for(var e=0;e<a.numOfCol;e++)o("empty-"+e,e,0,1,-a.offsetY)},o=function(e,t,r,n,o){for(var s=0;s<n;s++){var l=new Object;l.x=t+s,l.size=n,l.endY=r+o+2*a.offsetY,i.push(l)}},s=function(e,t){for(var r=0;r<t;r++){var a=l(e+r,"x");i.splice(a,1)}},l=function(e,t){for(var r=0;r<i.length;r++){var a=i[r];if("x"==t&&a.x==e)return r;if("endY"==t&&a.endY==e)return r}},d=function(e,t){for(var r=[],a=0;a<t;a++)r.push(i[l(e+a,"x")].endY);var n=Math.min.apply(Math,r),o=Math.max.apply(Math,r);return[n,o,r.indexOf(n)]},c=function(e){if(e>1){for(var t,r,a=i.length-e,n=!1,o=0;o<i.length;o++){var s=i[o],l=s.x;if(l>=0&&l<=a){var c=d(l,e);n?c[1]<t[1]&&(t=c,r=l):(n=!0,t=c,r=l)}}return[r,t[1]]}return t=d(0,i.length),[t[2],t[0]]},p=function(e,t){!e.data("size")||e.data("size")<0?e.data("size",1):e.data("size")>a.numOfCol&&e.data("size",a.numOfCol);var i=c(e.data("size")),n=r*e.data("size")-(e.outerWidth()-e.width());e.css({width:n-2*a.offsetX,left:i[0]*r,top:i[1],position:"absolute"});var l=e.outerHeight();s(i[0],e.data("size")),o(e.attr("id"),i[0],i[1],e.data("size"),l)};e.fn.BlocksIt=function(o){o&&"object"==typeof o&&e.extend(a,o),t=e(this),r=t.width()/a.numOfCol,n(),t.children(a.blockElement).each(function(t){p(e(this),t)});var s=d(0,i.length);return t.height(s[1]+a.offsetY),this}}(jQuery);var MMT_CONSTANTS={LIST_VIEW_WRAPPER:"list_view_info",LIST_VIEW_ID:"list_view_info_id",DROPDOWN_VIEW_WRAPPER:"dropdown_view_info",DROPDOWN_VIEW_ID:"dropdown_view_info_id",SCROLL_VIEW_WRAPPER:"scroll_view_info",SCROLL_VIEW_ID:"scroll_view_info_id",CAROUSEL_VIEW_WRAPPER:"carousel_view_info",CAROUSEL_VIEW_ID:"carousel_view_info_id",AJAX_VIEW_LOADER:"mt_loader",AJAX_VIEW_GET_API:"get_api_call",DATA:"data",BLOCK:"block",NONE:"none",LOGGER_LEVEL:{DEBUG:0,INFO:1,ERROR:2,FATAL:3}};!function(e,t,r){t.DEBUG=!1,t.LOG_LEVEL="ERROR",Array.prototype.contains||(Array.prototype.contains=function(e){var t,r=e!==e;return t=r||"function"!=typeof Array.prototype.indexOf?function(e){var t=-1,a=-1;for(t=0;t<this.length;t++){var i=this[t];if(r&&i!==i||i===e){a=t;break}}return a}:Array.prototype.indexOf,t.call(this,e)>-1}),Array.prototype.remove||(Array.prototype.remove=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return void this.splice(t,1)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var a=function(e){return function(t){return null==t?void 0:t[e]}},i=Math.pow(2,53)-1,n=a("length"),o=function(e){var t=n(e);return"number"==typeof t&&t>=0&&i>=t},s=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e};e.contains=function(e,t){for(var r in e)if(e[r]===t)return!0;return!1},e.each=function(e,t){var r,a;if(o(e))for(r=0,a=e.length;a>r;r++)t(r,e[r],e);else if(s(e)){var i=Object.keys(e);for(r=0,a=i.length;a>r;r++)t(i[r],e[i[r]],e)}return e},e.log=function(){return{debug:MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.DEBUG?console.debug.bind(window.console):function(){},info:MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.INFO?console.info.bind(window.console):function(){},error:MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.ERROR?console.error.bind(window.console):function(){},fatal:MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.FATAL?console.error.bind(window.console):function(){}}}()}(window.MMT=window.MMT||{},window.config=window.config||{}),function(MMT,undefined){MMT.ViewModelPreProcessor||(MMT.ViewModelPreProcessor={preProcessANDFiltersMap:{},preProcessSortersMap:{},init:function(){this.preProcessANDFiltersMap={},this.preProcessSortersMap={}},addFilter:function(e,t,r){this.preProcessANDFiltersMap[e]||(this.preProcessANDFiltersMap[e]=[]),this.preProcessANDFiltersMap[e].contains(t)||(this.preProcessANDFiltersMap[e].push(t),r&&r===!0&&router.rerender(e))},removeFilter:function(e,t,r){this.preProcessANDFiltersMap[e]&&this.preProcessANDFiltersMap[e].contains(t)&&(this.preProcessANDFiltersMap[e].remove(t),MMT.log.info(this.preProcessANDFiltersMap[e]),r&&r===!0&&router.rerender(e))},addSorter:function(e,t,r){this.preProcessSortersMap[e]||(this.preProcessSortersMap[e]=[]),this.preProcessSortersMap[e].contains(t)||(this.preProcessSortersMap[e].push(t),r&&r===!0&&router.rerender(e))},removeSorter:function(e,t,r){this.preProcessSortersMap[e]&&this.preProcessSortersMap[e].contains(t)&&(this.preProcessSortersMap[e].remove(t),r&&r===!0&&router.rerender(e))},process:function(viewModel,className){var functions=this.preProcessANDFiltersMap[className];if(functions)for(var functionIndex=0;functionIndex<functions.length;functionIndex++){var functionName=functions[functionIndex];if(functionName){var evalString="viewModel = "+functionName+"(viewModel)";eval(evalString)}}var functions=this.preProcessSortersMap[className];if(functions)for(var functionIndex=0;functionIndex<functions.length;functionIndex++){var functionName=functions[functionIndex];if(functionName){var evalString="viewModel = "+functionName+"(viewModel)";eval(evalString)}}return viewModel}})}(window.MMT=window.MMT||{}),AbstractRenderer.prototype.canBeShown=function(e,t){var r=!1;if(!t||!t.getAttribute)return MMT.log.error("Template is not available for :: "+JSON.stringify(e)),!1;var a=t.getAttribute("mt-show");if(a){if(r=MMT.compiler.evalFunctionsMap[a](e),!r)return t.style.display="none",!1;t.style.display=""}if(t.getAttribute("mt-render-if")){var i=t.getAttribute("mt-render-if"),n=MMT.compiler.evalFunctionsMap[i](e);if(!n)return t.parentNode.removeChild(t),!1}for(var o in t.childNodes){var s=t.childNodes[o];s&&1===s.nodeType&&(s.getAttribute("mt-class")||this.canBeShown(e,s))}return!0},AbstractRenderer.prototype.handleMTAddCssClass=function(viewModel,template){var addClassCommandAttribute=template.getAttribute("mt-addclass"),classApplied=!1;if(null!==addClassCommandAttribute)if(addClassCommandAttribute.startsWith("{")){var addClassCommandParsedObject=JSON.parse(addClassCommandAttribute);if(addClassCommandParsedObject&&"object"==typeof addClassCommandParsedObject)for(var key in addClassCommandParsedObject)addClassCommandParsedObject.hasOwnProperty(key)&&("classList"in document.createElement("_")&&template.classList.remove(key),eval(addClassCommandParsedObject[key])&&classApplied===!1&&(template.className+=" "+key,classApplied=!0))}else if("string"==typeof addClassCommandAttribute){var cssClassName="",evalCommand="cssClassName = "+addClassCommandAttribute;eval(evalCommand);var currentClassName=template.className,classNames=currentClassName.split(" ");classNames.contains(cssClassName)||(template.className+=" "+cssClassName)}for(var index in template.children){var child=template.children[index];child&&1===child.nodeType&&(child.getAttribute("mt-class")||this.handleMTAddCssClass(viewModel,child))}return!1};var attributeResolver=new MTAttributeResolver;AbstractRenderer.prototype.handleMTCustomAttributes=function(e,t){if(t){for(var r=!0,a=t.attributes,i=[],n=0;n<a.length;n++){var o=a[n];o.name.startsWith("mt-")&&i.push(a[n])}for(var s=0;s<i.length;s++){var o=i[s];if(o&&o.name&&o.name.startsWith("mt-attr-"))r=resolveMTCustomAttribute(o,t,e);else if(o&&o.name){var l=attributeResolver.resolverObject[o.name];l&&(r=l.call(null,o,t,e))}}if(r)for(var s in t.childNodes){var d=t.childNodes[s];d&&1===d.nodeType&&(d.getAttribute("mt-class")||this.handleMTCustomAttributes(e,d))}}},AbstractRenderer.prototype.postRenderActions=function(template,viewModel,className){if(template){("LIST_VIEW"===viewModel.view||"SCROLL_VIEW"===viewModel.view)&&(router.getRenderedViewModelMap()[className]=deepCopyObject(viewModel));var eventBinder=router.eventBinderFactory.getEventBinder(viewModel.view);if(eventBinder.bindEvents(template,viewModel,className),template.getAttribute("mt-postrender")){var postRenderCall=template.getAttribute("mt-postrender");eval(postRenderCall)}}},AbstractRenderer.prototype.preRenderActions=function(template,viewModel,className){if(template){if(this.handleMTCustomAttributes(viewModel,template),template.getAttribute("mt-prerender")){var preRenderCall=template.getAttribute("mt-prerender");eval(preRenderCall)}viewModel=this.preRenderProcessing(viewModel,className);var oldViewModel=router.getRenderedViewModelMap()[className];return{viewModel:viewModel,oldViewModel:oldViewModel}}},AbstractRenderer.prototype.preRenderProcessing=function(e,t){return MMT.ViewModelPreProcessor.process(e,t)},AggregateViewRenderer.prototype=Object.create(AbstractRenderer.prototype),AggregateViewRenderer.prototype.constructor=AggregateViewRenderer,AjaxViewRenderer.prototype=Object.create(AbstractRenderer.prototype),AjaxViewRenderer.prototype.constructor=AjaxViewRenderer,CarouselViewRenderer.prototype=Object.create(AbstractRenderer.prototype),CarouselViewRenderer.prototype.constructor=CarouselViewRenderer,CheckboxViewRenderer.prototype=Object.create(AbstractRenderer.prototype),CheckboxViewRenderer.prototype.constructor=CheckboxViewRenderer,ComputedViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ComputedViewRenderer.prototype.constructor=ComputedViewRenderer,DropdownItemViewRenderer.prototype=Object.create(AbstractRenderer.prototype),DropdownItemViewRenderer.prototype.constructor=DropdownItemViewRenderer,DropdownViewRenderer.prototype=Object.create(AbstractRenderer.prototype),DropdownViewRenderer.prototype.constructor=DropdownViewRenderer,FormViewRenderer.prototype=Object.create(AbstractRenderer.prototype),FormViewRenderer.prototype.constructor=FormViewRenderer,ImageViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ImageViewRenderer.prototype.constructor=ImageViewRenderer,ListViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ListViewRenderer.prototype.constructor=ListViewRenderer,PaginatedCarouselViewRenderer.prototype=Object.create(AbstractRenderer.prototype),PaginatedCarouselViewRenderer.prototype.constructor=PaginatedCarouselViewRenderer,RadioButtonViewRenderer.prototype=Object.create(AbstractRenderer.prototype),RadioButtonViewRenderer.prototype.constructor=RadioButtonViewRenderer,ScrollViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ScrollViewRenderer.prototype.constructor=ScrollViewRenderer,StaticViewRenderer.prototype=Object.create(AbstractRenderer.prototype),StaticViewRenderer.prototype.constructor=StaticViewRenderer,TextboxViewRenderer.prototype=Object.create(AbstractRenderer.prototype),TextboxViewRenderer.prototype.constructor=TextboxViewRenderer,getMoreExecutorsMap={};var bindNavigationEvents=function(e,t,r){},deepCopyObject=function(e){return JSON.parse(JSON.stringify(e))},parseQueryString=function(e){var t,r,a,i={};if(""===e)return i;for(t=e.split(/&(?:amp;)?/gi),a=0;a<t.length;a++)r=t[a].split("="),i[r[0]]=r.slice(1).join("=");return i},prepareUrl=function(e,t){var r=e;if(t&&""!==t){var a=Object.keys(t);a.length>0&&(r=e+"?"+a.map(function(e){return encodeURIComponentIfNeeded(e)+"="+encodeURIComponentIfNeeded(t[e])}).join("&"))}return MMT.log.info("URL being set in browser address bar :: "+r),r};!function(e,t){e.ListNodeProcessor||(e.ListNodeProcessor={clonesHolder:{},init:function(){},registerElement:function(e,t){var r=this.preprocessElement(e);this.clonesHolder[t]=r},cloneListNode:function(e,t){return this.clonesHolder[t]?this.processElement(t,e):void console.log("Clone is not registered for :: "+t)},processElement:function(t,r){var a=this.clonesHolder[t];a=a.replace(/\{\{(.*?)\}\}/g,function(t,a){if(a.startsWith("exec--"))return a=a.split("exec--")[1],e.compiler.evalFunctionsMap[a](r);if(a.startsWith("show--")){var i="";return a=a.split("show--")[1],i=e.compiler.evalFunctionsMap[a](r)?"":"none"}var i=r.data[a];return"undefined"==typeof i?"":i});var i=document.createElement("div");i.innerHTML=a;var n=i.firstChild;return n},markPreprocessElements:function(e){var t={_apn:!1,_rpn:!1};if(e&&e.getAttribute){for(var r=e.attributes,a=0;a<r.length;a++){var i=r[a];i&&i.name&&i.name.startsWith("mt-attr-")?(e.setAttribute("_apn","1"),t._apn=!0):"mt-computed"===i.name?(e.setAttribute("_apn","1"),t._apn=!0):"mt-style"===i.name?(e.setAttribute("_apn","1"),t._apn=!0):"mt-id"===i.name?(e.setAttribute("_apn","1"),t._apn=!0):"mt-src"===i.name?(e.setAttribute("_apn","1"),t._apn=!0):"mt-href"===i.name?(e.setAttribute("_apn","1"),t._apn=!0):("mt-show"===i.name||"mt-render-if"===i.name)&&(e.setAttribute("_rpn","1"),t._rpn=!0)}for(var a in e.childNodes){var n=e.childNodes[a];if(n&&1===n.nodeType){var o=this.markPreprocessElements(n);o._apn&&(e.setAttribute("_apn","1"),t._apn=!0),o._rpn&&(e.setAttribute("_rpn","1"),t._rpn=!0)}}}return t},preprocessHtmlString:function(e){return e},replaceMTAttributes:function(e){if(e&&e.getAttribute){for(var t=e.attributes,r=0;r<t.length;r++){var a=t[r],i="";if(a&&a.name&&a.name.startsWith("mt-attr-")){var n=a.name.split("mt-attr-")[1],o=e.getAttribute(a.name),s="{{exec--"+o+"}}";e.setAttribute(n,s)}else if("mt-computed"===a.name)i=a.value,e.innerHTML="{{exec--"+i+"}}";else if("mt-style"===a.name){var o=e.getAttribute(a.name),s="{{exec--"+o+"}}";e.setAttribute("style",s)}else if("mt-id"===a.name)i=a.value,e.innerHTML="{{"+i+"}}";else if("mt-src"===a.name){var o=e.getAttribute(a.name),s="{{"+o+"}}";e.setAttribute("src",s)}else if("mt-href"===a.name){var o=e.getAttribute(a.name),s="{{"+o+"}}";e.setAttribute("href",s)}else if("mt-addclass"===a.name){var o=e.getAttribute(a.name),s="{{exec--"+o+"}}",l=e.getAttribute("class");l&&""!==l?l+=" "+s:l=s,e.setAttribute("class",l)}else if("mt-show"===a.name||"mt-render-if"===a.name){var o=e.getAttribute(a.name),s="{{show--"+o+"}}",d=e.getAttribute("style");d&&""!==d?d+=";display:"+s:d="display:"+s,e.setAttribute("style",d)}}for(var r in e.childNodes){var c=e.childNodes[r];c&&1===c.nodeType&&this.replaceMTAttributes(c)}}return e},preprocessElement:function(e){var t=e.cloneNode(!0);t.style.display="",t=this.replaceMTAttributes(t);var r=t.outerHTML;return r=this.preprocessHtmlString(r)}})}(window.MMT=window.MMT||{}),function(e){function t(e){return e.hasAttribute("mt-class")||e.hasAttribute("mt-compile-class")}function r(e){return e.hasAttribute("mt-compile-class")?e.getAttribute("mt-compile-class"):e.getAttribute("mt-class")}e.compiler=e.compiler||{},e.compiler.nodesMTClassNamesMap={},e.compiler.nodesGenClassNamesMap={},e.compiler.evalFunctionsMap={},e.compiler.functionIndex=0,e.compiler.reinit=function(){e.compiler.nodesMTClassNamesMap={},e.compiler.nodesGenClassNamesMap={},e.compiler.functionIndex=0},e.compiler.transformEvals=function(t){if(t&&t.getAttribute){for(var r=t.attributes,a=0;a<r.length;a++){var i=r[a];if(i&&i.name&&("mt-render-if"===i.name||"mt-show"===i.name||"mt-style"===i.name||"mt-computed"===i.name||i.name.startsWith("mt-attr-")||"mt-addclass"===i.name&&!t.getAttribute(i.name).startsWith("{"))){var n=t.getAttribute(i.name),o=(e.compiler.functionIndex++).toString();e.compiler.evalFunctionsMap[o]=new Function("viewModel","return "+n),t.setAttribute(i.name,o)}}for(var a in t.childNodes){var s=t.childNodes[a];s&&1===s.nodeType&&this.transformEvals(s)}}return t},e.compiler.compile=function(a){if(a&&a.hasAttribute)try{var i=t(a);if(i){var n=r(a);e.compiler.addInMTClassNameMap(n,a);var o=a.getAttribute("mt-view");if("scroll_view"===o){var s=a.querySelectorAll('[mt-class="'+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER+'"]');if(s&&s.length>0){var l=s[0],d=n+"---"+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,c=l.cloneNode(!0);e.ListNodeProcessor.registerElement(c,n),l.setAttribute("mt-compile-class",d),e.compiler.addInMTClassNameMap(d,c),e.compiler.compile(l),a.removeChild(l)}}else if("list_view"===o){var s=a.querySelectorAll('[mt-class="'+MMT_CONSTANTS.LIST_VIEW_WRAPPER+'"]');if(s&&s.length>0){var p=s[0],d=n+"---"+MMT_CONSTANTS.LIST_VIEW_WRAPPER;p.setAttribute("mt-compile-class",d);var u=p.cloneNode(!0);e.ListNodeProcessor.registerElement(u,n),e.compiler.addInMTClassNameMap(d,u),e.compiler.compile(p),a.removeChild(p)}}}var h=a.childNodes;if(h)for(var f=0;f<h.length;f++)e.compiler.compile(h[f])}catch(m){e.log.error(m.message)}},e.compiler.addInMTClassNameMap=function(t,r){t!==MMT_CONSTANTS.SCROLL_VIEW_WRAPPER&&t!==MMT_CONSTANTS.LIST_VIEW_WRAPPER&&(e.compiler.nodesMTClassNamesMap[t]=r)},e.compiler.addInGenClassNameMap=function(t,r){e.compiler.nodesGenClassNamesMap[t]=r},e.compiler.getTemplateNodeWithGenClass=function(t){return e.compiler.nodesGenClassNamesMap[t]},e.compiler.getTemplateNodeWithMTClass=function(t){if(e.compiler.nodesMTClassNamesMap.hasOwnProperty(t))return e.compiler.nodesMTClassNamesMap[t];throw new MTClassNotInTemplateException(t+" doesn't exist")},e.compiler.getTemplateNodeForScrollViewItem=function(t){var r=t.split("---"),a=r[0];if(r.length>1)for(var i=0;i<r.length;i++)a=a+"---"+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER;return e.compiler.getTemplateNodeWithMTClass(a+"---"+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER)},e.compiler.getTemplateNodeForListViewItem=function(t){var r=t.split("---"),a=r[0];if(r.length>1)for(var i=0;i<r.length-1;i++)a=a+"---"+MMT_CONSTANTS.LIST_VIEW_WRAPPER;return e.compiler.getTemplateNodeWithMTClass(a+"---"+MMT_CONSTANTS.LIST_VIEW_WRAPPER)}}(window.MMT=window.MMT||{}),function(e,t,r){function a(){try{var t=n in i&&i[n];return e.log.info("Local Storage Supported :: "+t),t}catch(r){return!1}}e.cache=e.cache||{};var i="undefined"!=typeof i?i:this,n=(i.document,"localStorage"),o="sessionStorage";if(e.cache.disabled=!1,e.cache.set=function(e,t){},e.cache.get=function(e,t){},e.cache.has=function(t){return e.cache.get(t)!==r},e.cache.remove=function(e){},e.cache.clear=function(){},e.cache.getAll=function(){var t={};return e.cache.forEach(function(e,r){t[e]=r}),t},e.cache.forEach=function(){},e.cache.serialize=function(e){return JSON.stringify(e)},e.cache.deserialize=function(e){if("string"!=typeof e)return r;try{return JSON.parse(e)}catch(t){return e||r}},a()){var s=i[n];e.cache.set=function(t,a){return a===r?e.cache.remove(t):(s.setItem(t,e.cache.serialize(a)),a)},e.cache.get=function(t,a){var i=e.cache.deserialize(s.getItem(t));return i===r?a:i},e.cache.remove=function(e){s.removeItem(e)},e.cache.clear=function(){s.clear()},e.cache.forEach=function(t){for(var r=0;r<s.length;r++){var a=s.key(r);t(a,e.cache.get(a))}}}e.cache.session=function(){var t={};if(o in i&&i[o]){var a=i[o];t.remove=function(e){a.removeItem(e)},t.set=function(i,n){return n===r?t.remove(i):(a.setItem(i,e.cache.serialize(n)),n)},t.get=function(t,i){var n=e.cache.deserialize(a.getItem(t));return n===r?i:n},t.clear=function(){a.clear()},t.forEach=function(e){for(var r=0;r<a.length;r++){var i=a.key(r);e(i,t.get(i))}}}return t}();try{var l="__mmtcache__";e.cache.set(l,l),e.cache.get(l)!=l&&(e.cache.disabled=!0),e.cache.remove(l)}catch(d){e.log.error("Cache Availability Test :: "+d.message),e.cache.disabled=!0}return e.cache.enabled=!e.cache.disabled,e.cache}(window.MMT=window.MMT||{},window.config=window.config||{}),function(e){function t(t){if(t){var r=e.templateCache.get(t);if(r)return;e.ajaxCall.get(t,0,null,null).success(function(r){e.templateCache.put(t,r)}).error(function(r){e.log.error("Error while prefetching template for URL:: "+t+" :: Error :: "+r)})}}e.templateCache=e.templateCache||{};var r={};return e.templateCache.put=function(e,t){r[e]=t},e.templateCache.get=function(e){return r[e]},e.templateCache.prefetch=function(e){for(var r in e)e.hasOwnProperty(r)&&t(e[r].url)},e.templateCache.prefetchDetails=function(){for(var t in r)e.log.debug(t)},e.templateCache}(window.MMT=window.MMT||{}),function(e){e.Promise=function(e){this.jqPromise=e,this.successCallbacks=[],this.failCallbacks=[];var t=this;return this.jqPromise.done(function(e,r,a){for(var i=0;i<t.successCallbacks.length;i++)t.successCallbacks[i].call(null,e,r,a);t.successCallbacks=[]}),this.jqPromise.fail(function(e,r,a){for(var i=0;i<t.failCallbacks.length;i++)t.failCallbacks[i].call(null,e,r,a);t.failCallbacks=[]}),this},e.Promise.prototype.success=function(e){return 4===this.jqPromise.readyState?this.jqPromise.done(function(t,r,a){e.call(null,t,r,a)}):this.successCallbacks.push(e),this},e.Promise.prototype.error=function(e){return 4===this.jqPromise.readyState?this.jqPromise.fail(function(t,r,a){e.call(null,t,r,a)}):this.failCallbacks.push(e),this},e.Promise.prototype.resetCallbacks=function(){this.successCallbacks=[],this.failCallbacks=[]}}(window.MMT=window.MMT||{}),function(e){"use strict";var t=t||{};e.ajaxCall={};var r="timestamp",a="timeToLive",i="promise";e.ajaxCall=function(){var n={removeExpiredCache:function(){setTimeout(function(){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];if(i){var n=((new Date).getTime()-i[r])/1e3;n>=i[a]&&(MMT.log.info("Expired cached keys :: "+e),delete t[e])}}},0)},ajax:function(n,o,s,l,d){try{if(l){o+="?";var c=0;for(var p in l)l.hasOwnProperty(p)&&(c++&&(o+="&"),o+=encodeURIComponentIfNeeded(p)+"="+encodeURIComponentIfNeeded(l[p]))}var u="";"GET"===n?u=n+":"+o:(u=n+":"+o,d&&(u+=":"+JSON.stringify(d))),MMT.log.info("Ajax Key :: "+u);var h=t[u];if(h){var f=((new Date).getTime()-h[r])/1e3;if(MMT.log.info("Time Stamp Difference in Seconds :: "+f),!(f>=s||4===h[i].jqPromise.readyState&&200!==h[i].jqPromise.status))return h[i];delete h[i]}}catch(m){return void MMT.log.error("Failed during AJAX Call :: "+m.message)}var v;v="GET"===n?$.ajax({method:n,url:o,async:!0}):$.ajax({method:n,url:o,async:!0,contentType:"application/json; charset=utf-8",data:d});var g=new e.Promise(v);return 0!==s&&(h={},h[i]=g,h[r]=(new Date).getTime(),h[a]=s,t[u]=h),this.removeExpiredCache(),g},removeCache:function(e,r,a,i,n){try{if(i){r+="?";var o=0;for(var s in i)i.hasOwnProperty(s)&&(o++&&(r+="&"),r+=encodeURIComponent(s)+"="+encodeURIComponent(args[s]))}var l="";"GET"===e?l=e+":"+r:(l=e+":"+r,n&&(l+=":"+JSON.stringify(n))),MMT.log.info("Ajax Key :: "+l);var d=t[l];if(d)return delete t[l],!0}catch(c){MMT.log.error("Failed during Remove Promise Call :: "+c.message)}return!1},resetCallbacks:function(){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(n){var o=n[i];o.resetCallbacks();var s=((new Date).getTime()-n[r])/1e3;s>=n[a]&&(MMT.log.info("Expired cached keys :: "+e),delete t[e])}}}};return{get:function(e,t,r,a){return n.ajax("GET",e,t,r,a)},post:function(e,t,r,a){return n.ajax("POST",e,t,r,a)},put:function(e,t,r,a){return n.ajax("PUT",e,t,r,a)},"delete":function(e,t,r,a){return n.ajax("DELETE",e,t,r,a)},removeCache:function(e,t,r,a,i){return n.removeCache(e,t,r,a,i)},removeExpiredCache:function(){return n.removeExpiredCache()},resetCallbacks:function(){return n.resetCallbacks()}}}()}(window.MMT=window.MMT||{}),$(document).ready(function(){MMT.templateMap={"default":{url:"/pwa-hlp/flight-deals-section",screenUrl:"",interstitialUrl:"/pwa-hlp/flight-deals-section",pageComplete:function(){MMT.log.debug("home page is loaded");try{banner()}catch(e){MMT.log.error("error in home page"+e)}}},flights:{url:"/pwa-hlp/flight-deals-section",screenUrl:"flights",interstitialUrl:"/pwa-hlp/flight-deals-section",pageComplete:function(){MMT.log.debug("flight landing page is loaded");try{banner()}catch(e){MMT.log.error("error in flight landing"+e)}}},home:{url:"/pwa-hlp/flight-deals-section",screenUrl:"/",interstitialUrl:"/pwa-hlp/flight-deals-section",pageComplete:function(){MMT.log.debug("flight landing page is loaded");try{banner()}catch(e){MMT.log.error("error in flight landing"+e)}}},hotels:{url:"/pwa-hlp/hotel-deals-section",screenUrl:"hotels",interstitialUrl:"/pwa-hlp/hotel-deals-section",pageComplete:function(){MMT.log.debug("hotel landing page is loaded");try{banner()}catch(e){MMT.log.error("error in hotel landing"+e)}}},hotelsIntl:{url:"/pwa-hlp/hotel-deals-section",screenUrl:"hotels-international",interstitialUrl:"/pwa-hlp/hotel-deals-section",pageComplete:function(){MMT.log.debug("hotel landing page is loaded");try{banner()}catch(e){MMT.log.error("error in hotelintl landing"+e)}}},holidays:{url:"/pwa-hlp/holidays-deals-section",screenUrl:"holidays-india",interstitialUrl:"/pwa-hlp/holidays-deals-section",pageComplete:function(){MMT.log.debug("holidays-india landing page is loaded")}},cabs:{url:"/pwa-hlp/cabs-deals-section",screenUrl:"cabs",interstitialUrl:"/pwa-hlp/cabs-deals-section",pageComplete:function(){MMT.log.debug("cabs landing page is loaded");try{cabInit(),banner()}catch(e){MMT.log.error("error in cabs landing"+e)}}},bus:{url:"/pwa-hlp/bus-header-section",screenUrl:"bus-tickets",interstitialUrl:"/pwa-hlp/bus-header-section",pageComplete:function(){MMT.log.debug("bus landing page is loaded");try{}catch(e){MMT.log.error("error in bus landing"+e)}}},promo:{url:"/pwa-hlp/bus-header-section",screenUrl:"/new_hlp/promo_page",interstitialUrl:"/pwa-hlp/bus-header-section",pageComplete:function(){MMT.log.debug("promo page is loaded");try{}catch(e){MMT.log.error("error in promo page"+e)}}}},router=new Router(new TemplatesProvider(MMT.templateMap),new ViewRendererFactory,new EventBinderFactory);var e=extractUrlDetails();""==e.pathName||"/"==e.pathName?router.switchState(""):"hotels-international"==e.pathName?router.switchState("hotelsIntl"):"bus-tickets"==e.pathName?router.switchState("bus"):router.init(),MMT.log.debug(e)}),$(document).ready(function(e){void 0!==isCorporate&&isCorporate&&"false"!==isCorporate||hitCosmos&&"true"===hitCosmos&&getWalletCard()});var verifyOtp=function(){var e=WEBSITE_URL+"/pwa-hlp/wallet/validateOTP",t="";t+=$("#otpKey1").val(),t+=$("#otpKey2").val(),t+=$("#otpKey3").val(),t+=$("#otpKey4").val();var r=$.trim($("#mobile_number").val()),a=!0;if(""==t?($("#wrong_otp").text("Please Enter OTP.").show(),a=!1):/^\d{4}$/.test(t)||($("#wrong_otp").text("Wrong OTP entered. Please try again").show(),a=!1),a===!1)return!1;var i={mobileNumber:r,type:0,token:t,currentPage:"HOTEL",hitCosmos:hitCosmos,showWallet:showWallet};$("p.verify_btn").addClass("otp-loader"),$("#otp_vrifcation_failed").hide(),$("#wrong_otp").hide(),$.ajax({type:"POST",url:e,xhrFields:{withCredentials:!0},data:JSON.stringify(i),dataType:"json",contentType:"application/json",success:function(e){$("p.verify_btn").removeClass("otp-loader");try{if(e&&e.verifyOTPResponse)if(e.verifyOTPResponse.success&&e.verifyOTPResponse.data&&e.verifyOTPResponse.data.verified)if($(".new_user__otp").hide(),$(".hm_otp-overlay").find(".confirmd_vrifiction").fadeIn(),e.cosmosResponse&&e.cosmosResponse.cardData&&e.cosmosResponse.cardData&&e.cosmosResponse.cardData.walletReward&&e.cosmosResponse.cardData.walletReward.data){var t=e.cosmosResponse.cardData.walletReward.data;t.status&&"FAILURE"===t.status?(t.verificationText&&$("#credit_failed_message").html(t.verificationText),$("#wallet_money_credited").hide(),$("#wallet_section").hide()):t.status&&"ABOUT_TO_EXPIRE"===t.status?(t.verificationText&&$("#credit_failed_message").html(t.verificationText),$("#wallet_money_credited").hide(),e.cosmosResponse.cardData&&e.cosmosResponse.cardSequence&&hitCosmos&&"true"===hitCosmos&&showWallet&&"true"===showWallet?updateWalletCard(e.cosmosResponse,!0):$("#wallet_section").hide()):t.status&&"AMOUNT_CREDITED"===t.status?(t.verificationText&&$("#credit_message").html(t.verificationText),e.cosmosResponse.cardData&&e.cosmosResponse.cardSequence&&hitCosmos&&"true"===hitCosmos&&showWallet&&"true"===showWallet?updateWalletCard(e.cosmosResponse,!0):$("#wallet_section").hide(),$("#wallet_money_not_credited").hide(),updateWallet()):($("#wallet_money_credited").hide(),$("#wallet_section").hide())}else $("#wallet_money_credited").hide(),$("#wallet_section").hide();else e.verifyOTPResponse.message&&"SUCCESS"!==e.verifyOTPResponse.message?$("#otp_vrifcation_failed").text(e.verifyOTPResponse.message).show():$("#otp_vrifcation_failed").show();else $("#wrong_otp").show()}catch(r){$("#wrong_otp").show(),console.log(r)}},error:function(e,t,r){$("p.verify_btn").removeClass("otp-loader"),$("#wrong_otp").show(),console.log("verifyOtp hit failed, textStatus = "+t+", errorThrown = "+r)}})},sendOtp=function(){var e=WEBSITE_URL+"/pwa-hlp/wallet/sendOTP",t=$.trim($("#mobile_number").val());$.ajax({type:"POST",url:e,xhrFields:{withCredentials:!0},data:JSON.stringify({loginId:t}),dataType:"json",contentType:"application/json",success:function(e){$(".otp_btn").removeClass("otp-loader");try{e&&e.success?($(".new_user__verify").hide(),$("#wrong_otp").hide(),$("#otp_vrifcation_failed").hide(),$(".hm_otp-overlay").find(".new_user__otp").show()):e.message?$("#mob_verified_fail").text(e.message).show():$("#mob_verified_fail").show()}catch(t){$("#mob_verified_fail").show(),console.log(t)}},error:function(e,t,r){$("#resend_otp").show(),$(".otp_btn").removeClass("otp-loader"),console.log("cosmos hit failed, textStatus = "+t+", errorThrown = "+r)}})},getWalletCard=function(){var e=WEBSITE_URL+"/pwa-hlp/wallet/cosmos",t={currentPage:currentPage,hitCosmos:hitCosmos,showWallet:showWallet};$.ajax({type:"POST",url:e,data:JSON.stringify(t),dataType:"json",contentType:"application/json",success:function(e){try{e&&e.cardSequence&&e.cardData&&hitCosmos&&"true"===hitCosmos?showWallet&&"true"===showWallet?updateWalletCard(e,!1):e.userSegments&&walletRenderedOmnitureTracking(null,e.userSegments):(console.log("invalid response from cosmos, resultResponse = "+e),$("#wallet_section").hide())}catch(t){console.log(t)}},error:function(e,t,r){$("#wallet_section").hide(),console.log("cosmos hit failed, textStatus = "+t+", errorThrown = "+r)}})},updateWalletCard=function(e,t){if($("div#wallet_card").find(".wallet-book-now").hide(),e.cardSequence.data&&e.cardSequence.data.walletReward){var r="";if(r=!isLoggedIn||"true"!==isLoggedIn&&isLoggedIn!==!0?e.cardSequence.data.walletReward.loggedOutHeader+" "+e.cardSequence.data.walletReward.loggedOutSubHeader:e.cardSequence.data.walletReward.loggedInHeader+" "+e.cardSequence.data.walletReward.loggedInSubHeader,e.cardData.walletReward&&e.cardData.walletReward.data){var a=e.cardData.walletReward.data,i=e.userSegments;if(isLoggedIn&&("true"===isLoggedIn||isLoggedIn===!0)&&"ELIGIBLE_FOR_WALLET_REWARD_LOGIN"===a.status)return void $("#wallet_section").hide();$("div#wallet_card").find("p.hmp-wallet-expire-txt").html(a.homepageText),$("div#wallet_card").find("p.hmp-wallet-info-txt").html(r),"AMOUNT_CREDITED"===a.status?($("div#wallet_card").off("click"),$("div#wallet_card").removeClass("wallet-cta__login"),$("div#wallet_card").removeClass("handCursor"),$("div#wallet_card").find("a").hide(),$("div#wallet_card").find(".wallet-book-now").show(),addWallet(a,i)):"ELIGIBLE_FOR_WALLET_REWARD_LOGIN"===a.status?($("div#wallet_card").addClass("wallet-cta__login"),$("div#wallet_card").addClass("handCursor"),
$("div#wallet_card").find("a").text("LOGIN NOW"),bindLogin(),addWallet(a,i)):"ELIGIBLE_FOR_WALLET_REWARD_CLAIM"===a.status?($("div#wallet_card").off("click"),$("div#wallet_card").removeClass("wallet-cta__login"),$("div#wallet_card").addClass("handCursor"),$("div#wallet_card").addClass("showmodal"),$("div#wallet_card").attr("data-modal","verifeid_otp_modal"),$("div#wallet_card").find("a").text("CLAIM NOW"),$("div#wallet_card").on("click"),bindModal(),addWallet(a,i)):"FAILURE"===a.status?($("div#wallet_card").removeClass("wallet-cta__login"),$("div#wallet_card").removeClass("handCursor"),$("#wallet_section").hide(),!t&&loginDone&&a.homepageText&&$("div#wallet_card").hasClass("walletClicked")&&($("#wallet_failed_message").text(a.homepageText),$("#failed_wallet_modal").show())):"ABOUT_TO_EXPIRE"===a.status?($("div#wallet_card").off("click"),$("div#wallet_card").removeClass("wallet-cta__login"),$("div#wallet_card").removeClass("handCursor"),$("div#wallet_card").find("a").hide(),$("div#wallet_card").find(".wallet-book-now").show(),addWallet(a,i),!t&&a.verificationText&&loginDone&&$("div#wallet_card").hasClass("walletClicked")&&($("#wallet_failed_message").text(a.verificationText),$("#failed_wallet_modal").show())):($("div#wallet_card").removeClass("wallet-cta__login"),$("div#wallet_card").removeClass("handCursor"),console.log("status : "+a.status),$("#wallet_section").hide())}else $("div#wallet_card").removeClass("wallet-cta__login"),$("#wallet_section").hide()}else $("div#wallet_card").removeClass("wallet-cta__login"),$("#wallet_section").hide()},walletRenderedOmnitureTracking=function(e,t){e&&e.omnitureKey&&window.s&&null!=e?(s.linkTrackVars="channel,eVar90,prop54",walletOmnitureKey=e.omnitureKey,s.prop54=walletOmnitureKey+"_rendered",void 0===t&&(t="NA"),s.eVar90=t,s.tl(this,"o",walletOmnitureKey+"_rendered "+t)):t&&(s.linkTrackVars="channel,eVar90,prop54",s.eVar90=t,s.tl(this,"o",t))},addWallet=function(e,t){setTimeout(function(){$(".hmp-wallet-section").addClass("hmp-wallet-section__height")},1e3),setTimeout(function(){$(".hmp-wallet-section__height").find(".hmp-wallet-info").css("display","block"),$(".hmp-wallet-section__height").addClass("animated bounceIn")},1500),walletRenderedOmnitureTracking(e,t)};$(".new_user__verify-input input").on("keyup",function(e){var t=$(this);t.val().length==t.attr("maxlength")&&t.next().focus(),8===e.keyCode&&(t.prev().focus(),$("#wrong_otp").hide(),$("#otp_vrifcation_failed").hide())}),$(".new_user__sendotp-input input").keyup(function(){$(this).val()>0?$(".otp_btn").removeClass("dissable_state"):($(".otp_btn").addClass("dissable_state"),$("#mob_verified_fail").hide())}),$(".otp_btn a").click(function(){var e=$(this);e.parents(".otp_btn").addClass("otp-loader"),sendOtp()}),$(".vrfy-call").click(function(){var e=$(this);e.parents(".new_user__otp").hide(),e.parents(".hm_otp-overlay").find(".vrfy-by-call").fadeIn()}),$(".skip-vrification").click(function(){var e=$(this);e.parents(".new_user__verify").hide(),e.parents(".hm_otp-overlay").find(".skip_vrifiction").fadeIn()}),$(".verify_btn a").click(function(){$(this);verifyOtp()}),$("div#wallet_card").click(function(){walletOmnitureKey&&window.s&&($(this).hasClass("handCursor")&&$(this).addClass("walletClicked"),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54=walletOmnitureKey+"_clicked",s.tl(this,"o",walletOmnitureKey+"_clicked"))}),$("#resend_otp").click(function(){$(this);$("#otp_sent_message").text("Resend OTP to your mobile number please enter the code below"),$("#wrong_otp").hide(),$("#otp_vrifcation_failed").hide(),$("#otpKey1").val(""),$("#otpKey2").val(""),$("#otpKey3").val(""),$("#otpKey4").val(""),$("#resend_otp").hide(),setTimeout(function(){$("#resend_otp").show()},15e3),sendOtp()}),$("#confirmd_vrifiction_book_now").click(function(){closeModal($(this))}),$("#confirmd_vrifiction_got_it").click(function(){closeModal($(this))}),$("#failed_wallet_got_it").click(function(){closeModal($(this))});var bindModal=function(){$("div#wallet_card").click(function(){walletOmnitureKey&&window.s&&(s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54=walletOmnitureKey+"_clicked",s.tl(this,"o",walletOmnitureKey+"_clicked"))}),$(".showmodal").on("click",function(){var e=$(this);showModal(e)})},closeModal=function(e){var t=e.parents(".hm_modal");$("body").removeClass("overflow"),$(".new_user__sendotp-input input").val(""),$("#mob_verified_fail").hide(),$(".otp_btn").removeClass("otp-loader"),$("p.verify_btn").removeClass("otp-loader"),$(".hm_otp-overlay").find(".new_user__otp").hide(),$(".new_user__verify").show(),$(".hm_otp-overlay").find(".confirmd_vrifiction").hide(),$("#wrong_otp").hide(),$("#otp_vrifcation_failed").hide(),$("#otpKey1").val(""),$("#otpKey2").val(""),$("#otpKey3").val(""),$("#otpKey4").val(""),t.hide()};$(".closs-modal").on("click",function(){closeModal($(this))});var email_id=email&&"NA"!=email?btoa(email):"NA",bindLogin=function(){$(".wallet-cta__login").on("click",function(e){$("#ch_login_icon").trigger("click"),e.stopPropagation()})},updateWallet=function(){MMT_HEADER&&"undefined"!=typeof MMT_HEADER?(MMT_HEADER.loadWallet(),MMT_HEADER.clearCache()):console.log("MMT_HEADER is invalid so unable to update wallet. MMT_HEADER  ")};$(window).load(function(){setTimeout(function(){$(".wallet_gif_icon").parents(".wallet-icon").addClass("wallet-icon-img")},4600)}),$("body").on("click","#userLoginSection .o-i-cross-dark.ch-accout-cross",function(){$("div#wallet_card").removeClass("walletClicked")}),$(".cfoot__collapse").click(function(){$(this).children("i").toggleClass("hidden"),$(this).next().slideToggle()});var fromFilterCache={},deals={city:{},offset:parseInt(dealsPerLoad),destSet:[],monthSet:[],lobSet:[],resetFilterFlag:!1,loadMoreClick:0,dealCount:0,intialization:function(){void 0!=$.cookie("dest")&&""!=$.cookie("dest")?this.destSet=$.cookie("dest").split(","):this.destSet=[],void 0!=$.cookie("month")&&""!=$.cookie("month")?this.monthSet=$.cookie("month").split(","):this.monthSet=[],void 0!=$.cookie("lob")&&""!=$.cookie("lob")&&null!=$.cookie("lob")?(!isLobCookieModified()&&lobFilterCookie&&$.cookie("lob",lobFilterCookie),this.lobSet=$.cookie("lob").split(",")):(lobFilterCookie?$.cookie("lob",lobFilterCookie):$.cookie("lob","Flight,Hotel"),this.lobSet=$.cookie("lob").split(",")),void 0!=$.cookie("city")&&""!=$.cookie("city")?(this.city=$.cookie("city"),$("#city_change").val(this.city),setDealCount()):setDefaultCity(),this.resetFilterFlag=!1,this.loadMoreClick=0}};$(document).ready(function(){$.ajax({async:!0,global:!1,url:"/pwa-hlp/assets/js/miscellaneous/top_cities_flight.json",dataType:"json",success:function(e){for(var t=[],r=0;r<e.length;r++){var a={};a.label=e[r].city,a.iata="",a.category="Search Results",t.push(a)}fromFilterCache[""]=t}}),deals.intialization(),cityCheckDest(),defStateFilters(),$("#dealCardUL").children().length<parseInt(dealsPerLoad)&&$(".fd_loadmore").hide(),$.widget("custom.filterCatcomplete",$.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(e,t){var r=this,a="";$.each(t,function(t,i){var n;i.category!=a&&(e.append("<li class='ui-autocomplete-category'>"+i.category+"</li>"),a=i.category),n=r._renderItemData(e,i),i.category&&n.attr("aria-label",i.category+" : "+i.label)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){if("top cities"==t.category.toLowerCase()||"search result"==t.category.toLowerCase())if(t.city)var r=t.city+", "+t.country;else var r=t.label;else var r=t.label;return $("<li>").append('<div class="autoCompleteItem"><p><span class="autoCompleteItem__label">'+r+'</span><span class="autoCompleteItem__cntry">'+t.iata+'<span></p><p class="autoCompleteItem__desc"></span></div>').appendTo(e)}}),$("#js-input-dest-filter_0").filterCatcomplete({async:!0,delay:300,minLength:0,autoFocus:!0,source:function(e,t){getDestListData(e,t)},select:function(e,t){if("No deals available for this city"!=t.item.category){$(this).val(t.item.label);var r=!1,a=$("#destFilters").find("li");updateCookie("dest","add",t.item.label,deals.destSet);for(var i=0;i<a.length;i++){if($(a[i]).text()===t.item.value&&!$(a[i]).hasClass("disable")){r=!0;break}if($(a[i]).text()===t.item.value){r=!0,$(a[i]).removeClass("disable");break}}if(!r){for(var i=a.length;i>=0;i--)$(a[i+1]).text($(a[i]).text()),$(a[i]).hasClass("disable")||($(a[i+1]).removeClass("disable"),$(a[i]).addClass("disable"));$(a[0]).removeClass("disable"),$(a[0]).text(t.item.label)}onClickFilters(deals.destSet,$(".dest_tags")),$(".cardLiClass").remove(),deals.offset=0,$("#js-dt__tags_more").click(),getFilteredData($(this)),$(this).val("")}return!1}}).filterCatcomplete("widget").addClass("hp-bestFare--interested"),$("#city_change").filterCatcomplete({async:!0,delay:300,minLength:0,autoFocus:!0,source:function(e,t){FromFiltercatcomplete(e,t)},select:function(e,t){return $("#city_change").val(t.item.value),$.cookie("city",t.item.value),deals.city=t.item.label,deals.offset=0,$(".cardLiClass").remove(),getFilteredData($(this)),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Filters_Origin_city_"+t.item.label,s.tl(this,"o","Best_Fares_Filters_Origin_city_"+t.item.label),$($("#destFilters").children()).length<1&&setDestinationsInTile(),!1}}).filterCatcomplete("widget").addClass("hp-bestFare--interested-fromCity"),0!=deals.destSet.length&&$("#js-dt__tags_more").addClass("disable"),createCards()}),$(window).load(function(){lazyLoad("load")}),$("body").on("click",".dt__tags",function(){0===deals.destSet.length&&$(this).hasClass("dest_tags")?(firstFilterClick("dest",$(this).text(),this),$("#js-dt__tags_more").addClass("disable"),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Filters_Destination_"+deals.destSet.toString(),s.tl(this,"o","Best_Fares_Filters_Destination_"+deals.destSet.toString())):0===deals.monthSet.length&&$(this).hasClass("month_tags")?(firstFilterClick("month",$(this).text(),this),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Filters_Month_"+deals.monthSet.toString(),s.tl(this,"o","Best_Fares_Filters_Month_"+deals.monthSet.toString())):$(this).hasClass("dest_tags")?(filterUpdate("dest_tags","dest",deals.destSet,this),checkIfAllTagsAreInactive(deals.destSet,$(".dest_tags")),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Filters_Destination_"+deals.destSet.toString(),s.tl(this,"o","Best_Fares_Filters_Destination_"+deals.destSet.toString())):$(this).hasClass("month_tags")?(filterUpdate("month_tags","month",deals.monthSet,this),checkIfAllTagsAreInactive(deals.monthSet,$(".month_tags")),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Filters_Month_"+deals.monthSet.toString(),s.tl(this,"o","Best_Fares_Filters_Month_"+deals.monthSet.toString())):$(this).hasClass("lob_tags")&&(filterUpdate("lob_tags","lob",deals.lobSet,this),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Filters_LOB_"+deals.lobSet.toString(),s.tl(this,"o","Best_Fares_Filters_LOB_"+deals.lobSet.toString())),deals.offset=0,$(".cardLiClass").remove(),getFilteredData($(this)),deals.resetFilterFlag=!1}),$(".crearAllLink").click(function(){$(this).parent().parent().children().find(".dt__tags").removeClass("disable")}),$(".list").click(function(e){$(e.target).hasClass("o-i-heart-red")&&animate__add__to__cart($(this),$(".hp-shortlist"))}),$(".dealAlert__wrapper").css("top",$(".hp-widget").outerHeight()+20);var data2=[{desc:"",label:"MUM",value:"Mangalore, India",category:""},{desc:"",label:"Mangalore",value:"Mangalore, India",category:""},{desc:"",label:"Mandarmoni",value:"Mandarmoni, India",category:""},{desc:"",label:"Manipal",value:"Manipal, India",category:""},{desc:"",label:"Manila",value:"Manila, Philippines",category:""},{desc:"",label:"Manali",value:"Manali, India",category:""},{desc:"",label:"Anders",value:"anders andersson",category:""},{desc:"",label:"Mandi",value:"Mandi, India ",category:""},{desc:"",label:"Delhi",value:"Delhi, India",category:""}];$("ul.fd_deals__tabs li").click(function(){var e=$(this).attr("data-tab");$("ul.fd_deals__tabs li").removeClass("current"),$(".fd_deals__content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")}),$(".fd_city__dropdown li").click(function(){var e=$(this).text();$("#city_change").val(e),$(".fd_city__list").hide()}),$(".fd_places_extra").click(function(){$(this).hide(),$(".fd_places li").css("display","inline")}),$(function(){$(window).scroll(sticky_relocate),sticky_relocate()}),$("a.fd_filter__option").click(function(e){$(".fd_filter__search , .fd_filter__left , .fd_categories__option").toggleClass("hide"),$(this).find("span.fd_arrow__icon").toggleClass("rotate");var t=$(this).find(".showhide_text");"Show Filters"===t.text()?t.text("Hide Filters"):t.text("Show Filters"),e.preventDefault()}),$("body").on("click","a.fd_hotel__img,.fd_hotel__details , .fd_hotel__price",function(e){$(this).parents(".fd_card__hotel").find("div.fd_price__info, .fd_price__all").slideToggle(200),$(this).parents(".fd_card__hotel").find(".fd_hotel__dealInfo a").toggleClass("dealOpen"),$(this).parents(".fd_card__hotel").find("p.fd_hotel__name").toggleClass("largename"),$(this).parents(".fd_card__hotel").find(".fd_greenArrow__icon ").toggleClass("rotate"),e.preventDefault(),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54","loading1"===$("#dealCardUL").children()[0].id?(s.prop54="Live_Best_Fares_View_"+($(this).parent().parent("li").index()-2)+"_"+$(this).parent().parent().find("div.destCity").text()+"_"+$(this).parent().parent().find("div.lob").text(),s.tl(this,"o","Live_Best_Fares_View_"+($(this).parent().parent("li").index()-2)+"_"+$(this).parent().parent().find("div.destCity").text()+"_"+$(this).parent().parent().find("div.lob").text())):(s.prop54="Live_Best_Fares_View_"+($(this).parent().parent("li").index()+1)+"_"+$(this).parent().parent().find("div.destCity").text()+"_"+$(this).parent().parent().find("div.lob").text(),s.tl(this,"o","Live_Best_Fares_View_"+($(this).parent().parent("li").index()+1)+"_"+$(this).parent().parent().find("div.destCity").text()+"_"+$(this).parent().parent().find("div.lob").text()))}),$(".fd_hotel__shortlist a").click(function(e){var t=$(this),r=t.parent(".fd_hotel__shortlist"),a=r.find(".fd_shortlist__text");r.toggleClass("shortlist"),1==r.hasClass("shortlist")&&"Removed"!=a.text()?a.text("Shortlisted"):0==r.hasClass("shortlist")&&"Removed"!=a.text()?a.text("Removed"):t.parents(".fd_card__hotel").parent("li").remove(),e.preventDefault()}),$("body").on("focus","#city_change",function(){$(this).select(),$(this).filterCatcomplete("search","")}),$("body").on("click","#city_change",function(){$(this).focus(),$(".hp-bestFare--interested-fromCity").children()[0].focus()}),$("body").on("focus","#js-input-dest-filter_0",function(){$(this).select(),$(this).filterCatcomplete("search","")}),$("body").on("click","#js-input-dest-filter_0",function(){$(this).focus()}),$("body").on("click",".reset_filter",function(){for(var e=$(".dt__tags"),t=0;t<e.length;t++)$(e[t]).removeClass("disable");$.removeCookie("dest"),deals.destSet=[],$.removeCookie("month"),deals.monthSet=[],deals.lobSet=[],deals.lobSet.push("Flight"),deals.lobSet.push("Hotel"),$.cookie("lob",deals.lobSet),updateLobModified(),deals.offset=0,deals.resetFilterFlag=!0,$(".cardLiClass").remove(),getFilteredData($(this)),$("#js-dt__tags_more").removeClass("disable")}),$("body").on("click","#load_more",function(){if($(".fd_loadmore").hide(),"loading1"==$($("#dealCardUL").children()[0]).id){var e=$("#loading1"),t=$("#loading2"),r=$("#loading3");$("#dealCardUL").append(e),$("#dealCardUL").append(t),$("#dealCardUL").append(r);for(var a=($("#dealCardUL").length,0);a<3;a++)$($("#dealCardUL").children()[a]).remove()}getFilteredData($(this)),deals.loadMoreClick=deals.loadMoreClick+1,s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Live_Best_Fares_Load_More_"+deals.loadMoreClick,s.tl(this,"o","Live_Best_Fares_Load_More_"+deals.loadMoreClick)}),$("body").on("click",".cardLi",function(){window.open($(this).children().first().text(),"_blank"),s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Live_Best_Fares_Book_now_"+($(this).index()+1)+"_"+$(this).parent().parent().parent().parent().parent().find("div.lob").text()+"_"+$(this).parent().parent().parent().parent().parent().find("div.destCity").text(),s.tl(this,"o","Live_Best_Fares_Book_now_"+($(this).index()+1)+"_"+$(this).parent().parent().parent().parent().parent().find("div.lob").text()+"_"+$(this).parent().parent().parent().parent().parent().find("div.destCity").text())}),$("body").on("click","#deals_live_deals",function(){omniture,s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Live_Tab_Click",s.tl(this,"o","Best_Fares_Live_Tab_Click")}),$("body").on("mouseover",".dest_tags",function(){mouseOverFilters($(".dest_tags"),deals.destSet,$(this))}),$("body").on("mouseover",".month_tags",function(){mouseOverFilters($(".month_tags"),deals.monthSet,$(this))}),$("body").on("mouseover",".lob_tags",function(){toggleFilter($(".lob_tags"),$(this))}),$("body").on("mouseout",".dest_tags",function(){for(var e=0;e<$(".dest_tags").length;e++)$(this).text()!=$($(".dest_tags")[e]).text()&&$($(".dest_tags")[e]).removeClass("disable");onClickFilters(deals.destSet,$(".dest_tags")),0==deals.destSet.length?$("#js-dt__tags_more").removeClass("disable"):$("#js-dt__tags_more").addClass("disable")}),$("body").on("mouseout",".month_tags",function(){for(var e=0;e<$(".month_tags").length;e++)$(this).text()!=$($(".month_tags")[e]).text()&&$($(".month_tags")[e]).removeClass("disable");onClickFilters(deals.monthSet,$(".month_tags"))}),$("body").on("mouseout",".lob_tags",function(){for(var e=0;e<$(".lob_tags").length;e++)$(this).text()===$($(".lob_tags")[e]).text()&&$($(".lob_tags")[e]).addClass("disable");onClickFilters(deals.lobSet,$(".lob_tags"))}),$("body").on("click",".cardLiClass",function(){alignCards()}),$(document).ready(function(){setTimeout(function(){$(".discovery_tag").fadeIn("9000")},parseInt(bounceTime))}),$("body").on("click",".bounce",function(){s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54",s.prop54="Best_Fares_Discover_pop_up_click",s.tl(this,"o","Best_Fares_Discover_pop_up_click")}),$("body").on("click",".showhide_text",function(){s.linkTrackVars="channel,eVar1,eVar15,eVar24,eVar34,prop24,prop54","Show Filters"==$(".showhide_text").text()?(s.prop54="Best_Fares_Discover_hide_filters",s.tl(this,"o","Best_Fares_Discover_hide_filters")):"Hide Filters"==$(".showhide_text").text()&&(s.prop54="Best_Fares_Discover_show_filters",s.tl(this,"o","Best_Fares_Discover_show_filters"))});try{if(mouseRecorder){var _mfq=_mfq||[];!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//cdn.mouseflow.com/projects/0b1804d6-809f-4800-8849-ca9143e64e1f.js",document.getElementsByTagName("head")[0].appendChild(e)}()}}catch(e){}"true"==mmtBlackFlag?($(document).ready(function(){$("body").addClass("overflow")}),$("body").on("click",".cross-icon",function(){$(".dblblack_overlays , .hm_modal").hide(),$("body").removeClass("overflow")}),$(document).on("keydown","body",function(e){27==e.keyCode&&$(".cross-icon").click()}),$(document).mouseup(function(e){var t=$(".dblblack_overlay_txt");t.is(e.target)||0!==t.has(e.target).length||$(".cross-icon").click()})):$("body").removeClass("overflow"),$("body").on("click","#dblBlckButton",function(){s.prop54="DoubleBlackEnrollClicked",s.tl()});
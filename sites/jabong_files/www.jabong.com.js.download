/* Copyright 2011-2018 HeatMap Inc. - All rights reserved */
window.heatmap_ext = window.heatmap_ext || {};

if (!heatmap_ext.getCurrentURL) heatmap_ext.getCurrentURL = function() {
	var url = heatmap_ext.cleanupURL(window.location.href);
	try {
		var p = heatmap_ext.getPlugin();
		if (p) url += '#'+p[0].name.toLowerCase().replace(/[^a-z]/g,'');
	} catch(e) {}
	return url;
};

if (!heatmap_ext.getPlugin) heatmap_ext.getPlugin = function() {
	var i = window,
		b = document.body,
		e = document.documentElement,
		w = (i.innerWidth||e.clientWidth||b.clientWidth||0);
	var sizes = [
			{ max: 768, name: 'Mobile', icon: 'hmp-ico-mobile' },
			{ max: 1e10, name: 'Desktop', icon: 'hmp-ico-desktop' }
		];
	for (i=0, max=sizes.length; i<max; i++)
		if (w < sizes[i].max)
			return [ sizes[i] ];
};

if (!heatmap_ext.cleanupURL) heatmap_ext.cleanupURL = function(url) {
	// remove hash
	url = url.replace(/#.*$/gi,'');
	// remove any query param that do not affect the content of the page
	// url = url.replace(/((pos|source|promotion|utm_id|utm_utm_medium)=[^&]*[&]?)/gi,'');
	url = url.replace(/((&|\?)(pos|source|promotion|utm_id)=[^&]*[&]?)/gi,'$2');
	// remove trailing ?&#
	url = url.replace(/[?&#]$/g,'');
	// map all m. to www.
	url = url.replace(/^([a-z]*):\/\/m\.jabong\.com/i,'$1://www.jabong.com');
	return url;
};
heatmap.log.start(4310,"eu4",1524366344);

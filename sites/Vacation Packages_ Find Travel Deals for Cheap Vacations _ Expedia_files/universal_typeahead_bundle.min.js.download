/**
 * Universal Typeahead (uTA)
 * Version: 1.170
 * Commit: 0da317959260552549d5023f83db7e6dac2d8060
 * @preserve
 */
define("typeahead/buildInfo",[],function(){return{commit:"0da317959260552549d5023f83db7e6dac2d8060",version:"1.170"}}),define("typeahead/core/ABTest",["require","exports","jquery","uitk","typeahead/core/context","typeahead/core/Experiment","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/TypeaheadUtils"],function(i,e,o,t,n,a,r,s,l,u,c){"use strict";e.__esModule=!0;var p=function(){function e(e){void 0===e&&(e=null),this.persistentCookie=t.createBrowserStorage?t.createBrowserStorage("persistentCookies"):void 0,this.abovCookieValue=c.TypeaheadUtils.getCookie("abov"),this.abovMap=null!=e?e:c.TypeaheadUtils.getAbovMapFromCookie(this.abovCookieValue),this.abTestMap={},this.abTestIdNameMap={},this.loggedTests=[],this.controlLockedExpMap={}}return e.prototype.getAndLog=function(e){return e&&(e.id||e.name)?e.id&&this.hasAbovExp(e.id)?new a.Experiment(e.name,e.id,this.getAbovValue(e.id)):(e.id&&this.hasEvaluatedExp(e.id)?this.logExperimentAsynchronously(e.id):this.lockExperimentToControl(e),this.abTestMap[e.id]):(l.default.log(new Error("Experiment info was unavailable when calling 'getAndLog'"),s.Severity.MustFix,r.ProblemOrigin.UniversalTypeahead),new a.Experiment("",0,0))},e.prototype.override=function(e,t){this.abTestMap[e]?this.abTestMap[e].value=t:this.abTestMap[e]=new a.Experiment("",e,t)},e.prototype.getActiveClientTests=function(){for(var e="",t=0;t<this.loggedTests.length;t++)this.abTestMap[this.loggedTests[t]]&&this.abTestMap[this.loggedTests[t]].id&&(e+=this.abTestMap[this.loggedTests[t]].id+"."+this.abTestMap[this.loggedTests[t]].value+"|");return e?e.slice(0,-1):e},e.prototype.evaluateAllExperiments=function(e,t){0!==Object.keys(t).length?this.setExperimentBuckets(t):this.evaluateExperiments(this.getAllExperimentsAttribute(e.get(u.DefaultPluginAssembly.experimentIdentifier),"name"))},e.prototype.getAllExperimentsAttribute=function(e,t){var o=this,i=[],n=function(e){i.indexOf(e[t])<0&&(i.push(e[t]),o.populateIDNameMap(e))};return e&&e.length&&e.forEach(function(e){var t=e.getExperiments();t&&t.length&&t.forEach(n)}),i},e.prototype.populateIDNameMap=function(e){this.abTestIdNameMap[e.id]||(this.abTestIdNameMap[e.id]=e.name)},e.prototype.getCookieValue=function(){return this.abovCookieValue?this.abovCookieValue:void 0},e.prototype.setExperimentBuckets=function(e){var n=this,r=e||{};r&&Object.keys(r).length&&Object.keys(r).forEach(function(e,t){var o=Number(e),i=r[e]?r[e]:0;n.abTestMap[e]=new a.Experiment(n.abTestIdNameMap[e],o,i)})},e.prototype.lockExperimentToControl=function(e){var t=new a.Experiment(e.name,e.id,0);this.abTestMap[e.id]=t,this.controlLockedExpMap[e.id]=t,l.default.log(new Error("Locked experiment to control: "+e.id+" "+e.name),s.Severity.Negligible,r.ProblemOrigin.UniversalTypeahead)},e.prototype.hasEvaluatedExp=function(e){var t=String(e);return this.abTestMap.hasOwnProperty(t)&&void 0!==this.abTestMap[e].value},e.prototype.hasAbovExp=function(e){return void 0!==this.abovMap[e]},e.prototype.getAbovValue=function(e){return this.hasAbovExp(e)?this.abovMap[e]:0},e.prototype.hasControlLockedExp=function(e){var t=String(e);return this.controlLockedExpMap.hasOwnProperty(t)},e.prototype.logExperimentAsynchronously=function(e){var t=this;setTimeout(function(){t.logExperiment(e)})},e.prototype.logExperiment=function(t){var o=this,e=String(t);!this.hasControlLockedExp(t)&&this.loggedTests.indexOf(e)<0&&(this.loggedTests.push(e),i(["dctk/dctk"],function(e){e.evaluateExperimentAndLog(o.getDctkParams(t,!0,void 0))}))},e.prototype.evaluateExperiments=function(e){var t=this;e&&e.length&&o.ajax({contentType:"application/json; charset=UTF-8",data:JSON.stringify(this.getAbacusParams(e)),dataType:"json",type:"POST",url:"/api/bucketing/v1/evaluateExperiments"}).done(function(e){e&&e.evaluatedExperiments&&e.evaluatedExperiments.length&&e.evaluatedExperiments.forEach(function(e){t.abTestMap[e.name]=new a.Experiment(e.name,e.id,e.message?void 0:e.value)})}).fail(function(){l.default.log(new Error("Unable to call abacus api to evaluate experiments at page load"),s.Severity.Excusable,r.ProblemOrigin.UniversalTypeahead)})},e.prototype.getDctkParams=function(e,t,o){return{callback:o,eapid:c.TypeaheadUtils.getSiteParamValue(c.SiteParam.eapid),guid:c.TypeaheadUtils.getGuid(),logToOmniture:t,id:e,overrides:this.getCookieValue(),tpid:c.TypeaheadUtils.getSiteParamValue(c.SiteParam.tpid)}},e.prototype.getAbacusParams=function(e){return{eapid:c.TypeaheadUtils.getSiteParamValue(c.SiteParam.eapid),guid:c.TypeaheadUtils.getGuid(),name:e,overrides:this.getCookieValue(),tpid:c.TypeaheadUtils.getSiteParamValue(c.SiteParam.tpid),verbose:!0}},e}();e.ABTest=p}),define("typeahead/core/ConfigurableFeature",["require","exports","typeahead/core/plugins/ExecutionHelper"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.getFeatureOverrides=function(e){var t={},o=e.data("feature-overrides");if(o){var i=o.split("|");if(i)for(var n=0,r=i;n<r.length;n++){var a=r[n],s=a.indexOf(":");if(-1!==s){var l=a.substring(0,s),u=a.substring(s+1,a.length);t[l]=u}}}return t},e.prototype.shouldOverride=function(e){var t=this.getOverrideValue(e);if(!t)return!1;if(this.isOverrideToOn(t))return!0;if(this.isOverrideToOff(t))return!1;if(-1!==t.indexOf("=")){var o=t.split("=");if(2===o.length){var i=o[0],n=o[1];switch(i){case"@experiment":return this.checkExperiment(n)}}}return!1},e.prototype.isOverrideToOn=function(e){return"on"===e},e.prototype.isOverrideToOff=function(e){return"off"===e},e.prototype.checkExperiment=function(e){var t={id:0,name:e};return o.evaluateExperiment(t)},e.prototype.getOverrideValue=function(e){return e&&e.featureOverrides&&this.featureName&&e.featureOverrides[this.featureName]},e}();t.ConfigurableFeature=i});var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/DynamicDropdownSuggestion",["require","exports","typeahead/core/IListItem","typeahead/core/Suggestion"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=function(o){function e(e){var t=o.call(this,{category:"DynamicDropdownSuggestion",coordinates:void 0,index:"0",listItemType:i.ListItemType.Suggestion,regionNames:void 0,type:"DynamicDropdownSuggestion"})||this;return t.displayText=e,t}return __extends(e,o),e.prototype.getDisplayText=function(){return this.displayText},e.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},e}(o.Suggestion);t.DynamicDropdownSuggestion=n}),define("typeahead/core/EssDataProvider",["require","exports","jquery","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,s,o,i,n){"use strict";var r,a;t.__esModule=!0,(a=r=t.GoogleRequestType||(t.GoogleRequestType={}))[a.GOOGLE_AUTOCOMPLETE=0]="GOOGLE_AUTOCOMPLETE",a[a.ADDRESS_AUTOCOMPLETE=1]="ADDRESS_AUTOCOMPLETE";var l=function(){function a(){}return a.isReferralToGoogleMaps=function(e){return-1<[r[r.ADDRESS_AUTOCOMPLETE],r[r.GOOGLE_AUTOCOMPLETE]].indexOf(e)},a.prototype.fetchData=function(e){var t,o=e.requestGenerator,i=!!e.additionalDataSourceUrl,n=e.context,r=o.makeRequest(e.srchText,e,n);return e.overrideDataRequest&&"function"==typeof e.overrideDataRequest?e.overrideDataRequest(e.srchText).then(this.singleSourceResponseHandler):e.ignoreResults?r.then(s.noop):i?(t=o.makeRequest(e.srchText,s.extend(e,{isSecondary:!0}),n),s.when(t,r).then(this.dualSourceResponseHandler,this.dualSourceErrorResponseHandler)):r.then(this.singleSourceResponseHandler)},a.prototype.dualSourceResponseHandler=function(e,t){var o=[],i=e[0].q;e[0]&&e[0].sr&&(o=o.concat(e[0].sr)),t[0]&&t[0].sr?o=o.concat(t[0].sr):t[0]&&t[0].r&&(o=o.concat(t[0].r));var n=e[0].rc+"|"+t[0].rc,r=[e[0].activeABTests,t[0].activeABTests].filter(Boolean).join("|");return{isReferralToGoogleMaps:a.isReferralToGoogleMaps(n),query:i,responseCode:n,activeABTests:r,results:o||[]}},a.prototype.dualSourceErrorResponseHandler=function(){n.default.log(new Error("Dual HTTP request failure handler. Called with "+arguments.length+" inputs"),i.Severity.Excusable,o.ProblemOrigin.ExpediaSuggestService)},a.prototype.singleSourceResponseHandler=function(e){var t=e.sr?e.sr:e.r,o=e.q;return{activeABTests:e.activeABTests,isReferralToGoogleMaps:a.isReferralToGoogleMaps(e.rc),query:o,responseCode:e.rc,results:t||[]}},a}();t.EssDataProvider=l,t.overrideJQuery=function(e){s=e}});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/EssSuggestion",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSourceName=function(){return i.Optional.ofNullable(this.getEssId().isPresent()?this.getEssId().get().sourceName:void 0)},t.prototype.getSourceId=function(){return i.Optional.ofNullable(this.getEssId().isPresent()?this.getEssId().get().sourceId:void 0)},t.prototype.getCityId=function(){return i.Optional.ofNullable(this.data.cityId)},t.prototype.getRegionId=function(){return this.data.gaiaId?i.Optional.ofNullable(this.data.gaiaId):this.getCityId()},t.prototype.getTla=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.airportCode:void 0)},t.prototype.getAirportId=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.airportId:void 0)},t.prototype.getRelateTo=function(){return i.Optional.ofNullable(this.data.hierarchyInfo?this.data.hierarchyInfo.relateTo:void 0)},t.prototype.getSuggestionHierarchyType=function(){return i.Optional.of(this.data.hierarchyInfo&&"true"===this.data.hierarchyInfo.isChild?"child":"parent")},t.prototype.getRelationInfo=function(){return i.Optional.of(this.data.hierarchyInfo&&this.data.hierarchyInfo.relation&&0<this.data.hierarchyInfo.relation.length?this.data.hierarchyInfo.relation[0]:"-")},t.prototype.getHotelId=function(){return i.Optional.ofNullable(this.getEssId().isPresent()&&"LCM"===this.getEssId().get().sourceName?this.getEssId().get().sourceId:void 0)},t.prototype.getTypeId=function(){return i.Optional.of(this.data.essId&&this.data.essId.sourceId?this.data.essId.sourceId:"-")},t.prototype.getCity=function(){return i.Optional.ofNullable(this.data.hotelAddress?this.data.hotelAddress.city:void 0)},t.prototype.getMultiCity=function(){return i.Optional.of(this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.multicity:this.data.hierarchyInfo.multicity)},t.prototype.getSubType=function(){return i.Optional.ofNullable(this.data.subtype)},t.prototype.getStationCode=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.rails?this.data.hierarchyInfo.rails.stationCode:void 0)},t.prototype.getPointOfSupply=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.rails?this.data.hierarchyInfo.rails.pointOfSupply:void 0)},t.prototype.getCountryName=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.name:void 0)},t.prototype.getCountryIsoCode2=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.isoCode2:void 0)},t.prototype.getCountryIsoCode3=function(){return i.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.isoCode3:void 0)},t.prototype.getIsHeds=function(){return this.getEssId().isPresent()&&"TREX"===this.getEssId().get().sourceName?i.Optional.ofNullable("true"):i.Optional.empty()},t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},t.prototype.getExtraSearchParams=function(){var e=[];return[].push.apply(e,this.data.extraSearchParams),this.getHotelFilterParams()&&e.push(this.getHotelFilterParams()),this.getHotelId().isPresent()&&e.push({field:"searchPriorityOverride",value:"213"}),i.Optional.ofNullable(e.length?e:void 0)},t.prototype.getRedirectPath=function(){return i.Optional.ofNullable(this.data.regionMetadata?this.data.regionMetadata.redirect:void 0)},t.prototype.getConcepts=function(){return i.Optional.ofNullable(this.data.concepts?this.data.concepts:void 0)},t.prototype.getNext=function(){return i.Optional.ofNullable(this.data.next)},t.prototype.getHotelFilterParams=function(){var e=this.data.hierarchyInfo&&this.data.hierarchyInfo.hotels?this.data.hierarchyInfo.hotels.hotelFilterId:void 0;if(e){var t=e.replace("AM","");if(t)return{field:"amenities",value:t}}},t.prototype.getEssId=function(){return i.Optional.ofNullable(this.data.essId)},t}(o.Suggestion);t.EssSuggestion=n});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/ExpediaSuggestServiceRequestGenerator",["require","exports","jquery","typeahead/core/RequestGenerator"],function(e,t,h,o){"use strict";function s(e){return{CARS:["postal_code"],HOTELS:["contextual_ta","postal_code"],NONE:["unspecified_area"]}[e]}function y(e,t,o,i){return o=function(e,t){if(t.pairedinputid){var o=h("#"+t.pairedinputid);if(0<o.length){var i=o.attr("data-ta_element"),n=h("#"+i);if(0<n.length)try{var r=JSON.parse(n.val());e.originRegionId=r.regionId}catch(e){}else o.attr("data-id")&&(e.originRegionId=o.attr("data-id"));e.originSearchString=o.val()}}return e}(o=function(e,t,o){var i=[];t.features=t.features&&t.features.length&&t.features||[],"hotel"!==e.tab&&"flight"!==e.tab||(t.personalize=!0),"HOTELS"===e.lob?(i=s("HOTELS"),t.mask|=32):"CARS"===e.lob?i=s("CARS"):"NONE"===e.lob&&(i=s("NONE"));"Hotels.Search"===e.clientId&&(t.rid=o.searchRegionId);for(var n=0,r=i;n<r.length;n++){var a=r[n];t.features.indexOf(a)<0&&t.features.push(a)}return t}(t,o,i),i),0<e.length&&e.map(function(e){return e.modifyParameters(o,t,i)}),o}function f(e){var t=0;if(e&&0!==e.length){for(var o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;if(t<0)return-1*(t+1)}return t}t.__esModule=!0,t.hash=f;var i=function(r){function d(e,t,o,i,n){return r.call(this,e,t,o,i,n)||this}return __extends(d,r),d.prototype.makeRequest=function(e,t,o){var i,n;t.isSecondary?(n=e,i=[t.additionalDataSourceUrl,encodeURIComponent(n)].join("")):i=this.constructEssUrl(e);var r,a,s,l,u,c=((a={}).mask=(r=t).mask,a.ab=r.abtest,a.format=r.format,a.dest=r.dest,a.maxresults=r.maxresults,a.features=r.features||[],a.device=window.utag_data?window.utag_data.device_type:"Unavailable",a.browser=r.browser,a.rid=r.filter_region_id,a.personalize=r.personalize,a.packageType=r.packageType,a),p=h.extend({},t),g=y(this.requestParamModifiers,o,c,p);return t.makeRequestUtil&&t.makeRequestUtil.promiseCompleteUtil(g),h.ajax({cache:!0,data:(s=g,l=o,u={},u.client=l.clientId,u.siteid=l.siteid,u.guid=l.guid,u.lob=l.lob,u.locale=l.locale,u.expuserid=l.expuserid,u.regiontype=s.mask,u.ab=s.ab,u.dest=s.dest,u.maxresults=s.maxresults,u.features=s.features.join("|"),u.rid=s.rid,u.sortcriteria=s.sortcriteria,u.categories=s.categories,u.personalize=s.personalize,u.pt=s.packageType,u.originRegionId=s.originRegionId,u.originSearchString=s.originSearchString,u.next=s.next,u.format="jsonp",u.device=s.device,u.browser=s.browser,u),dataType:"jsonp",jsonpCallback:"cb_"+d.sessionId+"_"+f(e),type:"GET",url:i})},d.sessionId=Date.now(),d}(o.RequestGenerator);t.ExpediaSuggestServiceRequestGenerator=i,t.overrideJQuery=function(e){h=e}}),define("typeahead/core/Experiment",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(e,t,o){this.name=e,this.id=t,this.value=o};t.Experiment=o}),define("typeahead/core/FlightOriginSuggestion",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("typeahead/core/IListItem",["require","exports"],function(e,t){"use strict";var o,i;t.__esModule=!0,(i=o=t.ListItemType||(t.ListItemType={}))[i.Label=0]="Label",i[i.Suggestion=1]="Suggestion";var n=function(e){this.html=e,this.listItemType=o.Label};t.LabelTypeListItem=n}),define("typeahead/core/IOverrideParams",["require","exports"],function(e,t){"use strict";t.__esModule=!0});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/OnFocusSuggester",["require","exports","typeahead/core/SuggestionsAggregator"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getEssOnFocusPersonalizedSuggesterConfig=function(){return{isEnabled:!0,rank:2}},t.prototype.getCurrentLocationSuggesterConfig=function(){return{isEnabled:!0,rank:1}},t.prototype.getId=function(){return o.SuggesterId.OnFocusSuggester},t}(o.SuggestionsAggregator);t.OnFocusSuggester=i}),define("typeahead/core/RequestGenerator",["require","exports","jquery","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,o,r){"use strict";t.__esModule=!0;var i=function(){function e(e,t,o,i,n){this.requestParamModifiers=[],this.essAbacusIds=e,this.variantAssigner=t,this.suggestServiceUrlOptions=o,n&&(this.requestParamModifiers=n.get(r.DefaultPluginAssembly.requestParamModifierIdentifier))}return e.defaultVariantAssigner=function(e){void 0===e&&(e=void 0)},e.prototype.getVariantAssignment=function(e){if("function"==typeof this.variantAssigner){var t=this.variantAssigner(e);return void 0===t?void 0:"".concat(e,".",t)}},e.prototype.generateAbacusParameter=function(){var n=this,r=[];return o(this.essAbacusIds).each(function(e,t){var o,i=(o=t,"function"==typeof n.getVariantAssignment?n.getVariantAssignment(o):void 0);i&&r.push(i)}),0<r.length?r.join("|"):""},e.prototype.constructEssUrl=function(e){this.suggestServiceUrlOptions.suggestServiceUrl;return this.suggestServiceUrlOptions.overrideServiceUrl?[this.suggestServiceUrlOptions.overrideServiceUrl,encodeURIComponent(e)].join(""):[this.suggestServiceUrlOptions.serviceUrl,"/api/v4/typeahead/",encodeURIComponent(e),"?callback=?"].join("")},e.ESS_ABACUS_IDS=[],e}();t.RequestGenerator=i,t.overrideJQuery=function(e){o=e}}),define("typeahead/core/SearchParametersUpdater",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,a,s,l){"use strict";t.__esModule=!0;var r={airport_code_element:"getTla",category_element:"getCategory",city_element:"getCity",country_code_element:"getCountryIsoCode2",heds_element:"getIsHeds",hotel_id_element:"getHotelId",lat_long_element:"getLatLong",point_of_supply_element:"getPointOfSupply",region_id_element:"getRegionId",region_type_element:"getType",station_code_element:"getStationCode",ta_element:"getSuggestionData"};function u(e,t,o){var i=$("#"+t),n="";if(0<i.length){if(e)if("function"==typeof e[o]){var r=e[o]();r.isPresent()&&(n=r.get())}else l.default.log(new Error(o+" is not a method of Suggestion"),s.Severity.MustFix,a.ProblemOrigin.UniversalTypeahead);n!==i.val()&&(i.val(n),p(e,i))}}function c(e,t,o,i){var n=$("#"+o);t&&t.getSearchName().isPresent()?(n.val(t.getSearchName().get()),d(n),g(i,o)):(g(o,i),n.val("")),p(t,n)}function p(e,t){e&&!e.shouldTriggerDomElementChangeOnSelection()||t.trigger("change")}function g(e,t){var o=$("#"+e),i=$("#"+t);o.length&&i.length&&!i.attr("data-gcw-storeable-name")&&(i.attr("name",o.attr("name")),i.attr("data-gcw-storeable-name",o.attr("data-gcw-storeable-name")),i.data("gcw-storeable-name",o.data("gcw-storeable-name")),i.addClass("gcw-storeable"),d(o))}function d(e){e.removeAttr("name"),e.removeAttr("data-gcw-storeable-name"),e.removeData("gcw-storeable-name"),e.removeClass("gcw-storeable")}function h(e,t){var o,i,n;e&&e.getExtraSearchParams().isPresent()?(i=e.getExtraSearchParams().get(),n=t,i.forEach(function(e){var t=$("<input>",{type:"hidden",class:"uta-extra-search-param"}),o=e.field;t.attr("name",e.field),t.attr("value",e.value);var i=$("input[name*="+o+"]");0!==i.length?($(i).attr("value",e.value),$(i).addClass("uta-extra-search-param")):t.appendTo($("#"+n).parents("form:visible"))})):0<(o=$(".uta-extra-search-param")).length&&$(o).each(function(e,t){var o=!!$(t).attr("id");o?($(t).attr("value",""),$(t).removeClass("uta-extra-search-param")):$(t).remove()})}t.updateForSuggestion=function(e,t,o,i){for(var n in r)r.hasOwnProperty(n)&&u(t,o[n],r[n]);c(0,t,o.search_name_element,i),function(e){var t=$("input[id$=search_name][data-gcw-storeable-name=gcw-destination]");if(1===t.length&&e!==t.attr("id")){var o=t.parent().find("input[data-provide=utypeahead]");c(0,void 0,t.attr("id"),o.attr("id"))}}(o.search_name_element),h(t,i)}}),define("typeahead/core/StripingConfiguration",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.getExperiments=function(e){return e&&e.length?e.map(function(e){return e.experiment}).filter(function(e){return!!e}):[]}});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/SuggestServiceParamModifier",["require","exports","typeahead/core/ConfigurableFeature","typeahead/core/plugins/ExecutionHelper"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.modifyParameters=function(e,t,o){return this.precondition&&(this.shouldOverride(o)||i.shouldExecute(t,this.configuration))&&this.modify(e,t,o),e},t.prototype.addFeatureFlag=function(e,t){e.features=e.features&&e.features.length&&e.features.push&&e.features||[],e.features.indexOf(t)<0&&e.features.push(t)},t.prototype.addRegionType=function(e,t){e.mask|=t},t.prototype.precondition=function(e,t,o){return void 0!==e},t}(o.ConfigurableFeature);t.SuggestServiceParamModifier=n}),define("typeahead/core/Suggestion",["require","exports","typeahead/core/util/Optional"],function(e,t,o){"use strict";var i;t.__esModule=!0,(i=t.SuggestionCategory||(t.SuggestionCategory={}))[i.GEOLOCATION=0]="GEOLOCATION",i[i.USERHISTORY=1]="USERHISTORY",i[i.FLIGHTSBOOKING=2]="FLIGHTSBOOKING",i[i.GOOGLEMAPS=3]="GOOGLEMAPS";var n=function(){function e(e,t){void 0===t&&(t=!1),this.data=e,this.hasChild=t}return e.prototype.getSourceName=function(){return o.Optional.ofNullable(void 0)},e.prototype.getSourceId=function(){return o.Optional.ofNullable(void 0)},e.prototype.getRegionId=function(){return o.Optional.ofNullable(void 0)},e.prototype.getTla=function(){return o.Optional.ofNullable(void 0)},e.prototype.getAirportId=function(){return o.Optional.ofNullable(void 0)},e.prototype.getRelateTo=function(){return o.Optional.ofNullable(void 0)},e.prototype.getType=function(){return o.Optional.ofNullable(this.data.type)},e.prototype.getRegionNames=function(){return o.Optional.ofNullable(this.data.regionNames)},e.prototype.getFullName=function(){return o.Optional.ofNullable(this.getRegionNames().orElse({}).fullName)},e.prototype.getLastSearchName=function(){return o.Optional.ofNullable(this.getRegionNames().orElse({}).lastSearchName)},e.prototype.getDisplayName=function(){return o.Optional.ofNullable(this.getRegionNames().orElse({}).displayName)},e.prototype.getDisplayText=function(){return this.getLastSearchName().orElse(this.getDisplayName().orElse(""))},e.prototype.getIndex=function(){return parseInt(this.data.index,10)},e.prototype.getPosition=function(){return this.data.parentPosition?parseInt(this.data.parentPosition,10):this.getIndex()+1},e.prototype.getSuggestionHierarchyType=function(){return o.Optional.of("parent")},e.prototype.getHierarchyCode=function(){return("child"===this.getSuggestionHierarchyType().get()?"C":"parent"===this.getSuggestionHierarchyType().get()&&this.hasChild?"P":"D")+"L#"+(isNaN(this.getPosition())?"-":this.getPosition())},e.prototype.getRelationInfo=function(){return o.Optional.of("-")},e.prototype.getHotelId=function(){return o.Optional.ofNullable(void 0)},e.prototype.getLatLong=function(){return o.Optional.ofNullable(this.data.coordinates?this.data.coordinates.lat+","+this.data.coordinates.long:void 0)},e.prototype.getTypeId=function(){return o.Optional.of("-")},e.prototype.getCity=function(){return o.Optional.ofNullable(void 0)},e.prototype.getMultiCity=function(){return o.Optional.ofNullable(void 0)},e.prototype.getSubType=function(){return o.Optional.ofNullable(void 0)},e.prototype.getHasChild=function(){return o.Optional.of(this.hasChild)},e.prototype.getCategory=function(){return o.Optional.ofNullable(this.data.category)},e.prototype.getStationCode=function(){return o.Optional.ofNullable(void 0)},e.prototype.getPointOfSupply=function(){return o.Optional.ofNullable(void 0)},e.prototype.getCountryName=function(){return o.Optional.ofNullable(void 0)},e.prototype.getCountryIsoCode2=function(){return o.Optional.ofNullable(void 0)},e.prototype.getCountryIsoCode3=function(){return o.Optional.ofNullable(void 0)},e.prototype.getIsHeds=function(){return o.Optional.empty()},e.prototype.isAddrAutoComplete=function(){return!1},e.prototype.getExtraSearchParams=function(){return o.Optional.ofNullable(void 0)},e.prototype.getSearchName=function(){return"hotelfilter"===this.getRelationInfo().orElse("")?this.getFullName():o.Optional.ofNullable(void 0)},e.prototype.getRedirectPath=function(){return o.Optional.ofNullable(void 0)},e.prototype.getConcepts=function(){return o.Optional.ofNullable(void 0)},e.prototype.getNext=function(){return o.Optional.ofNullable(void 0)},e.prototype.getSuggestionData=function(){return o.Optional.of(JSON.stringify({airportCode:this.getTla().orElse(void 0),category:this.getCategory().orElse(void 0),city:this.getCity().orElse(void 0),concepts:this.getConcepts().orElse(void 0),coordinates:this.data.coordinates,countryCode:this.getCountryIsoCode2().orElse(void 0),extraSearchParams:this.getExtraSearchParams().orElse(void 0),fullName:this.getFullName().orElse(void 0),heds:this.getIsHeds().orElse(void 0),hotelId:this.getHotelId().orElse(void 0),pointOfSupply:this.getPointOfSupply().orElse(void 0),redirectPath:this.getRedirectPath().orElse(void 0),regionId:this.getRegionId().orElse(void 0),regionType:this.getType().orElse(void 0),stationCode:this.getStationCode().orElse(void 0)}))},e.prototype.getSearchedRegion=function(){return this.getRelateTo().orElse(this.getSourceId().orElse("-"))},e.prototype.getSelectedRegion=function(){return this.getRelateTo().orElse("")?this.getSourceId().orElse("-"):this.getAirportId().orElse("-")},e}();t.Suggestion=n}),define("typeahead/core/SuggestionFactory",["require","exports","typeahead/core/EssSuggestion","typeahead/core/geolocation/GeolocationSuggestion","typeahead/core/google/GoogleMapsSuggestion","typeahead/core/Suggestion"],function(e,t,o,i,n,r){"use strict";t.__esModule=!0,t.createSuggestion=function(e,t){return void 0===t&&(t=!1),r.SuggestionCategory[r.SuggestionCategory.GEOLOCATION]===e.category?new i.GeolocationSuggestion(e):r.SuggestionCategory[r.SuggestionCategory.GOOGLEMAPS]===e.category?new n.GoogleMapsSuggestion(e):new o.EssSuggestion(e,t)}});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/SuggestionModifier",["require","exports","typeahead/core/ConfigurableFeature","typeahead/core/plugins/ExecutionHelper"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.modifySuggestions=function(e,t,o){return this.precondition(e,t)&&(this.shouldOverride(o)||i.shouldExecute(t,this.configuration))&&this.modify(e,t),e},t.prototype.precondition=function(e,t){return e&&0<e.length},t}(o.ConfigurableFeature);t.SuggestionModifier=n}),define("typeahead/core/SuggestionsAggregator",["require","exports"],function(e,t){"use strict";var o,i;t.__esModule=!0,(i=o=t.SuggesterId||(t.SuggesterId={}))[i.CurrentLocationSuggester=0]="CurrentLocationSuggester",i[i.EssOnFocusPersonalizedSuggester=1]="EssOnFocusPersonalizedSuggester",i[i.OnFocusSuggester=2]="OnFocusSuggester";var n=function(){function t(e){var t;this.suggesters=e,this.suggesterConfig=((t={})[o.CurrentLocationSuggester]=this.getCurrentLocationSuggesterConfig(),t[o.EssOnFocusPersonalizedSuggester]=this.getEssOnFocusPersonalizedSuggesterConfig(),t),this.emptySuggesterResponse={id:this.getId(),results:[]}}return t.prototype.suggest=function(t,o){var i=$.Deferred(),n=this;if(this.suggesters&&this.suggesters.length){var e=this.suggesters.map(function(e){return e.suggest(t,o)});$.when.apply($,e).done(function(){var e=Array.prototype.slice.call(arguments);i.resolve(n.aggregate(e))})}else i.resolve(this.emptySuggesterResponse);return i.promise()},t.prototype.getSuggesterConfig=function(e){return this.suggesterConfig[e.id]?this.suggesterConfig[e.id]:{rank:t.LOWEST_RANK,isEnabled:!1}},t.prototype.aggregate=function(e){return e&&(e=this.filter(e),this.sort(e)),{id:this.getId(),results:this.getAggregatedSuggestionResults(e)}},t.prototype.filter=function(e){var t=this;return e?e.filter(function(e){return t.getSuggesterConfig(e).isEnabled}):e},t.prototype.sort=function(e){var o=this;e&&e.sort(function(e,t){return o.getSuggesterConfig(e).rank-o.getSuggesterConfig(t).rank})},t.prototype.getAggregatedSuggestionResults=function(e){var t=[];if(e){e.forEach(function(e){Array.prototype.push.apply(t,e.results)});for(var o=0;o<t.length;o++)t[o].index=o+""}return t},t.LOWEST_RANK=999,t}();t.SuggestionsAggregator=n});var __assign=this&&this.__assign||Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};define("typeahead/core/TypeaheadUtils",["require","exports","typeahead/core/loc","typeahead/core/context","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(r,t,e,i,a,s,l){"use strict";var n,o,u,c,p,g,d,h,y,f;t.__esModule=!0,(o=n=t.FlightType||(t.FlightType={}))[o.OneWay=0]="OneWay",o[o.RoundTrip=1]="RoundTrip",o[o.MultiDestination=2]="MultiDestination",o[o.Unknown=3]="Unknown",(c=u=t.Lob||(t.Lob={}))[c.Flight=0]="Flight",c[c.Hotel=1]="Hotel",c[c.Package=2]="Package",c[c.Car=3]="Car",c[c.Cruise=4]="Cruise",c[c.Activity=5]="Activity",c[c.Rail=6]="Rail",c[c.VacationRental=7]="VacationRental",c[c.OpenSearch=8]="OpenSearch",c[c.Unknown=9]="Unknown",(g=p=t.PackageType||(t.PackageType={}))[g.FlightHotel=0]="FlightHotel",g[g.FlightHotelCar=1]="FlightHotelCar",g[g.FlightCar=2]="FlightCar",g[g.HotelCar=3]="HotelCar",g[g.Unknown=4]="Unknown",(h=d=t.RailType||(t.RailType={}))[h.OneWay=0]="OneWay",h[h.RoundTrip=1]="RoundTrip",h[h.Unknown=2]="Unknown",(f=y=t.SiteParam||(t.SiteParam={}))[f.eapid=0]="eapid",f[f.tpid=1]="tpid",t.MercuryWizardLandingPagesPackageTypes=["packageFlightHotel","flightHotel","packageFlightHotelCar","flightHotelCar","carHotelFlight","packageFlightCar","flightCar","carFlight","packageHotelCar","hotelCar","carHotel"];var m=function(){function o(){}return o.getCookie=function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():""},o.getAbovMapFromCookie=function(e){var o={},i=function(e){return/^\d+$/.test(e)};"string"==typeof e&&e.split(":").forEach(function(e){var t=e.split("|");3===t.length&&0<t[0].length&&0<t[2].length&&i(t[0])&&i(t[2])&&(o[parseInt(t[0],10)]=parseInt(t[2],10))});return o},o.getGuid=function(){var t=window.dctk&&window.dctk.logging?window.dctk.logging.guid:void 0;if(void 0===t&&(t=window.utag_data?window.utag_data.guid:void 0),void 0===t)try{r(["gc/pageModel"],function(e){e&&e.user&&(t=e.user.guid)})}catch(e){}if(void 0===t){var e=this.getCookie("MC1"),o=e&&e.split("=");t=$.isArray(o)&&2===o.length?o[1]:""}return void 0===t?l.default.log(new Error("ERROR: Unable to get 'guid'"),s.Severity.MustFix,a.ProblemOrigin.ClientOfUniversalTypeahead):t=t.replace(/-/g,""),t},o.getSiteParamValue=function(e){var t=void 0,o=y[e];if(window.utag_data&&window.utag_data.context&&window.utag_data.context.site&&void 0!==window.utag_data.context.site[o])t=window.utag_data.context.site[o];else try{r(["gc/pageModel"],function(e){e&&e.site&&void 0!==e.site[o]&&(t=e.site[o])})}catch(e){}if(void 0===t){var i=this.getCookie({eapid:{cookieName:"iEAPID"},tpid:{cookieName:"tpid"}}[o].cookieName);if(void 0!==i){var n=i.split(",");t=parseInt(1<n.length?n[1]:n[0],10)}}return("number"!=typeof t||isNaN(t))&&l.default.log(new Error("Unable to get "+o+" from utag_data/cookies/gcPageModel"),s.Severity.Excusable,a.ProblemOrigin.ClientOfUniversalTypeahead),t},o.getPointOfSale=function(){return window.location.hostname},o.getLocale=function(){return i.locale},o.getSiteId=function(){return i.siteid+""},o.getPageId=function(){var e=$("#pageId").val();return e||(e=""),e},o.getDeviceType=function(){return o.deviceType||(o.deviceType=window.utag_data?window.utag_data.device_type:o.evaluateDeviceType()),o.deviceType},o.getBrowser=function(){var e=window.utag_data&&window.utag_data.context&&window.utag_data.context.clientInfo&&window.utag_data.context.clientInfo.deviceCharacteristics?window.utag_data.context.clientInfo.deviceCharacteristics.mobileBrowser:void 0;return e||(e=o.evaluateBrowserName()),e},o.getClientId=function(){var e=$("input[data-provide=utypeahead]").data("clientId");if(e||(e=$("meta[name=essClientId]").attr("content")),!e){var t=o.defaultPageIdGetter();t&&(e=o.clientIdByPageId[t])}return e||(e=o.clientIdByPath[window.location.pathname]),e||(l.default.log(new Error("Could not determine client id"),s.Severity.Excusable,a.ProblemOrigin.UniversalTypeahead),e=o.TEST_CLIENT_ID),e||"Unknown"},o.setClientId=function(e){o.TEST_CLIENT_ID=e},o.isStorefrontClient=function(){return-1<["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"].indexOf(o.getClientId())},o.getLob=function(){if("OpenSearchPage"===o.getClientId())return u.OpenSearch;var e=$("div.wizard-tabs").find("button.on").data("lob");if("string"==typeof(e=(e=e||$("input[data-provide=utypeahead]:visible").data("lob"))||o.LOB_ATTRIBUTE.TEST)){if(-1<(e=e.toLowerCase()).indexOf("pack")||-1<t.MercuryWizardLandingPagesPackageTypes.map(function(e){return e.toLowerCase()}).indexOf(e))return u.Package;if(-1<e.indexOf("flight"))return u.Flight;if(-1<e.indexOf("hotel"))return u.Hotel;if(-1<e.indexOf("vacationrental"))return u.VacationRental;if(-1<e.indexOf("car"))return u.Car;if(-1<e.indexOf("cru"))return u.Cruise;if(-1<e.indexOf("lx")||-1<e.indexOf("activit"))return u.Activity;if(-1<e.indexOf("train")||-1<e.indexOf("rail"))return u.Rail;if(-1<e.indexOf("open"))return u.OpenSearch}return u.Unknown},o.setLob=function(e){o.LOB_ATTRIBUTE.TEST=e},o.getFlightType=function(e){if(e===u.Flight){var t=$("input[name=route-type], input[name=flight-type]").filter(":checked:visible").attr("id");if(t=t||o.TEST_FLIGHT_TYPE_ID){if(-1<(t=t.toLowerCase()).indexOf("one"))return n.OneWay;if(-1<t.indexOf("round"))return n.RoundTrip;if(-1<t.indexOf("multi"))return n.MultiDestination;l.default.log(new Error("Could not determine flight type with dom element id - "+t),s.Severity.Excusable,a.ProblemOrigin.ClientOfUniversalTypeahead)}}return n.Unknown},o.setFlightElementId=function(e){o.TEST_FLIGHT_TYPE_ID=e},o.getRailType=function(e){if(e===u.Rail){var t=$("input[name=journeyType]").filter(":checked").attr("id");if(t=t||o.TEST_RAIL_TYPE_ID){if(-1<(t=t.toLowerCase()).indexOf("one"))return d.OneWay;if(-1<t.indexOf("round"))return d.RoundTrip;l.default.log(new Error("Could not determine rail journey type with dom element id - "+t),s.Severity.MustFix,a.ProblemOrigin.ClientOfUniversalTypeahead)}l.default.log(new Error("Unable to find journeyType dom element to determine rail journey type"),s.Severity.MustFix,a.ProblemOrigin.ClientOfUniversalTypeahead)}return d.Unknown},o.setRailTypeId=function(e){o.TEST_RAIL_TYPE_ID=e},o.getPackageType=function(){var e=$("input[name=package-lob], input[name=package-type]").filter(":visible:checked").attr("value");if(e=e||o.TEST_PACKAGE_TYPE_VALUE){if(-1<(e=e.toLowerCase()).indexOf("flight-hotel-car"))return p.FlightHotelCar;if(-1<e.indexOf("flight-hotel"))return p.FlightHotel;if(-1<e.indexOf("flight-car"))return p.FlightCar;if(-1<e.indexOf("hotel-car"))return p.HotelCar}switch($("div.wizard-tabs").find("button.on").data("lob")){case"packageFlightHotel":case"flightHotel":return p.FlightHotel;case"packageFlightHotelCar":case"flightHotelCar":case"carHotelFlight":return p.FlightHotelCar;case"packageFlightCar":case"flightCar":case"carFlight":return p.FlightCar;case"packageHotelCar":case"hotelCar":case"carHotel":return p.HotelCar;default:return o.getLob()===u.Package?p.FlightHotel:p.Unknown}},o.getShortPackageType=function(){switch(o.getPackageType()){case p.FlightCar:return"FC";case p.FlightHotel:return"FH";case p.FlightHotelCar:return"FHC";case p.HotelCar:return"HC";default:return}},o.setPackageTypeValue=function(e){o.TEST_PACKAGE_TYPE_VALUE=e},o.submitToOmniture=function(t,o){r(["dctk/dctk"],function(e){o&&e.addExperiments(o),e.trackEvent("o","wizard-submit",t,t.eventString)})},o.isWithinMobileBreakpoint=function(){return uitk&&uitk.mediaquery&&uitk.mediaquery.getMediaQueries()&&uitk.mediaquery.getMediaQueries().mobile&&uitk.mediaquery.getMediaQueries().mobile.matches},o.isTouchDevice=function(){return Modernizr&&Modernizr.touch},o.getExpUserId=function(){var t=$("#scratchpad-badge-expuserid").attr("data-id");return t||r(["gc/pageModel"],function(e){t=e.user?e.user.expUserId:void 0}),t||"-1"},o.iconOverride=function(e,t){var o=__assign({},e);return o.icon=t,o},o.getOverrideIcon=function(e,t){return"string"==typeof t&&(e=e+"|"+t),o.categoryIconOverrides[e]},o.isChildSuggestion=function(e,t){var o=e.hierarchyInfo&&e.hierarchyInfo.relation||[],i="alt"===o[0]&&"focus"===t;return-1<["child","lxcategory","nearby"].indexOf(o[0])||i},o.getURLParameter=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null},o.getUserLocation=function(){var o=void 0;return r(["storefrontPageModel"],function(e){if(e.userInteraction&&e.userInteraction.context&&e.userInteraction.context.clientInfo&&e.userInteraction.context.clientInfo.coords){var t=e.userInteraction.context.clientInfo.coords;if(t.latitude&&t.longitude)return void(o=t.latitude+"|"+t.longitude)}}),o},o.evaluateDeviceType=function(){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(navigator.userAgent)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(navigator.userAgent)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop"},o.evaluateBrowserName=function(){var e,t=navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(o[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE"):"Chrome"===o[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?"Opera":(o=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&o.splice(1,1,e[1]),o[0])},o.defaultPageIdGetter=function(){if(window.xPageId)return window.xPageId;var e=$("#pageId"),t=1===e.length?e.val():"";return!t&&window.pageName&&(t=o.clientIdByPageName[window.pageName]),t||(t=window.dctk&&window.dctk.logging?window.dctk.logging.pageName:""),t||""},o.responsiveTAClasses={autoCompleteClass:"autocomplete",centerClass:"pin-center",dropdownClass:"autocomplete-dropdown",hlClass:"highlight",leftClass:"pin-left",openClass:"autocomplete-open",rightClass:"pin-right"},o.defaultMask=(o.bitMaskFlags={ADDRESS:32,AIRPORT:1,CITY:2,HOTEL:128,METROCODE:64,METROSTATION:1024,MULTICITY:4,MULTIREGION:256,NEIGHBORHOOD:8,POI:16,TRAINSTATION:512}).AIRPORT|o.bitMaskFlags.CITY|o.bitMaskFlags.MULTICITY|o.bitMaskFlags.NEIGHBORHOOD|o.bitMaskFlags.POI,o.LOB_ATTRIBUTE={ACTIVITIES:"ACTIVITIES",CARS:"CARS",FLIGHTS:"FLIGHTS",HOTELS:"HOTELS",PACKAGES:"PACKAGES",RAILS:"RAILS",TEST:"",VACATIONRENTALS:"VACATIONRENTALS"},o.CATEGORIES={ADDRESS:{icon:"location",id:4,name:e.taCategoryNameAddress},AIRPORT:{icon:"flights",id:2,name:e.taCategoryNameAirports},AMENITY:{icon:"tag",id:14,name:e.taCategoryNameAmenities},ATTRACTION:{icon:"location",id:1,name:e.taCategoryNameAttractions},BESTFILTER:{icon:"search",id:17},CITY:{icon:"location",id:0,name:e.taCategoryNameRegionCity},DEALS:{icon:"location",id:13,name:e.taCategoryNameDeals},GEOLOCATION:{icon:"geolocation",id:16,name:void 0},HOTEL:{icon:"hotels",id:3,name:e.taCategoryNameHotels},LIST:{icon:"list",id:18},METROCODE:{icon:"flights",id:9,name:e.taCategoryNameAirports},METROSTATION:{icon:"train",id:6,name:e.taCategoryNameMetros},MULTICITY:{icon:"location",id:7,name:e.taCategoryNameRegionCity},NEIGHBORHOOD:{icon:"location",id:8,name:e.taCategoryNameRegionCity},POI:{icon:"location",id:11,name:e.taCategoryNameAttractions},RENTAL:{icon:"cars",id:12,name:e.taCategoryNameRentals},TRAINSTATION:{icon:"train",id:5,name:e.taCategoryNameTrains},USERHISTORY:{icon:"notime",id:15,name:e.taCategoryNameRecentSearch}},o.categoryIconOverrides={"ADDRESS|RENTALLOCATION":o.CATEGORIES.RENTAL.icon,"NEIGHBORHOOD|AIRNBH":"flights"},o.TEST_CLIENT_ID="Unknown",o.TEST_FLIGHT_TYPE_ID="Unknown",o.TEST_PACKAGE_TYPE_VALUE="Unknown",o.TEST_RAIL_TYPE_ID="Unknown",o.clientIdByPageId={Homepage:"Homepage",aws_Homepage:"AWSHomepage","page.Account.MyAccount":"UserAccountPage","page.Activities":"LXLandingPage","page.Cars":"CarsLandingPage","page.Cars.Infosite.Information":"Cars.Search","page.Flight-Search-Oneway":"Flights.Search","page.Flight-Search-Roundtrip.Out":"Flights.Search","page.Flight-Search.MDest":"Flights.Search","page.Flights":"FlightsLandingPage","page.Hotel-Search":"Hotels.Search","page.Hotels":"HotelsLandingPage","page.Hotels.Search":"Hotels.Search","page.Packages":"PackageLandingPage","page.Rails":"RailsLandingPage","page.car.search.list.aws":"Cars.Search","page.open-search":"OpenSearchPage"},o.clientIdByPageName={activity:"LXLandingPage",aws_Homepage:"AWSHomepage",car:"CarsLandingPage",flight:"FlightsLandingPage",homepage:"Homepage",hotel:"HotelsLandingPage",package:"PackageLandingPage"},o.clientIdByPath={"/":"Homepage","/Activities":"LXLandingPage","/Cars":"CarsLandingPage","/Flights":"FlightsLandingPage","/Flights-Search":"Flights.Search","/Holidays":"PackageLandingPage","/Hotel-Search":"Hotels.Search","/Hotels":"HotelsLandingPage","/Vacation-Packages":"PackageLandingPage","/search-results":"OpenSearchPage","/trains":"RailsLandingPage"},o}();t.TypeaheadUtils=m});var utaScriptLoadingStartedTimestamp=Date.now();if(require("universalTypeahead",function(a){window.utaModuleReadyTimeStamp=Date.now(),a.handlePageLoad();$("body").on("focus.typeahead input.typeahead change.typeahead","[data-provide=utypeahead]",function(e,t){var o,i,n,r=$(this);r.attr("data-typeahead")||(o="#"+r.attr("id"),i=r.data("template"),r.data("jsTheme"),n=r.data(),a.initTA(o,i,n),r.attr("data-typeahead","uTA-attached"))})}),require(["typeahead/core/presentation/SvgIcons"],function(e){e.SvgIcons.init()}),define&&define.amd)try{define("require",function(){return require})}catch(e){}!function(e){e.prototype.indexOf||(e.prototype.indexOf=function(e,t){var o;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),n<=r)return-1;for(o=Math.max(0<=r?r:n-Math.abs(r),0);o<n;){if(o in i&&i[o]===e)return o;o++}return-1})}(Array),define("universalTypeahead",["require","exports","jquery","uitk","uitk_i18n","typeahead/core/loc","typeahead/core/context","typeahead/client/ClientHandlerRegistry","typeahead/core/ConfigurableFeature","typeahead/core/EssDataProvider","typeahead/core/ExpediaSuggestServiceRequestGenerator","typeahead/core/google/GoogleMapsDataProvider","typeahead/core/logging/FlightOriginPopulationLogger","typeahead/core/logging/OmnitureLogger","typeahead/core/logging/PerformanceMetricsLogger","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/ScanabilityLogger","typeahead/core/logging/SelectionToSubmissionLogger","typeahead/core/logging/Severity","typeahead/core/logging/SuggestionEngagementLogger","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/TypeaheadInteractionLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputClearedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionListSelectedMessage","typeahead/core/message/SuggestionReadyMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/OnFocusSuggester","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/plugins/SuggestionsProvider","typeahead/core/presentation/DisplayGroupHandler","typeahead/core/presentation/DropdownContentHandlersAssembly","typeahead/core/presentation/DropDownHideHandlersAssembly","typeahead/core/presentation/DropDownShowHandlersAssembly","typeahead/core/presentation/IInputElementFocusByHumanOrScriptHandler","typeahead/core/presentation/IInputElementFocusHandler","typeahead/core/presentation/TypeaheadDropdownBuilder","typeahead/core/SearchParametersUpdater","typeahead/core/SuggestionFactory","typeahead/core/TypeaheadUtils","typeahead/core/util/Functional","typeahead/dataprovider/IClientSideCacheStatusChecker","uitk_tooltip"],function(e,t,p,g,d,r,a,o,s,l,i,u,c,h,y,f,m,v,S,T,b,E,M,I,C,x,_,P,O,w,L,A,n,H,R,D,k,F,N,U,G,q,B,V,$,z,j){"use strict";t.__esModule=!0;var W=function(){function n(e,t,o){var i=this;this.essDataProvider=new l.EssDataProvider,this.suggestionsProvider=new R.SuggestionsProvider(n.pluginAssembly),this.googleMapsDataProvider=new u.GoogleMapsDataProvider,this.defaultEssOptions={abtest:"",additionalDataSourceUrl:"",dest:!1,features:[],lob:$.TypeaheadUtils.LOB_ATTRIBUTE.FLIGHTS,locale:"en_US",mask:$.TypeaheadUtils.defaultMask,maxitems:20,maxresults:10,overrideDataRequest:null,overrideServiceUrl:"",serviceUrl:"//suggest.expedia.com",version:"v2"},this.defaultTAOptions={closetext:r.closetext,continuetext:r.continuetext,forceicon:!1,minchar:1,onInputBlur:null,onInputFocus:null,onItemSelected:null,onItemSelectionChanged:null,onPopupClosed:null,onPopupOpened:null,openDefaultTa:!1,playBackText:"",preRenderTransform:null,selectFirstElementByDefault:!0,tooltip:!0},this.defaultOptions=p.extend({},this.defaultTAOptions,this.defaultEssOptions),this.displayGroupHandler=new D.DisplayGroupHandler,this.dropdownContentHandlersAssembly=new k.DropdownContentHandlersAssembly(n.pluginAssembly),this.dropDownShowHandlersAssembly=new N.DropDownShowHandlersAssembly(n.pluginAssembly),this.dropDownHideHandlersAssembly=new F.DropDownHideHandlersAssembly(n.pluginAssembly),this.inputElementFocusByHumanOrScriptHandlers=n.pluginAssembly.get(U.isInputElementFocusByHumanOrScriptHandler),this.inputElementFocusHandlers=n.pluginAssembly.get(G.isInputElementFocusHandler),this.onFocusSuggester=new A.OnFocusSuggester(n.pluginAssembly.get(H.DefaultPluginAssembly.onFocusSuggestionsProviderIdentifier)),this.clientSideCacheStatusChecker=n.pluginAssembly.get(j.isClientSideCacheDisabled),this.ESS_EXCEPTION_RESPONSE_CODES=["ZERO_RESULT_BY_EXCEPTION"],this.$input=p(e),this.$parent=this.$input.closest("."+$.TypeaheadUtils.responsiveTAClasses.autoCompleteClass),this.$label=this.$input.closest("label"),this.setPinClass(this.$parent),this.opts=p.extend(!0,{},this.defaultOptions,o,{browser:$.TypeaheadUtils.getBrowser(),device:$.TypeaheadUtils.getDeviceType(),guid:$.TypeaheadUtils.getGuid(),locale:a.locale,serviceUrl:a.serviceUrl,siteid:a.siteid}),this.requestGenerator=this.constructRequestGenerator(this.opts,n.pluginAssembly),this.opts.clientId||(this.opts.clientId=$.TypeaheadUtils.getClientId()),this.opts.packageType=$.TypeaheadUtils.getShortPackageType(),this.context=this.constructContext(this.opts),this.opts.featureOverrides=s.ConfigurableFeature.getFeatureOverrides(this.$input),this.ariaOwns=this.$input.attr("aria-owns")||"backwards",this.templateUsed=t,this.firstItemFlag=!0,this.lastItemFlag=!0,this.searchType=null,this.cache={},this.ignoreNext=!1,this.isClickOn=!1,this.$input.autocomplete="off",this.$input.on("focus",p.proxy(this.focus,this)).on("keydown",p.proxy(this.keyDown,this)).on("keyup",p.proxy(this.keyUp,this)).on("keypress",p.proxy(this.keyPress,this)).on("input",p.proxy(this.input,this)).on("blur",p.proxy(this.blur,this)),this.$popupContent=this.$input.closest("."+$.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).children("."+$.TypeaheadUtils.responsiveTAClasses.dropdownClass),this.$input.data("typeahead",this),this.opts.openDefaultTa&&this.dataRequest("defaultResponse"),this.renderedData={query:"",results:[]},n.seLogger||(n.seLogger=new T.SuggestionEngagementLogger),n.interactionLogger||(n.interactionLogger=new E.TypeaheadInteractionLogger),n.scanabilityLogger||(n.scanabilityLogger=new m.ScanabilityLogger),n.selectionToSubmissionLogger||(n.selectionToSubmissionLogger=new v.SelectionToSubmissionLogger),n.oLogger||(n.oLogger=new h.OmnitureLogger),n.performanceMetricsLogger||(n.performanceMetricsLogger=new y.PerformanceMetricsLogger),w.TypeaheadMessage.subscribe(I.InputClearedMessage.getTopic(),function(e,t){if(t&&t.$elem){var o=t.$elem.attr("id");i.$input.attr("id")===o&&i.input(null)}}),p(document.body).bind("mousedown",function(e){p(e.target).is(i.$input)||i.close()})}return n.initOmnitureLogger=function(){n.oLogger=new h.OmnitureLogger},n.initFlightOriginLogger=function(){n.flightOriginPopulationLogger=new c.FlightOriginPopulationLogger},n.getOmnitureLogger=function(){return n.oLogger},n.prototype.getCategory=function(e){if("USERHISTORY"===e.category)return $.TypeaheadUtils.CATEGORIES.USERHISTORY;if(e.hierarchyInfo&&e.hierarchyInfo.relation&&"hotelfilter"===e.hierarchyInfo.relation[0])return $.TypeaheadUtils.CATEGORIES.BESTFILTER;if(void 0!==e.type){var t=$.TypeaheadUtils.getOverrideIcon(e.type,e.subtype);return"string"==typeof t?$.TypeaheadUtils.iconOverride($.TypeaheadUtils.CATEGORIES[e.type],t):$.TypeaheadUtils.CATEGORIES[e.type]}return void 0!==e.t?$.TypeaheadUtils.CATEGORIES[e.t]:void 0},n.prototype.addIndexToItems=function(e){e.forEach(function(e,t){e.index=t})},n.prototype.updateSearchSuggestions=function(e,t,o,a){var s=this,i=this.suggestionsProvider.modifySuggestions(e,o,this.opts);p.each(i,function(e,t){var o,i,n,r=s.getCategory(t);t.categoryName=r?r.name:"Other",t.icon||(o=r,t.icon=a||(o?o.icon:"location")),void 0!==(i=t).regionNames&&(void 0!==i.regionNames.lastSearchName?i.regionNames.lastSearchName=i.regionNames.lastSearchName.replace(/'/g,"&#39;"):void 0!==i.regionNames.fullName&&(i.regionNames.fullName=i.regionNames.fullName.replace(/'/g,"&#39;"),i.regionNames.lastSearchName=i.regionNames.fullName)),(n=t).categoryVM={displayName:"",fullName:""},"regionNames"in n?(n.categoryVM.displayName=n.regionNames.displayName,n.categoryVM.fullName=n.regionNames.fullName,n.categoryVM.lastSearchName=n.regionNames.lastSearchName):"d"in n&&(n.categoryVM.displayName=n.d,n.categoryVM.fullName=n.l)})},n.prototype.constructContext=function(e){return{clientId:e.clientId,deviceType:$.TypeaheadUtils.getDeviceType(),expuserid:$.TypeaheadUtils.getExpUserId(),guid:e.guid,lob:e.lob,locale:e.locale,siteid:e.siteid,tab:o.ClientHandlerRegistry.getTab()}},n.prototype.constructSuggestionServiceUrlOptions=function(e){return{locale:e.locale,overrideServiceUrl:e.overrideServiceUrl,serviceUrl:e.serviceUrl,suggestServiceUrl:e.suggestServiceUrl}},n.prototype.constructRequestGenerator=function(e,t){return new i.ExpediaSuggestServiceRequestGenerator(i.ExpediaSuggestServiceRequestGenerator.ESS_ABACUS_IDS,"function"==typeof i.ExpediaSuggestServiceRequestGenerator.defaultVariantAssigner?i.ExpediaSuggestServiceRequestGenerator.defaultVariantAssigner:void 0,this.constructSuggestionServiceUrlOptions(e),e.siteid,t)},n.prototype.getDomElementId=function(){return this.$input.attr("id")},n.prototype.showPopup=function(){this.$popupContent.is(":hidden")&&(this.$popupContent.off("mousedown").off("mouseup").off("mouseenter").off("mouseleave").on("mousedown",p.proxy(this.clickOn,this)).on("mouseup",p.proxy(this.clickOff,this)).on("mouseenter","a",p.proxy(this.mouseEnter,this)).on("mouseleave","a",p.proxy(this.mouseLeave,this)),this.$popupContent.closest("."+$.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).addClass($.TypeaheadUtils.responsiveTAClasses.openClass),this.$popupContent.show(),this.dropDownShowHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context)),this.dropdownContentHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context)},n.prototype.startRequest=function(){var e=this,t="number"==typeof this.opts.minchar?this.opts.minchar:1,o=this.$input.val();if(o.length>=t){var i=this.cache[o];i?this.clientSideCacheStatusChecker&&this.clientSideCacheStatusChecker.length&&this.clientSideCacheStatusChecker[0].isClientSideCacheDisabled(this.context)?this.dataRequest(o):e.render(i.query,i.results,i.activeABTests,i.responseCode):this.dataRequest(o)}else""===o?this.$input.triggerHandler("focus",!0):this.close()},n.prototype.createTypeaheadOptions=function(e){return p.extend(!0,{},this.opts,{context:this.context,inputElementId:this.getDomElementId(),requestGenerator:this.requestGenerator,srchText:e})},n.prototype.dataRequest=function(e){this.essDataProvider.fetchData(this.createTypeaheadOptions(e)).then(p.proxy(this.essResponseResolver,this)).fail(function(e){b.default.log(e,S.Severity.MustFix,f.ProblemOrigin.ExpediaSuggestService)})},n.prototype.essResponseResolver=function(e){var t=this;if(e)if(e.isReferralToGoogleMaps){var o=p.extend(!0,{},this.opts,{activeEssTests:e.activeABTests,domElementId:this.getDomElementId(),requestType:e.responseCode,srchText:e.query});this.googleMapsDataProvider.fetchData(o).then(function(e){t.googleMapsDataProviderResponseResolver(e)})}else(this.cache[e.query]=e).results?this.render(e.query,e.results,e.activeABTests,e.responseCode):this.close()},n.prototype.googleMapsDataProviderResponseResolver=function(e){(this.cache[e.query]=e).results?this.render(e.query,e.results,void 0):this.close()},n.prototype.appendUserTypedText=function(e,t){var o,i=!0,n={};this.opts.playBackText&&"defaultResponse"!==t&&(p.each(e,function(e,t){-1===t.id&&(i=!1)}),i&&(t=t.replace(/<script[\s\S]+?script\s*>?/gi,""),o=(o=this.opts.playBackText).replace(/\d/,t),n.l=t,n.d=o,n.id=-1,n.i=-1,"HOTELS"===this.opts.lob&&(n.t="HOTEL"),e.push(n)))},n.prototype.render=function(e,t,o,i){""===e?p.extend(this.opts,{renderTrigger:"focus"}):p.extend(this.opts,{renderTrigger:"type"});var n=Date.now();if(this.$input.val()&&e&&this.$input.val()!==e&&!this.opts.openDefaultTa)this.publishSuggestionReadyMessage(e,t,o,this.getDomElementId(),i);else{var r,a,s,l,u=p.extend(!0,[],t);if(0===u.length)return this.close(),void this.publishSuggestionReadyMessage(e,t,o,this.getDomElementId(),i);if(p(document.activeElement).attr("id")===this.$input.attr("id")){if(this.appendUserTypedText(u,e),this.addIndexToItems(u),this.opts.preRenderTransform&&"function"==typeof this.opts.preRenderTransform&&(!(u=this.opts.preRenderTransform(e,u))||!Array.isArray(u)))throw new Error("preRenderTransform callback must return a valid array.");this.updateSearchSuggestions(u,this.suggestionsProvider,this.context,this.opts.forceicon),this.addIndexToItems(u),r=this.displayGroupHandler.getResultsByDisplayGroup(u),l={closeText:this.opts.closetext,resultsByDisplayGroup:r},"android"in Modernizr&&Modernizr.android||(l.ariaOwns=this.ariaOwns),this.renderedData.query=e,this.renderedData.results=p.extend(!0,[],u),this.$popupContent.html(q.TypeaheadDropdownBuilder.getHtml(l)),this.showPopup(),this.$label.addClass("focused"),s=u.length,a=1===s?"typeahead_results_displayed_one":"typeahead_results_displayed_other",conditionizr.safari?setTimeout(function(){g.utils.liveAnnounce(d.t(a,{arg0:s}),"polite"),setTimeout(function(){g.utils.liveAnnounce("","polite")},200)},800):g.utils.liveAnnounce(d.t(a,{arg0:s}),"polite");var c=Date.now()-n;w.TypeaheadMessage.publish(new O.SuggestionShownMessage(this.renderedData.results,e,o,this.opts.lob,c,this.getDomElementId())),this.publishSuggestionReadyMessage(e,t,o,this.getDomElementId(),i),window.utaTestHooks={latestEssResults:this.renderedData.results}}}},n.prototype.close=function(){var t=this;this.$popupContent.off("mousedown",p.proxy(this.clickOn,this)).off("mouseup",p.proxy(this.clickOff,this)).off("mouseenter","a",p.proxy(this.mouseEnter,this)).off("mouseleave","a",p.proxy(this.mouseLeave,this)),this.$popupContent.is(":hidden")||setTimeout(function(){t.$label.removeClass("focused"),t.$popupContent.closest("."+$.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).removeClass($.TypeaheadUtils.responsiveTAClasses.openClass),t.removeActiveDescendant(),t.$popupContent.unbind("mousedown",p.proxy(t.cancelEvent,t)),p(document.body).unbind("mousedown",p.proxy(t.close,t)),t.dropDownHideHandlersAssembly.runHandlers(t.$popupContent,t.$input,t.context);var e=p(document.body).scrollTop();p(document.body).scrollTop(e),t.$popupContent.hide(),t.$popupContent.html("")},0)},n.prototype.removeActiveDescendant=function(){var e=p("input[aria-activedescendant]");0<e.length&&e.removeAttr("aria-activedescendant")},n.prototype.prev=function(){var e=this.$popupContent.find("a"),t=this.$popupContent.find("."+$.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass($.TypeaheadUtils.responsiveTAClasses.hlClass),o=e.index(t)-1,i=e[o],n=p(i),r=p(i).attr("id"),a=e.length-1,s="";o<-1&&(i=e[a],n=p(i)),i?(p(i).addClass($.TypeaheadUtils.responsiveTAClasses.hlClass),this.opts.onItemSelectionChanged&&"function"==typeof this.opts.onItemSelectionChanged&&this.opts.onItemSelectionChanged(n),p(i).hasClass("close")?g.utils.liveAnnounce(d.t("close"),"assertive"):(s=p(i).attr("data-value"),conditionizr.firefox||g.utils.liveAnnounce(s,"polite"),this.$input.attr("aria-activedescendant",r))):(this.$input.removeAttr("aria-activedescendant"),g.utils.liveAnnounce(this.$input.val(),"polite"))},n.prototype.next=function(){var e=this.$popupContent.find("a"),t=this.$popupContent.find("."+$.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass($.TypeaheadUtils.responsiveTAClasses.hlClass),o=e[e.index(t)+1],i=p(o),n=p(o).attr("id");o?(i.addClass($.TypeaheadUtils.responsiveTAClasses.hlClass),this.opts.onItemSelectionChanged&&"function"==typeof this.opts.onItemSelectionChanged&&this.opts.onItemSelectionChanged(i),p(o).hasClass("close")?g.utils.liveAnnounce(d.t("close"),"assertive"):(this.$input.attr("aria-activedescendant",n),conditionizr.firefox||g.utils.liveAnnounce(p(o).attr("data-value"),"polite"))):g.utils.liveAnnounce(this.$input.val(),"polite")},n.prototype.removeHighlights=function(){this.$popupContent.find("."+$.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass($.TypeaheadUtils.responsiveTAClasses.hlClass)},n.prototype.getSelectedSuggestion=function(e){if(this.renderedData.results&&e){var t=e.substring(e.lastIndexOf("-")+1),o=parseInt(t,10)+1,i=!1;if(o<this.renderedData.results.length){var n=this.renderedData.results[o];i=n.hierarchyInfo&&"true"===n.hierarchyInfo.isChild}return V.createSuggestion(this.renderedData.results[t],i)}return null},n.prototype.selectHighlighted=function(e,t){var o,i,n=this.$popupContent.find("."+$.TypeaheadUtils.responsiveTAClasses.hlClass),r=n.text(),a=p(e.target);if(t=t||a.hasClass("close")||a.parent().hasClass("close"),g.isTouchDevice&&!r&&(n=a.closest(".results-item").find("a"),t=a.hasClass("footer")),n&&n.attr("id")&&"LIST"===(i=this.getSelectedSuggestion(n.attr("id"))).getType().orElse(""))w.TypeaheadMessage.publish(new x.SuggestionListSelectedMessage(i,this.opts.lob,this.getDomElementId()));else{if(o=r.replace(/(^\s+|\s+$)/g,""),this.updateTextField(n),n.removeClass($.TypeaheadUtils.responsiveTAClasses.hlClass),!0===t)n.text().replace(/(^\s+|\s+$)/g,""),g.utils.liveAnnounce(d.t("close_button_menu_closed")),this.close();else{var s=d.t("item_selected_menu_closed",{arg0:o});g.utils.liveAnnounce(s,"assertive")}i&&(B.updateForSuggestion(this.$input.val(),i,this.opts,this.getDomElementId()),w.TypeaheadMessage.publish(new P.SuggestionSelectedMessage(i,e,this.opts.lob,this.getDomElementId()))),n.context=this.$input;var l={element:n,suggestionSelected:i};g.publish("typeahead.resultSelected",l),"function"==typeof this.opts.selectioncallback?this.opts.selectioncallback(n):"function"==typeof window[this.opts.selectioncallback]&&window[this.opts.selectioncallback](n)}},n.prototype.updateTextField=function(e){var t,o,i,n,r=e.attr("id");if(e&&r){if(t=r.lastIndexOf("-"),o=+r.substring(t+1),i=this.renderedData.results[o],n=e.attr("data-value")){n=n.replace(/&#39;/g,"'"),this.$input.val(n),"GEOLOCATION"!==i.category&&this.$input.trigger("change");var a=e.attr("data-id");a&&this.$input.attr("data-id",a)}g.prepFields(),this.close()}},n.prototype.showOnFocusSuggestions=function(){var t=this,o=this.$input.val();this.onFocusSuggester.suggest(this.createTypeaheadOptions(""),this.context).done(p.proxy(function(e){e&&(t.$input.val()&&o!==t.$input.val()||t.render("",e.results,""))},this))},n.prototype.focus=function(e,t){this.hasFocus&&!t||(z.mapMethodByName(this.inputElementFocusByHumanOrScriptHandlers,"handleInputElementFocusByHumanOrScript",this.$input,this.context),e.isTrigger&&!t||(w.TypeaheadMessage.publish(new M.ElementFocusedMessage(this.$input.val(),this.context,this.getDomElementId())),z.mapMethodByName(this.inputElementFocusHandlers,"handleInputElementFocus",this.$input,this.context),this.showOnFocusSuggestions(),this.opts.onInputFocus&&"function"==typeof this.opts.onInputFocus&&this.opts.onInputFocus(e))),this.hasFocus=!0,this.opts.packageType=$.TypeaheadUtils.getShortPackageType()},n.prototype.blur=function(e){this.hasFocus=!1,this.opts.onInputBlur&&"function"==typeof this.opts.onInputBlur&&this.opts.onInputBlur(e),window.navigator.msPointerEnabled&&!window.PointerEvent||(this.isClickOn&&this.$popupContent.bind("mousedown",p.proxy(this.cancelEvent,this)),w.TypeaheadMessage.publish(new L.UserExitedMessage))},n.prototype.keyDown=function(e){var t;switch(e||(e=window.event),t=e.keyCode){case 27:this.close(),e.stopPropagation();break;case 9:case 13:if(this.opts.selectFirstElementByDefault&&this.$popupContent.find(".highlight").length<=0&&this.$label.hasClass("focused")){var o=this.$popupContent.find("li.category-item");if(o&&0!==o.length||(o=this.$popupContent.find("li.results-item")),o){var i=o.first();i&&i.find("a").addClass("highlight")}}this.$popupContent.find(".highlight").length&&(e.stopPropagation(),13===t&&e.preventDefault(),this.selectHighlighted(e,this.$popupContent.find(".highlight").hasClass("close")));break;case 32:this.$popupContent.find(".highlight").hasClass("close")&&(e.stopPropagation(),e.preventDefault());break;case 39:this.$popupContent.find(".highlight").length&&(this.ignoreNext=!0,e.stopPropagation(),this.selectHighlighted(e,!1));break;case 38:e.preventDefault(),e.stopPropagation(),this.prev();break;case 40:e.stopPropagation(),e.preventDefault(),this.next()}},n.prototype.keyPress=function(e){e||(e=window.event),13===e.keyCode&&this.close()},n.prototype.keyUp=function(e){if(this.ignoreNext)this.ignoreNext=!1;else switch(e||(e=window.event),e.keyCode){case 37:this.removeHighlights();break;case 38:e.preventDefault(),e.stopPropagation();break;case 40:e.stopPropagation(),e.preventDefault();break;case 13:break;case 32:this.$popupContent.find(".highlight").hasClass("close")&&(e.stopPropagation(),e.preventDefault(),this.selectHighlighted(e,this.$popupContent.find(".highlight").hasClass("close")))}},n.prototype.input=function(e){var t=this;w.TypeaheadMessage.publish(new C.InputValueEditedMessage(this.$input.val(),this.opts.lob,this.getDomElementId())),this.$input.val()!==this.oldInputVal&&(this.oldInputVal=this.$input.val(),this.startRequest(),setTimeout(function(){B.updateForSuggestion(t.$input.val(),void 0,t.opts,t.getDomElementId())}),this.opts.onInputEdited&&this.opts.onInputEdited(this.$input.val()))},n.prototype.clickOn=function(e){var t=p(e.target);t.hasClass("close")||t.parent().hasClass("close")||(this.isClickOn=!0),this.click(e)},n.prototype.clickOff=function(){this.isClickOn=!1},n.prototype.click=function(e){e.stopPropagation(),e.preventDefault(),(0===e.button||g.isTouchDevice)&&this.selectHighlighted(e,!1)},n.prototype.mouseEnter=function(e){p(e.currentTarget).addClass("highlight")},n.prototype.mouseLeave=function(e){this.removeHighlights()},n.prototype.cancelEvent=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1},n.prototype.remove=function(){this.$input.autocomplete="on",this.$input.closest("form").attr("autocomplete","on"),this.$input.off("focus",p.proxy(this.focus,this)).off("keydown",p.proxy(this.keyDown,this)).off("keyup",p.proxy(this.keyUp,this)).off("keypress",p.proxy(this.keyPress,this)).off("input",p.proxy(this.input,this)).off("blur",p.proxy(this.blur,this)),this.$popupContent.off("mousedown",p.proxy(this.clickOn,this)).off("mouseup",p.proxy(this.clickOff,this)).off("mouseenter","a",p.proxy(this.mouseEnter,this)).remove()},n.prototype.setPinClass=function(e){e.hasClass($.TypeaheadUtils.responsiveTAClasses.leftClass)||e.hasClass($.TypeaheadUtils.responsiveTAClasses.rightClass)||e.hasClass($.TypeaheadUtils.responsiveTAClasses.centerClass)||e.addClass($.TypeaheadUtils.responsiveTAClasses.leftClass)},n.prototype.publishSuggestionReadyMessage=function(e,t,o,i,n){this.ESS_EXCEPTION_RESPONSE_CODES.indexOf(n)<0&&w.TypeaheadMessage.publish(new _.SuggestionReadyMessage(e,t,o,i))},n.pluginAssembly=new H.DefaultPluginAssembly,n}();t.handlePageLoad=function(){W.initOmnitureLogger(),W.initFlightOriginLogger(),setTimeout(function(){$.TypeaheadUtils.isStorefrontClient()?e(["gc/pageModel"],function(e){n.CompositePageLoadHandler.getInstance().handlePageLoad(W.pluginAssembly)}):n.CompositePageLoadHandler.getInstance().handlePageLoad(W.pluginAssembly)},0)},t.initTA=function(e,t,o){return new W(e,t,o)},t.registerPlugin=function(e){W.pluginAssembly.registerPlugin(e)}}),define("typeahead/core/geolocation/GeolocationDataProvider",["require","exports","typeahead/core/loc","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/IListItem","typeahead/core/message/TypeaheadMessage"],function(e,t,o,r,a,s,i,l){"use strict";t.__esModule=!0;var n=function(){function n(){this.geolocationResult={category:n.CATEGORY,listItemType:i.ListItemType.Suggestion,regionNames:{displayName:n.MESSAGES.SUGGESTION_TEXT,lastSearchName:n.MESSAGES.DISPLAY_TEXT},type:n.CATEGORY}}return n.prototype.fetchData=function(e){return $.Deferred().resolve({results:[this.getGeolocationResult()]}).promise()},n.prototype.findGeolocation=function(e,t){var o=this;void 0===t&&(t=void 0);var i=!1;l.TypeaheadMessage.publish(new a.GeolocationRequestMessage(e)),navigator.geolocation.getCurrentPosition(function(e){i=!0,o.setGeolocation(e),l.TypeaheadMessage.publish(new s.GeolocationResponseMessage(o.objectifyPosition(e),void 0,o.getGeolocationResult(),t)),setTimeout(function(){o.setGeolocation(void 0),l.TypeaheadMessage.publish(new r.GeolocationClearedMessage(o.getGeolocationResult()))},n.TTL_IN_MILLISEC)},function(e){i||(i=!0,l.TypeaheadMessage.publish(new s.GeolocationResponseMessage(void 0,o.objectifyPositionError(e),o.getGeolocationResult())))},{enableHighAccuracy:!0,maximumAge:0,timeout:n.TIMEOUT_IN_MILLISEC}),setTimeout(function(){i||(i=!0,l.TypeaheadMessage.publish(new s.GeolocationResponseMessage(void 0,{code:3,message:"Fallback timeout expired"},o.getGeolocationResult())))},n.TIMEOUT_IN_MILLISEC+15e3)},n.prototype.getGeolocationResult=function(){return this.geolocationResult},n.prototype.setGeolocation=function(e){e&&e.coords?this.geolocationResult.coordinates={lat:e.coords.latitude+"",long:e.coords.longitude+""}:this.geolocationResult.coordinates=void 0},n.prototype.objectifyPosition=function(e){return{coords:e.coords?{accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed}:void 0,timestamp:e.timestamp}},n.prototype.objectifyPositionError=function(e){return{code:e.code,message:e.message}},n.CATEGORY="GEOLOCATION",n.TIMEOUT_IN_MILLISEC=6e3,n.TTL_IN_MILLISEC=18e4,n.MESSAGES={DISPLAY_TEXT:o.geolocationDisplayText||"Your current location",SUGGESTION_TEXT:o.geolocationSuggestionText||"Use your current location"},n}();t.GeolocationDataProvider=n}),define("typeahead/core/geolocation/GeolocationIcon",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.locationIcon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE2cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTZweCIgDQp4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIiANCnhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGUvPjxkZWZzLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIA0KaWQ9Ikljb25zIHdpdGggbnVtYmVycyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPjxnIGZpbGw9IiMwMDY1YjgiIGlkPSJHcm91cCIgDQp0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ0LjAwMDAwMCwgLTE5Mi4wMDAwMDApIj4NCjxwYXRoIGQ9Ik0xNDQuMDE3NDU2LDIwMCBMMTYwLjAxOTY1MywxOTIuMDQzMDkxIEwxNTIsMjA4LjA4ODYyMyBMMTUyLDIwMCBMMTQ0LjAxNzQ1NiwyMDAgWiBNMTQ0LjAxNzQ1NiwyMDAiIA0KaWQ9IlBhdGggMjIxIi8+PC9nPjwvZz48L3N2Zz4="});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/geolocation/GeolocationSuggestion",["require","exports","typeahead/core/Suggestion"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!1},t}(o.Suggestion);t.GeolocationSuggestion=i}),define("typeahead/core/geolocation/GeolocationViewController",["require","exports","typeahead/core/loc","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,o,i,n,r,a,s,l){"use strict";t.__esModule=!0;var u=function(){function t(e){var o=this;this.geolocationDataProvider=e,this.errorConfigMap={1:{code:1,closeTypeahead:!0,message:t.MESSAGES.PERMISSION_DENIED},2:{code:2,closeTypeahead:!0,message:t.MESSAGES.POSITION_UNAVAILABLE},3:{code:3,closeTypeahead:!1,message:t.MESSAGES.TIMEOUT},4:{code:4,closeTypeahead:!1,message:t.MESSAGES.UNKNOWN_ERROR}},this.interstitialContentSelector=".wrap",l.TypeaheadMessage.subscribe(a.ElementFocusedMessage.getTopic(),function(e,t){o.domElementId=t.getDomElementId()}),l.TypeaheadMessage.subscribe(s.SuggestionSelectedMessage.getTopic(),function(e,t){i.GeolocationDataProvider.CATEGORY!==t.getSuggestion().getCategory().orElse("")||o.isGeolocationAvailable()||o.geolocationDataProvider.findGeolocation(o.getDomElementId())}),l.TypeaheadMessage.subscribe(n.GeolocationRequestMessage.getTopic(),function(e,t){o.showInterstitial(o.getDomElementId())}),l.TypeaheadMessage.subscribe(r.GeolocationResponseMessage.getTopic(),function(e,t){o.handleGeolocationResponse(t)})}return t.prototype.handleGeolocationResponse=function(e){this.hideInterstitial(this.getDomElementId()),e.getPositionError()?(this.showErrorModal(e.getPositionError().code,this.getDomElementId()),$("#"+this.getDomElementId()).val("")):(this.updateSearchParameters(e.getGeolocationResult(),$("#"+this.getDomElementId())),e.getSubmitButton()&&e.getSubmitButton().trigger("click"))},t.prototype.getErrorMessage=function(e){return this.errorConfigMap[e]?this.errorConfigMap[e].message:this.errorConfigMap[4].message},t.prototype.showInterstitial=function(e){$("#"+e).blur(),uitk.publish("results.changed",{contentId:this.interstitialContentSelector,disable:!0,message:"<p>"+t.MESSAGES.FINDING_GEOLOCATION+"</p>",scrollToTop:!1,showLoader:!0})},t.prototype.hideInterstitial=function(e){uitk.publish("results.complete",{ariaLevel:"polite",contentId:this.interstitialContentSelector})},t.prototype.showErrorModal=function(o,i){var n=this,r=uitk.modal.create({content:"<p>"+this.getErrorMessage(o)+"</p>",focusClose:i,modalId:"geolocationErrorModal",title:t.MESSAGES.ERROR_TITLE});uitk.subscribe("modal.close",function(e,t){t===r&&(n.errorConfigMap[o].closeTypeahead||$("#"+i).trigger("focus",!0))})},t.prototype.getDomElementId=function(){return this.domElementId?this.domElementId:$("div.autocomplete:visible").find("input[name=destination]").attr("id")},t.MESSAGES={ERROR_TITLE:o.geolocationErrorTitle||"We are unable to determine your current location",FINDING_GEOLOCATION:o.geolocationFindingMessage||"Finding your current location",PERMISSION_DENIED:o.geolocationPermissionDeniedMessage||"Please turn on the location services on your device so we can determine your location or type in a destination.",POSITION_UNAVAILABLE:o.geolocationPositionUnavailableMessage||"Please type in a destination.",TIMEOUT:o.geolocationTimeoutMessage||"Please retry or type in a destination.",UNKNOWN_ERROR:o.geolocationUnknownErrorMessage||"Please retry or type in a destination."},t}();t.GeolocationViewController=u});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/geolocation/MercuryGeolocationViewController",["require","exports","typeahead/core/loc","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/GeolocationViewController","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/SearchParametersUpdater","typeahead/core/SuggestionFactory"],function(e,t,o,i,n,r,a,s,l,u,c,p){"use strict";t.__esModule=!0;var g=function(t){function e(e){var o=t.call(this,e)||this;return o.geolocationDataProvider=e,u.TypeaheadMessage.subscribe(s.SubmitClickedMessage.getTopic(),function(e,t){o.isGeolocationSuggestionSelected(o.getVisibleTypeaheadDivElement())&&(o.isGeolocationAvailable()?o.disableLocalStorage():(t.getEvent()&&t.getEvent().preventDefault(),o.geolocationDataProvider.findGeolocation(o.getDomElementId(),$(t.getEvent().currentTarget))))}),u.TypeaheadMessage.subscribe(a.FormSubmittedMessage.getTopic(),function(e,t){t.isFormValid()&&o.isGeolocationSuggestionSelected(o.getVisibleTypeaheadDivElement())&&$("form:has(input[data-provide=utypeahead]):visible").append($("<input>").attr("type","hidden").attr("name","sort").val("distance"))}),u.TypeaheadMessage.subscribe(r.GeolocationClearedMessage.getTopic(),function(e,t){o.updateSearchParameters(t.getGeolocationResult(),$("#"+o.getDomElementId()))}),o}return __extends(e,t),e.prototype.handlePageLoad=function(n,r){var a=this;this.geolocationDataProvider.fetchData(void 0).done(function(e){var t=e.results[0],o=$("form[data-lob-form="+n.tab+"]").find("input[name=destination]"),i=o.closest("div.autocomplete");i.length&&(r||"activity"!==n.tab&&(a.isGeolocationCategory(i)||!o.val()))&&a.populateCurrentLocationSearchContext(o,t)})},e.prototype.isGeolocationAvailable=function(){return this.getVisibleTypeaheadDivElement().find("[id*=lat_long]").val()},e.prototype.updateSearchParameters=function(e,t){c.updateForSuggestion(void 0,p.createSuggestion(e),t.data(),t.attr("id"))},e.prototype.isGeolocationCategory=function(e){return i.GeolocationDataProvider.CATEGORY===e.find("[id*=category]").val()},e.prototype.isGeolocationSuggestionSelected=function(e){return i.GeolocationDataProvider.CATEGORY===e.find("[id*=region_type]").val()},e.prototype.getVisibleTypeaheadDivElement=function(){return this.getDomElementId()?$("#"+this.getDomElementId()).closest("div.autocomplete"):$("div.autocomplete:visible")},e.prototype.disableLocalStorage=function(){this.getVisibleTypeaheadDivElement().find(".gcw-storeable").not("[id*=category]").each(function(e,t){$(t).removeClass("gcw-storeable")})},e.prototype.populateCurrentLocationSearchContext=function(e,t){e.val(t.regionNames.lastSearchName),this.updateSearchParameters(t,e),u.TypeaheadMessage.publish(new l.SuggestionAutoSelectedMessage(p.createSuggestion(t),e.attr("id")))},e}(n.GeolocationViewController);t.MercuryGeolocationViewController=g});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/google/AddressAutocompleteFailureMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(a){function e(e,t,o,i,n){var r=a.call(this,e,t,"AddressAutocompleteFailure",n)||this;return r.userTypedQuery=o,r.status=i,r}return __extends(e,a),e}(o.TypeaheadMetric);t.AddressAutocompleteFailureMetric=i}),define("typeahead/core/google/GoogleMapsDataProvider",["require","exports","typeahead/core/EssDataProvider","typeahead/core/google/AddressAutocompleteFailureMetric","typeahead/core/google/PoweredByGoogleLogo","typeahead/core/IListItem","typeahead/core/logging/CollectorTransport","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/Suggestion"],function(e,t,r,l,o,i,u,a,c,p,n){"use strict";t.__esModule=!0,$.getScript("https://maps.googleapis.com/maps/api/js?client=gme-expedia&channel=ess&libraries=places");var s=function(){function s(){}return s.getSuggestionResult=function(e,t){return{category:n.SuggestionCategory[n.SuggestionCategory.GOOGLEMAPS],coordinates:void 0,listItemType:i.ListItemType.Suggestion,regionNames:{displayName:s.boldMatchedSubStringInPrediction(e),fullName:e.description,lastSearchName:e.description},sourceId:e.place_id,sourceName:"GPA",type:"ADDRESS",index:t}},s.boldMatchedSubStringInPrediction=function(e){for(var t,o=e.description,i="",n=0,r=e.matched_substrings,a=0;a<r.length;a++)t=r[a],i+=o.slice(n,t.offset),i+="<B>"+o.slice(t.offset,t.offset+t.length)+"</B>",n=t.offset+t.length;return i+o.slice(n)},s.prototype.fetchData=function(o){var i=this,n=$.Deferred(),e={input:o.srchText,types:r.GoogleRequestType[r.GoogleRequestType.ADDRESS_AUTOCOMPLETE]===o.requestType?["geocode"]:void 0};return google&&google.maps&&google.maps.places&&google.maps.places.AutocompleteService?this.getGoogleAutocompleteService().getPlacePredictions(e,function(e,t){i.handlePredictionsResponse(e,t,o,n)}):p.default.log(new Error("Google maps script not loaded"),c.Severity.Excusable,a.ProblemOrigin.UniversalTypeahead),n.promise()},s.prototype.getGoogleAutocompleteService=function(){return this.googleAutocompleteService||(this.googleAutocompleteService=new google.maps.places.AutocompleteService),this.googleAutocompleteService},s.prototype.handlePredictionsResponse=function(e,t,o,i){var n=[];if(t===google.maps.places.PlacesServiceStatus.OK){if(e)for(var r=Math.min(s.MAX_RESULTS,e.length),a=0;a<r;a++)n.push(s.getSuggestionResult(e[a],a))}else(new u.CollectorTransport).log(new l.AddressAutocompleteFailureMetric(o.lob,o.domElementId,o.srchText,google.maps.places.PlacesServiceStatus[t],o.activeEssTests));n&&n.length&&n.push(this.getPoweredByGoogleListItem()),i.resolve({query:o.srchText,results:n})},s.prototype.getPoweredByGoogleListItem=function(){return new i.LabelTypeListItem("<div style='text-align:right;position:relative;top:0.5em;'><img src='"+o.POWERED_BY_GOOGLE_LOGO+"'/></div>")},s.MAX_RESULTS=5,s}();t.GoogleMapsDataProvider=s});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/google/GoogleMapsSuggestion",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSourceName=function(){return i.Optional.of(this.data.sourceName)},t.prototype.getSourceId=function(){return i.Optional.of(this.data.sourceId)},t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},t.prototype.isAddrAutoComplete=function(){return!0},t}(o.Suggestion);t.GoogleMapsSuggestion=n}),define("typeahead/core/google/PoweredByGoogleLogo",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.POWERED_BY_GOOGLE_LOGO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAASCAYAAAC0PldrAAAIHElEQVR4Ae3ZBXDbWB7H8efglpmZGW0HlhzJDpSZmZkZ3W3s2DpmZmbmKx0zM/NdoGhotxTf9x9LHY027paW85v5bBRQopn32weqasqzk5Jw7BE9nHijHo5/Rw/HfqaHYl/keldZ8GJ7qBeqZ/6PNGlPUT5DeVKNqkyc18PJ6VDPtfEfnvUJz0dmpbwfmzMW6k5YFy96pBRTkCnL4MUDiy94oS0F+ZVZlD/5qxLLfNFkz0D0fBtfKOkpCcffrFfG6vVQ4hDUc6ypQLdDFmMdMiWIcjywaOHEB8zynPEFa1pCOWnHLw2Bej5oKtDzqEC+cGyoWZ5YaTDeGer57r4LRPLRCi40liy0QR4eVB5CG2QhU3KQneG+TM/qQhvk424L1Bwt73P22d9QoFD8bVB3KxVUWTX+gqW1mvvLtbr7Z7V+z6frNM/UlFIuKAD83I2v5y69eiL3y9dPZP/s2tdyPn39ZN7UVEq5oCz8x+WvjC/SQrEv8/u/z/O9siSUKNfC8agWSbrRaIH+p3lH1Pg976jxe38gz8JzzLM/g2QhpmIuIjCwB/0cg6HjGAxEsQQtIZmCtbBnLbY4BngZptkGaQmiMHAUhbCyEJMxCxGsh6QFltruOwIv7BmEfTAQwWwsvYMCTcMqGKat6AJJCXYjD1ZcWIdZsEdK8K50gZLroez4+l4G8j1PURlfAJWaMye7Vvd+otbvTVVr7hvVmvc/ci0YyNdAidTHVPa1EzmfuH4iN0WBbnD9H7lu8PXc10CJYDCVxanvffI8nAZvloQTNenZMXYt/YyJ5Y3tgar9nkCt5n2y4Tl073+5TprPEIYSknW2ARpkWosQOkFSiijK0BtuHME2ZGMMDLSDpBMMU29bYaIYBxfW4wBGojcmw8BIWM8Vwjq40QMubMR+231TYGAYJN1QhVUYgEHYgMgdFCiCBeiLYdiJI2iO9og6St4XBgZnKpAWjm2AsmNZO+E8jdlnqzrdvS49aO4fndWLekDVlbmHMoB/MQewAorCrDML86P6E816QD35lbyhzER/SZcouwJKq0oskd9PSX9aVnm5F1RJVbKQr13IVKCU251b7Xf/WwpcqxfMkVnngm9MW+sZ6gJeD24N1BHkwUouDmI28hDGBNjTDwZGIR9hFEOiYyu2YRIkY1GFhzAABvrCnpVYbyvQAeTAyiBHKa2sNUnmY5/jvnwcvYMCbXDMmG1QBR2SJdhu+5l52NXYMsqA7EsXI/5OKBvEhnMKK7LwtePpgYy9HIpB+lbDIGmFbihLTcAzs6FAuueDUJTkW0hdO5XrhrJc/1reTPk6BfsgZMY7iZS/KumFsmihxIFMBaoNeHxmiT/6H5+7Y41esJcl7K/pmdD9N64n4tZALYQzs7EDvTMMmgtBW7GWYyUk26DDj/1wYYHt+z7bUhixMXDMVqDFznG5zX1HIdmDGbDnTvdAGpzZhGWO/2n6ojnCKIIzDNClwQ1LRmU8ETCS3aEysU5r7FHmQckAyUD9sWJgPpSlNlA4SL7O0vJNqGtfz/6bFKX+SyofyvLk1/IGNcxAX8v9JpS8QpDfX/Ha+nwoC8vplIwFYq/TUFbN+w9Zxqr93vpq3fOFWn/BJFlioYQ1UEvgzHxsRQ8Y6NdIgY6jDBI3wugGA53QxVa+IAogeQwR9EB3h27IVGwfqjLc1xWSnZgNZ5bdQYECcGabrcgubMUCPIZjtztQWPsOZpjvPRq52A7KSatKTpV3QfxcXenL61tASUFk8M7q7gIoiywl6UF1fwBKCmLONAVQlhsn8+aYX/8AVEll4pQ8h7x7grLIRj9TgWo0z8Ppsnqv1eqeyP98hX2hZClrrEDH0QpWWuIYJiMbQcx1TNWjYWCQbY8TwQbshJXdWI+obdPdEwbGwJ7ipylQH2vZdN5nK9AMHEVzx1JUeQcF2uVY+rojimJYGY8q7MdEZIy8MGTwfmHuhf5JkTbJex/fyxJdtcpLDzNob5JNrbn/mQMl2ECvNpeKn1sDV6MVjGEz/U9zWSmFYuO82tzr/PzK6fy+UFdP5o6hNP9M742ySyFL1VJrDxSIXu4NJUunvAXPVCApCfufP5p7rg1y2pMZkeswX/u+zIawF0jtwyOmvThiK5UXBhbDgwkIY7mjVKthoBRWymE0MngLbXsrN+bbS5WhQC4sRggVjvtGQ9IWQexGMR7BfjxxBwV6AptRgBIcxU7kwkoODiOCtrhtZOZhkD52m3/KiFGs+VCAdYT3fsicAer5WIcU4DGghPzcta/nfKjhFPa13HrUybW5fBlQQk5hWmXi/fL3rNnuTk5hdX6Pl79/wTwNXrJOYbIXOh9w98atgVqAx7EPx7AUHWDPSGy2la0MOY38zCp0gZWuWNXIbJONAPYhhK0YDSsTocGZbJRmuM9KJ6zAceyHD489zYyxCGMwGYdts24LOLMWi3DHkQ0sg/QqWU5KwvEf4HPMDHseDcc6QTnJUiH7EGajz8g7GPYiH2EWKoOyk/c9vAeax6zzGcryAz5+5PrJ7DIoO37QxTufhRT0C+zLvst11FrC5JQG5f7IrJd5Pjzzx56Pzh4CJc76CnryHugVPMe3OcqfYTkLymkMCpk30RnTlG62jfQLIr5gKkf+wVY29lAWWULTM2HsMah70VSgu888bIULL4hw2pqRPhEmfiMbadmbyWzE/utqSSj2nznBVB7UvWgq0N2lLSIYhxdOWL5k+Xzq/it2mdcGAah7ZV00eQlgxvFRpNfJeyc+Bn2RK32h7sf/AesqcHB02e65AAAAAElFTkSuQmCC"}),define("typeahead/core/logging/CollectorTransport",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.prototype.log=function(e){this.sendLog(e,"typeahead_client_metrics")},e.prototype.logPerformanceMetric=function(e){this.sendLog(e,"typeahead_performance")},e.prototype.sendLog=function(e,t){var o=!0;Array.isArray(e)||(o=!1);var i="//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/cl/data/"+t+".json?stream=true&persist=true&batch="+(o?"true":"false");$.ajax({contentType:"application/json; charset=UTF-8",url:i,data:JSON.stringify(e),dataType:"json",type:"POST"})},e}();t.CollectorTransport=o}),define("typeahead/core/logging/DctkClientLogErrorTransport",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity"],function(a,e,s,l){"use strict";e.__esModule=!0;var t=function(){function e(){}return e.prototype.log=function(o,i,e,n){var r=this;void 0===n&&(n={});try{if("object"!=typeof n){var t=n;(n={}).additional_info=t}i&&(n.severity=l.Severity[i]),e&&(n.problemOrigin=s.ProblemOrigin[e]),this.clientLogger?this.doClientLogging(o,i,n):a(["dctk/clientLogging","dctk/dctk"],function(e,t){r.clientLogger=e,r.doClientLogging(o,i,n)})}catch(o){}},e.prototype.doClientLogging=function(e,t,o){this.clientLogger?l.Severity.MustFix===t?this.clientLogger.logError("UniversalTypeahead",e,o):(e&&(o.message=e.message,o.name=e.name,o.stack=e.stack),this.clientLogger.logMessage("UniversalTypeahead",o)):console.error(e)},e}();e.DctkClientLogErrorTransport=t}),define("typeahead/core/logging/Element",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional","typeahead/core/IListItem"],function(e,t,o,i,n){"use strict";t.__esModule=!0;var r=function(){function e(e){void 0===e&&(e=""),this.domElementId=e,this.value="",this.mostRecentSelection=i.Optional.empty(),this.mostRecentInputValue="",this.essSuggestionCount=0,this.userHistorySuggestionCount=0,this.elementFocused=!1,this.suggestionShown=!1,this.suggestionSelected=!1,e&&(this.value=$("#"+e).val()||"")}return e.prototype.setElementFocused=function(){this.elementFocused=!0},e.prototype.setSuggestionShown=function(e){this.suggestionShown=!0,e&&e.length&&"POPULAR"===e[0].category||this.setSuggestionCount(e)},e.prototype.setSuggestionSelected=function(e){this.suggestionSelected=!0,this.mostRecentSelection=i.Optional.of(e),this.value=e.getDisplayText()},e.prototype.setMostRecentInputValue=function(e){this.suggestionSelected=!1,this.mostRecentInputValue=e,this.mostRecentSelection=i.Optional.empty(),this.value=e},e.prototype.isSuggestionShown=function(){return this.suggestionShown},e.prototype.isSuggestionSelected=function(){return this.suggestionSelected},e.prototype.getMostRecentInputValue=function(){return this.mostRecentInputValue},e.prototype.getEssSuggestionCount=function(){return this.essSuggestionCount},e.prototype.getUserHistorySuggestionCount=function(){return this.userHistorySuggestionCount},e.prototype.getMostRecentSelection=function(){return this.mostRecentSelection},e.prototype.getVal=function(){return this.value},e.prototype.setSuggestionCount=function(e){var t=this;this.userHistorySuggestionCount=0,this.essSuggestionCount=0,e&&e.forEach(function(e){if(n.ListItemType.Label!==e.listItemType)switch(e.category){case o.SuggestionCategory[o.SuggestionCategory.USERHISTORY]:t.userHistorySuggestionCount++;break;case o.SuggestionCategory[o.SuggestionCategory.GEOLOCATION]:case o.SuggestionCategory[o.SuggestionCategory.GOOGLEMAPS]:break;default:t.essSuggestionCount++}})},e}();t.Element=r}),define("typeahead/core/logging/ErrorLogger",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e){this.transport=e}return e.prototype.log=function(e,t,o,i){void 0===i&&(i={});try{this.transport.log(e,t,o,i)}catch(e){console.error(e)}},e}();t.ErrorLogger=o}),define("typeahead/core/logging/ErrorTransport",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("typeahead/core/logging/FlightOriginPopulationLogger",["require","exports","typeahead/core/logging/FlightOriginPopulationMetric","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/FlightOriginPopulationMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils"],function(e,t,o,i,n,r,a,s,l,u,c){"use strict";t.__esModule=!0;var p=function(){function e(){var o=this;this.populatedOrigin="",this.submittedOrigin="",this.latitude="",this.longitude="",u.TypeaheadMessage.subscribe(r.FlightOriginPopulationMessage.getTopic(),function(e,t){o.populatedOrigin=t.getPopulatedOrigin(),o.submittedOrigin=t.getPopulatedOrigin(),o.latitude=t.getLatitude(),o.longitude=t.getLongitude()}),u.TypeaheadMessage.subscribe(l.SuggestionSelectedMessage.getTopic(),function(e,t){t.getDomElementId()&&-1!==t.getDomElementId().indexOf("flight-origin")&&(o.submittedOrigin=t.getSuggestion().getLastSearchName().orElse(""))}),u.TypeaheadMessage.subscribe(a.InputValueEditedMessage.getTopic(),function(e,t){t.getDomElementId()&&-1!==t.getDomElementId().indexOf("flight-origin")&&(o.submittedOrigin=t.getNewInputValue())}),u.TypeaheadMessage.subscribe(s.SubmitClickedMessage.getTopic(),function(e,t){c.TypeaheadUtils.getLob()===c.Lob.Flight&&o.emitOriginPopulationMetric()})}return e.prototype.emitOriginPopulationMetric=function(){this.populatedOrigin&&n.default.log(void 0,void 0,i.ProblemOrigin.FlightOriginLogging,new o.FlightOriginPopulationMetric(this.populatedOrigin,this.submittedOrigin,this.latitude,this.longitude))},e}();t.FlightOriginPopulationLogger=p}),define("typeahead/core/logging/FlightOriginPopulationMetric",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(e,t,o,i){this.populatedOrigin=e,this.submittedOrigin=t,this.latitude=o,this.longitude=i,this.type="flightOriginPopulation"};t.FlightOriginPopulationMetric=o}),define("typeahead/core/logging/Leg",["require","exports","typeahead/core/logging/Element","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,n,r,a,s){"use strict";t.__esModule=!0;var o=function(){function i(){}return i.isOrigin=function(e){return-1<(e=e.toLowerCase()).indexOf("origin")||-1<e.indexOf("from")||-1<e.indexOf("departure")||-1<e.indexOf("drop")},i.isDestination=function(e){return-1<(e=e.toLowerCase()).indexOf("dest")||-1<e.indexOf("to")||-1<e.indexOf("arrival")||-1<e.indexOf("near")||-1<e.indexOf("pick")||0===e.indexOf("location")||-1<e.indexOf("uta-search-input")||-1<e.indexOf("opensearch")},i.prototype.getElement=function(e){var t=i.isOrigin(e),o=i.isDestination(e);if(e){if(t)return this.origin||(this.origin=new n.Element(e)),this.origin;if(o)return this.destination||(this.destination=new n.Element(e)),this.destination}return t||o||s.default.log(new Error("Could not determine origin or destination type for domElementId - "+e),a.Severity.MustFix,r.ProblemOrigin.ClientOfUniversalTypeahead),e?new n.Element(e):new n.Element},i.prototype.getOriginElement=function(){return this.origin?this.origin:this.getElement("origin")},i.prototype.getDestinationElement=function(){return this.destination?this.destination:this.getElement("destination")},i}();t.Leg=o}),define("typeahead/core/logging/OmnitureLogger",["require","exports","typeahead/core/logging/Element","typeahead/core/logging/Leg","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/Suggestion","typeahead/core/TypeaheadUtils","typeahead/core/util/Optional"],function(e,t,o,i,n,r,a,s,u,c,p,g,d,h,y,f,m,v){"use strict";t.__esModule=!0;var l=function(){function l(){var o=this;this.rfrrIdPrefix="",this.isAutoSelected=!1,this.resetLoggerState(),y.TypeaheadMessage.subscribe(s.ElementFocusedMessage.getTopic(),function(e,t){o.getElement(t.getDomElementId()).setElementFocused()}),y.TypeaheadMessage.subscribe(h.SuggestionShownMessage.getTopic(),function(e,t){o.getElement(t.getDomElementId()).setSuggestionShown(t.getShownSuggestions()),o.mostRecentElementInteracted=v.Optional.of(o.getElement(t.getDomElementId())),o.activeESSTests=t.getActiveESSTests()}),y.TypeaheadMessage.subscribe(c.InputValueEditedMessage.getTopic(),function(e,t){o.getElement(t.getDomElementId()).setMostRecentInputValue(t.getNewInputValue()),t.getNewInputValue()&&(o.mostRecentElementInteracted=v.Optional.of(o.getElement(t.getDomElementId())))}),y.TypeaheadMessage.subscribe(g.SuggestionAutoSelectedMessage.getTopic(),function(e,t){o.getElement(t.getDomElementId()).setSuggestionSelected(t.getSuggestion()),o.isAutoSelected=!0}),y.TypeaheadMessage.subscribe(d.SuggestionSelectedMessage.getTopic(),function(e,t){o.getElement(t.getDomElementId()).setSuggestionSelected(t.getSuggestion()),o.mostRecentElementInteracted=v.Optional.of(o.getElement(t.getDomElementId()))}),y.TypeaheadMessage.subscribe(p.SubmitClickedMessage.getTopic(),function(e,t){o.rfrrIdPrefix=t.getRfrrIdPrefix()}),y.TypeaheadMessage.subscribe(u.FormSubmittedMessage.getTopic(),function(e,t){o.submitTrackingData(t)})}return l.getLegIndex=function(e){var t=e.replace(/\D/g,"");return t?parseInt(t,10)-1:0},l.getBasicReport=function(e,t,o,i,n,r,a,s){return[l.getLaunchView(r),l.getWizardName(e,r),l.getTab(t),l.getShortLob(t,o,i,n),a,s].filter(Boolean).join("|")},l.getWizardName=function(e,t){var o;if(e)switch(e){case"FLT.SR|UpdateSearch":case"HOT.SR|UpdateSearch":case"Open.Search|UpdateSearch":o="UpdateSearch";break;default:o="CoreWzd"}else if(t)switch(t){case"Flights.Search":case"Hotels.Search":o="UpdateSearch";break;default:o="CoreWzd"}return o},l.getShortLob=function(e,t,o,i){switch(e){case m.Lob.Flight:switch(t){case m.FlightType.OneWay:return"F.OW";case m.FlightType.RoundTrip:return"F.RT";case m.FlightType.MultiDestination:return"F.MD";default:return"-"}case m.Lob.Hotel:return"H";case m.Lob.VacationRental:return"VR";case m.Lob.Package:switch(o){case m.PackageType.FlightHotelCar:return"FHC";case m.PackageType.HotelCar:return"HC";case m.PackageType.FlightCar:return"FC";case m.PackageType.FlightHotel:return"FH";default:return"-"}case m.Lob.Activity:return"LX";case m.Lob.Rail:switch(i){case m.RailType.OneWay:return"R.OW";case m.RailType.RoundTrip:return"R.RT";default:return"-"}case m.Lob.Cruise:return"CR";case m.Lob.Car:return"C";case m.Lob.OpenSearch:return"OS";default:return"-"}},l.getLaunchView=function(e){return-1<(e=e.toLowerCase()).indexOf("home")?"Home":-1<e.indexOf("flight")?"FLT":-1<e.indexOf("hotels.search")?"HOT.SR":-1<e.indexOf("hotel")?"HTL":-1<e.indexOf("vacationrental")?"VR":-1<e.indexOf("pack")?"PKG":-1<e.indexOf("car")?"CAR":-1<e.indexOf("cru")?"CRU":-1<e.indexOf("lx")?"LX":-1<e.indexOf("rail")?"RAIL":-1<e.indexOf("open")?"OPEN":e},l.getTab=function(e){switch(e){case m.Lob.Flight:return"Flights";case m.Lob.Hotel:return"Hotels";case m.Lob.Package:return"Package";case m.Lob.Car:return"Car";case m.Lob.Cruise:return"Cruise";case m.Lob.Activity:return"Activity";case m.Lob.Rail:return"Rails";case m.Lob.VacationRental:return"VacationRental";case m.Lob.OpenSearch:return"OpenSearch";default:return"Unknown"}},l.getSuggestionInfo=function(e){var t=e.getSearchedRegion(),o=e.getSelectedRegion();return t===o&&(o="-"),e.getSourceName().orElse("-")+":"+t+"|"+e.getType().orElse("-")+"|R#"+e.getRelationInfo().orElse("-")+"|"+o+"|"+e.getRegionNames().orElse(l.emptyRegionNames).lastSearchName+(l.isSuggestionInCategory(e,f.SuggestionCategory.USERHISTORY)?"|"+f.SuggestionCategory[f.SuggestionCategory.USERHISTORY]:"")},l.isSuggestionInCategory=function(e,t){return f.SuggestionCategory[t]===e.getCategory().orElse("")},l.getMultiFlightSuggestionInfo=function(e){return e.getSourceName().orElse("-")+":"+e.getSourceId().orElse("-")+"|"+e.getType().orElse("-")},l.prototype.setMostRecentElementInteracted=function(e){this.mostRecentElementInteracted=e},l.prototype.getElement=function(e){var t=l.getLegIndex(e);return this.legs[t]||(this.legs[t]=new i.Leg),this.legs[t].getElement(e)},l.prototype.getEvar48=function(e,t){if(e===m.Lob.Flight&&t===m.FlightType.MultiDestination)return this.getMultiFlightEvar48();var o=this.legs[0].getDestinationElement();return o.getMostRecentSelection().isPresent()?l.getSuggestionInfo(o.getMostRecentSelection().get()):"-:-|-|R#-|-|"+(o.getVal()||"TANoneSelected")},l.prototype.getProp73=function(e,t,o){if(m.Lob.Flight===e&&t===m.FlightType.MultiDestination)return this.getMultiFlightProp73();if(this.isFlightInvolved(e,o)||m.Lob.Car===e||m.Lob.Rail===e){var i="",n=this.legs[0].getOriginElement();if(n.getMostRecentSelection().isPresent())i=l.getSuggestionInfo(n.getMostRecentSelection().get());else i="-:-|-|R#-|-|"+(n.getVal()||"TANoneSelected");return i}return m.Lob.Hotel===e||m.Lob.Activity===e||m.Lob.Package===e&&o===m.PackageType.HotelCar?"-:-|-|R#-|-|OriginNotApplicable":""},l.prototype.getProp74=function(e,t){var o='"'+this.mostRecentElementInteracted.orElse(l.emptyElement).getMostRecentInputValue()+'"';if(e===m.Lob.Flight&&t===m.FlightType.MultiDestination){for(var i=[],n=[],r=0,a=this.legs;r<a.length;r++){var s=a[r];i.push(s.getOriginElement().getVal()),n.push(s.getDestinationElement().getVal())}o+="."+i.join("#")+"."+n.join("#")}return o},l.prototype.getTypeaheadTrigger=function(){var e="";return this.mostRecentElementInteracted.isPresent()?this.mostRecentElementInteracted.get().isSuggestionShown()?(e="TAShow",this.mostRecentElementInteracted.get().isSuggestionSelected()?this.mostRecentElementInteracted.get().getMostRecentInputValue()?e+=".TASelection":e+=".TAFocus":this.mostRecentElementInteracted.get().getMostRecentInputValue()||!this.mostRecentElementInteracted.get().getVal()?e+=".TANoSelection":e+=".TAPrevSearch"):(e="TANoShow",this.mostRecentElementInteracted.get().getMostRecentInputValue()||(e+=".TAPrevSearch")):e=this.isAutoSelected?"TANoShow.TAAutoSelection":"TANoShow.TAPrevSearch",e},l.prototype.getEventString=function(){if(this.mostRecentElementInteracted.isPresent()&&this.mostRecentElementInteracted.get().isSuggestionShown()){var e=this.mostRecentElementInteracted.get().getMostRecentInputValue(),t="event45";return t=e?"event46="+e.length+","+t:"event46=0,"+t,this.mostRecentElementInteracted.get().getMostRecentSelection().isPresent()&&(t="event44="+this.mostRecentElementInteracted.get().getMostRecentSelection().get().getPosition()+","+t),t}return""},l.prototype.getHierarchyCode=function(){return this.mostRecentElementInteracted.orElse(l.emptyElement).getMostRecentSelection().isPresent()?this.mostRecentElementInteracted.get().getMostRecentSelection().get().getHierarchyCode():"DL#-"},l.prototype.getSelectedSuggestionPostion=function(){return this.mostRecentElementInteracted.orElse(l.emptyElement).getMostRecentSelection().isPresent()?this.mostRecentElementInteracted.get().getMostRecentSelection().get().getPosition().toString():"-"},l.prototype.getInstrumentationValue=function(e){return[-1<[m.Lob.Flight,m.Lob.Hotel].indexOf(e)?this.getHierarchyCode():"L#"+this.getSelectedSuggestionPostion(),"ESS#"+this.mostRecentElementInteracted.orElse(l.emptyElement).getEssSuggestionCount()].filter(Boolean).join("|")},l.prototype.getTADetails=function(e){return[this.getTypeaheadTrigger(),this.getInstrumentationValue(e)].filter(Boolean).join("|")},l.prototype.getTrackingData=function(e,t){var o=m.TypeaheadUtils.getLob(),i=m.TypeaheadUtils.getFlightType(o),n=m.TypeaheadUtils.getRailType(o),r=m.TypeaheadUtils.getPackageType(),a=m.TypeaheadUtils.getClientId();return e?this.getValidFormTrackingdata(t,o,i,r,n,a):this.getInvalidFormTrackingdata(t,o,i,r,n,a)},l.prototype.submitTrackingData=function(e){try{var t=e.getContext();if(e.isFormValid()){var o=this.getTrackingData(!0,t);m.TypeaheadUtils.submitToOmniture(o,this.activeESSTests),this.resetLoggerState()}else{o=this.getTrackingData(!1,t);m.TypeaheadUtils.submitToOmniture(o,null),this.resetLoggerState()}}catch(e){a.default.log(new Error("Error occurred while submitting typeahead tracking data to Omniture"),r.Severity.Excusable,n.ProblemOrigin.UniversalTypeahead,"StackTrace:\n"+e.stack),console.error("Error occurred while submitting typeahead tracking data to Omniture.\nCause:\n"+e.stack)}},l.prototype.resetLoggerState=function(){this.mostRecentElementInteracted=v.Optional.empty(),this.legs=[new i.Leg],this.activeESSTests=""},l.prototype.getValidFormTrackingdata=function(e,t,o,i,n,r){this.populateNonInteractedElements();var a=(this.rfrrIdPrefix?this.rfrrIdPrefix+"|"+l.getTab(t)+"|"+l.getShortLob(t,o,i,n)+"|"+e.locale+"|"+e.siteid:l.getBasicReport(this.rfrrIdPrefix,t,o,i,n,r,e.locale,e.siteid))+"|"+this.getTADetails(t);return{eVar28:a,eVar48:this.getEvar48(t,o),eventString:this.getEventString(),prop16:a,prop73:this.getProp73(t,o,i),prop74:this.getProp74(t,o)}},l.prototype.getInvalidFormTrackingdata=function(e,t,o,i,n,r){var a,s;this.rfrrIdPrefix?a={eVar28:s=this.rfrrIdPrefix+"|"+l.getShortLob(t,o,i,n)+"|"+e.locale+"|"+e.siteid+"|Form-Invalid",prop16:s}:a={eVar28:s=l.getBasicReport(this.rfrrIdPrefix,t,o,i,n,r,e.locale,e.siteid)+"|Form-Invalid",prop16:s};return a},l.prototype.getMultiFlightEvar48=function(){for(var e="",t=0,o=this.legs;t<o.length;t++){var i=o[t];e+=(i.getDestinationElement().getMostRecentSelection().isPresent()?l.getMultiFlightSuggestionInfo(i.getDestinationElement().getMostRecentSelection().get()):"-:-|-")+"#"}return e.slice(0,-1)},l.prototype.getMultiFlightProp73=function(){for(var e="",t=0,o=this.legs;t<o.length;t++){var i=o[t];e+=(i.getOriginElement().getMostRecentSelection().isPresent()?l.getMultiFlightSuggestionInfo(i.getOriginElement().getMostRecentSelection().get()):"-:-|-")+"#"}return e.slice(0,-1)},l.prototype.populateNonInteractedElements=function(){var i=this;$("input[data-provide=utypeahead]:visible").each(function(e,t){var o=$(t).attr("id");i.getElement(o)})},l.prototype.isFlightInvolved=function(e,t){return m.Lob.Flight===e||m.Lob.Package===e&&(m.PackageType.FlightCar===t||m.PackageType.FlightHotelCar===t||m.PackageType.FlightHotel===t)},l.emptyRegionNames={fullName:"-",lastSearchName:"-"},l.emptyEssId={sourceId:"-",sourceName:"-"},l.emptyElement=new o.Element,l}();t.OmnitureLogger=l}),define("typeahead/core/logging/PerformanceMetrics",["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils"],function(e,t,a,s){"use strict";t.__esModule=!0;var o=function(){function o(){this.entries=[],this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING=10,this.METRIC_NAME="UtaPerformanceMetric"}return o.getAdditionalMetric=function(){return{deviceType:s.TypeaheadUtils.getDeviceType(),guid:s.TypeaheadUtils.getGuid(),lob:s.Lob[s.TypeaheadUtils.getLob()],locale:s.TypeaheadUtils.getLocale(),pageId:s.TypeaheadUtils.getPageId(),pointOfSale:s.TypeaheadUtils.getPointOfSale(),siteId:s.TypeaheadUtils.getSiteId(),userAgent:navigator.userAgent}},o.prototype.logRequest=function(e,t,o){var i={inputElementId:t,query:o,timestamp:Date.now(),triggerType:e};this.entries.push({request:i})},o.prototype.logResponse=function(e,t,o,i){var n=this.getRequestMetricEntry(e,t);if(n){var r=Date.now();n.response={inputElementId:e,latency:r-n.request.timestamp,query:t,suggestionCount:o,timestamp:r},!this.activeEssTests&&i&&(this.activeEssTests=i)}},o.prototype.getAggregatedMetric=function(){if(this.entries.length){for(var e={},t=this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING<this.entries.length?this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING:this.entries.length,o=0;o<t;o++){var i=this.entries[o];i.response&&(e["latency"+o]=i.response.latency)}e.latencyMedian=this.getMedianLatency();var n=this.getWorstLatencyMetric();e.queryWorst=n?this.getWorstLatencyMetric().response.query:void 0,e.latencyWorst=n?this.getWorstLatencyMetric().response.latency:void 0;var r=this.entries[this.entries.length-1];return e.queryLast=r.request.query,e.latencyLast=r.response?r.response.latency:void 0,e.totalTriggers=this.entries.length,e.totalSuccess=this.getSuccessMetrics().length,e.inputElementId=this.entries[0].request.inputElementId,e.lob=s.Lob[s.TypeaheadUtils.getLob()],e.variants=[a.abTest.getActiveClientTests(),this.activeEssTests].filter(Boolean).join("|"),e.name=this.METRIC_NAME,e}},o.prototype.getAllEntries=function(){for(var e=[],t=0;t<this.entries.length;t++)e.push($.extend(this.entries[t].request,o.getAdditionalMetric())),this.entries[t].response&&e.push($.extend(this.entries[t].response,o.getAdditionalMetric()));return e},o.prototype.getRequestMetricEntry=function(e,t){for(var o=0;o<this.entries.length;o++){var i=this.entries[o];if(i.request.inputElementId===e&&i.request.query===t&&!i.response)return i}},o.prototype.getWorstLatencyMetric=function(){for(var e=void 0,t=0;t<this.entries.length;t++){var o=this.entries[t];o.response&&(!e||e.response.latency<o.response.latency)&&(e=o)}return e},o.prototype.getMedianLatency=function(){var e=void 0,t=this.getSuccessMetrics();if(t.sort(function(e,t){return e.response.latency-t.response.latency}),t.length){var o=Math.floor(t.length/2);e=t.length%2?t[o].response.latency:(t[o-1].response.latency+t[o].response.latency)/2}return e},o.prototype.getSuccessMetrics=function(){return this.entries.filter(function(e){return e.response})},o}();t.PerformanceMetrics=o}),define("typeahead/core/logging/PerformanceMetricsLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/PerformanceMetrics","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionReadyMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage"],function(e,t,o,i,n,r,a,s,l,u){"use strict";t.__esModule=!0;var c=function(){function e(){var o=this;this.TRIGGER_TYPE_FOCUS="focus",this.TRIGGER_TYPE_INPUT="input",this.metrics=new i.PerformanceMetrics,l.TypeaheadMessage.subscribe(r.ElementFocusedMessage.getTopic(),function(e,t){o.metrics.logRequest(o.TRIGGER_TYPE_FOCUS,t.getDomElementId(),"")}),l.TypeaheadMessage.subscribe(a.InputValueEditedMessage.getTopic(),function(e,t){""!==t.getNewInputValue()&&o.metrics.logRequest(o.TRIGGER_TYPE_INPUT,t.getDomElementId(),t.getNewInputValue())}),l.TypeaheadMessage.subscribe(s.SuggestionReadyMessage.getTopic(),function(e,t){o.metrics.logResponse(t.getDomElementId(),t.getQuery(),t.getSuggestions()?t.getSuggestions().length:0,t.getActiveEssTests())}),l.TypeaheadMessage.subscribe(u.UserExitedMessage.getTopic(),function(){o.emitMetrics()})}return e.prototype.resetLogger=function(){this.metrics=new i.PerformanceMetrics},e.prototype.emitMetrics=function(){this.emitToSplunk(),this.emitToCollector(),this.resetLogger()},e.prototype.emitToSplunk=function(){var e=this.metrics.getAggregatedMetric();e&&n.default.log(void 0,void 0,void 0,e)},e.prototype.emitToCollector=function(){var e=this.metrics.getAllEntries();e&&e.length&&(new o.CollectorTransport).logPerformanceMetric(e)},e}();t.PerformanceMetricsLogger=c}),define("typeahead/core/logging/ProblemOrigin",["require","exports"],function(e,t){"use strict";var o;t.__esModule=!0,(o=t.ProblemOrigin||(t.ProblemOrigin={}))[o.Unspecified=0]="Unspecified",o[o.ExpediaSuggestService=1]="ExpediaSuggestService",o[o.UniversalTypeahead=2]="UniversalTypeahead",o[o.ClientOfUniversalTypeahead=3]="ClientOfUniversalTypeahead",o[o.DataCaptureToolkit=4]="DataCaptureToolkit",o[o.TypeaheadInteractionMetric=5]="TypeaheadInteractionMetric",o[o.FlightOriginLogging=6]="FlightOriginLogging"}),define("typeahead/core/logging/ScanabilityLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/ScanabilityMetric","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,o,i,n,r,a){"use strict";t.__esModule=!0;var s=function(){function e(){var o=this;this.activeESSTests="",a.TypeaheadMessage.subscribe(r.SuggestionShownMessage.getTopic(),function(e,t){o.domElementId=t.getDomElementId(),o.lob=t.getLob(),o.activeESSTests=t.getActiveESSTests(),o.suggestionShownTimestamp=Date.now()}),a.TypeaheadMessage.subscribe(n.SuggestionSelectedMessage.getTopic(),function(e,t){o.domElementId&&(o.selectionMethod=t.getSelectionMethod(),o.suggestionSelectedTimestamp=Date.now(),o.emitScanabilityMetric(),o.domElementId=void 0,o.lob=void 0,o.selectionMethod=void 0,o.suggestionShownTimestamp=0,o.suggestionSelectedTimestamp=0)})}return e.prototype.emitScanabilityMetric=function(){(new o.CollectorTransport).log(new i.ScanabilityMetric(this.lob,this.domElementId,this.suggestionShownTimestamp,this.suggestionSelectedTimestamp,this.selectionMethod,this.activeESSTests))},e}();t.ScanabilityLogger=s});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/logging/ScanabilityMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(s){function e(e,t,o,i,n,r){var a=s.call(this,e,t,"scan",r)||this;return a.latency=i-o,a.selectionMethod=n,a}return __extends(e,s),e}(o.TypeaheadMetric);t.ScanabilityMetric=i}),define("typeahead/core/logging/SelectionToSubmissionLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/SelectionToSubmissionMetric","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,o,i,n,r,a,s){"use strict";t.__esModule=!0;var l=function(){function e(){var o=this;this.activeESSTests="",s.TypeaheadMessage.subscribe(a.SuggestionShownMessage.getTopic(),function(e,t){o.activeESSTests=t.getActiveESSTests()}),s.TypeaheadMessage.subscribe(r.SuggestionSelectedMessage.getTopic(),function(e,t){o.domElementId=t.getDomElementId(),o.lob=t.getLob(),o.suggestionSelectedTimestamp=Date.now()}),s.TypeaheadMessage.subscribe(n.SubmitClickedMessage.getTopic(),function(e,t){o.domElementId&&(o.submitClickedTimestamp=Date.now(),o.emitSelectionToSubmissionMetric(),o.domElementId=void 0,o.lob=void 0,o.suggestionSelectedTimestamp=0,o.submitClickedTimestamp=0)})}return e.prototype.emitSelectionToSubmissionMetric=function(){(new o.CollectorTransport).log(new i.SelectionToSubmissionMetric(this.lob,this.domElementId,this.suggestionSelectedTimestamp,this.submitClickedTimestamp,this.activeESSTests))},e}();t.SelectionToSubmissionLogger=l});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/logging/SelectionToSubmissionMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(a){function e(e,t,o,i,n){var r=a.call(this,e,t,"selectionToSubmission",n)||this;return r.latency=i-o,r}return __extends(e,a),e}(o.TypeaheadMetric);t.SelectionToSubmissionMetric=i}),define("typeahead/core/logging/Severity",["require","exports"],function(e,t){"use strict";var o;t.__esModule=!0,(o=t.Severity||(t.Severity={}))[o.MustFix=0]="MustFix",o[o.Excusable=1]="Excusable",o[o.Negligible=2]="Negligible"}),define("typeahead/core/logging/SuggestionEngagementLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/SuggestionEngagementMetric","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/TypeaheadUtils"],function(e,t,o,i,n,r,a,s,l,u,c){"use strict";t.__esModule=!0;var p=function(){function e(){var o=this;this.isSuggestionShown=!1,this.isSuggestionSelected=!1,this.userTypedQuery="",this.displayText="",this.activeESSTests=[],l.TypeaheadMessage.subscribe(n.ElementFocusedMessage.getTopic(),function(e,t){o.lob=t.getContext().lob,o.domElementId=t.getDomElementId(),o.displayText=t.getElementValue()}),l.TypeaheadMessage.subscribe(s.SuggestionShownMessage.getTopic(),function(e,t){o.isSuggestionShown=!0,o.activeESSTests.push(t.getActiveESSTests())}),l.TypeaheadMessage.subscribe(r.InputValueEditedMessage.getTopic(),function(e,t){o.lob=t.getLob(),o.domElementId=t.getDomElementId(),o.isSuggestionSelected=!1,o.userTypedQuery=t.getNewInputValue(),o.displayText=t.getNewInputValue(),o.selectedSuggestion=void 0}),l.TypeaheadMessage.subscribe(a.SuggestionSelectedMessage.getTopic(),function(e,t){o.lob=t.getLob(),o.selectedSuggestion=t.getSuggestion()}),l.TypeaheadMessage.subscribe(u.UserExitedMessage.getTopic(),function(e,t){o.domElementId&&(o.emitMetric(),o.domElementId=void 0,o.lob=void 0,o.isSuggestionShown=!1,o.isSuggestionSelected=!1,o.userTypedQuery="",o.displayText="",o.selectedSuggestion=void 0,o.activeESSTests=[])})}return e.prototype.updatePackageType=function(){var e=c.TypeaheadUtils.getPackageType();e!==c.PackageType.Unknown&&(this.lob="PACKAGES:"+function(e){switch(e){case c.PackageType.FlightHotelCar:return"FHC";case c.PackageType.HotelCar:return"HC";case c.PackageType.FlightCar:return"FC";case c.PackageType.FlightHotel:return"FH";default:return"-"}}(e))},e.prototype.removeDuplicateESSTests=function(){for(var e=[],t=0,o=this.activeESSTests;t<o.length;t++){var i=o[t];"string"==typeof i&&0<i.length&&(e=e.concat(i.split("|")))}for(e=e.sort().filter(function(e,t,o){return!t||e!==o[t-1]});0===e.indexOf("");)e.shift();this.activeESSTests=e},e.prototype.emitMetric=function(){this.updatePackageType(),this.removeDuplicateESSTests(),(new o.CollectorTransport).log(new i.SuggestionEngagementMetric(this.lob,this.domElementId,this.userTypedQuery,this.displayText,this.isSuggestionShown,this.selectedSuggestion,this.activeESSTests.join("|")))},e}();t.SuggestionEngagementLogger=p});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/logging/SuggestionEngagementMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(l){function e(e,t,o,i,n,r,a){var s=l.call(this,e,t,"SuggestionEngagement",a)||this;return s.suggestionShown=n,s.userTypedQuery=o,r?(s.suggestionSelected=!0,s.text=r.getDisplayText(),s.selectedSuggestionEssid=r.getSourceName().orElse("-")+":"+r.getSourceId().orElse("-"),s.isAddrAutocomplete=r.isAddrAutoComplete()):(s.suggestionSelected=!1,s.text=i,s.selectedSuggestionEssid=void 0),s}return __extends(e,l),e}(o.TypeaheadMetric);t.SuggestionEngagementMetric=i}),define("typeahead/core/logging/TypeaheadErrorLogger",["require","exports","typeahead/core/logging/DctkClientLogErrorTransport","typeahead/core/logging/ErrorLogger"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=new i.ErrorLogger(new o.DctkClientLogErrorTransport);t.default={log:function(e,t,o,i){void 0===i&&(i={}),n.log(e,t,o,i)}}});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/logging/TypeaheadInteractionLogger",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/SuggestionEngagementLogger","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/TypeaheadInteractionMetric"],function(e,t,o,i,n,r){"use strict";t.__esModule=!0;var a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.emitMetric=function(){this.updatePackageType(),this.removeDuplicateESSTests();var e=new r.TypeaheadInteractionMetric(this.lob,this.domElementId,this.userTypedQuery,this.isSuggestionShown,this.selectedSuggestion,this.activeESSTests.join("|"));e=this.cleanUpMetric(e),n.default.log(void 0,void 0,o.ProblemOrigin.TypeaheadInteractionMetric,e)},t.prototype.cleanUpMetric=function(o){var i={};return Object.keys(o).forEach(function(e,t){e&&void 0!==o[e]&&(i[e]=o[e].toString())}),i},t}(i.SuggestionEngagementLogger);t.TypeaheadInteractionLogger=a});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/logging/TypeaheadInteractionMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(s){function e(e,t,o,i,n,r){var a=s.call(this,e,t,"TypeaheadInteraction",r)||this;return a.suggestionShown=i,a.userTypedQuery=o,a.inputLength=o.length,n?(a.suggestionSelected=!0,a.selectionDepth=n.getPosition().toString(),a.isAddrAutocomplete=n.isAddrAutoComplete()):(a.suggestionSelected=!1,a.selectionDepth="undefined",a.isAddrAutocomplete=!1),a}return __extends(e,s),e}(o.TypeaheadMetric);t.TypeaheadInteractionMetric=i}),define("typeahead/core/logging/TypeaheadMetric",["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils"],function(e,t,n,r){"use strict";t.__esModule=!0;var o=function(e,t,o,i){this.contentFlavor="uTA",this.deviceType=r.TypeaheadUtils.getDeviceType(),this.guid=r.TypeaheadUtils.getGuid(),this.lob=e,this.locale=r.TypeaheadUtils.getLocale(),this.pageId=r.TypeaheadUtils.getPageId(),this.pointOfSale=r.TypeaheadUtils.getPointOfSale(),this.siteId=r.TypeaheadUtils.getSiteId(),this.textInputElementId=t,this.timestamp=Date.now(),this.type=o,this.userAgent=navigator.userAgent,this.variants=[n.abTest.getActiveClientTests(),i].filter(Boolean).join("|")};t.TypeaheadMetric=o}),define("typeahead/core/plugins/CompositePageLoadHandler",["require","exports","typeahead/core/context","uitk","typeahead/client/ActivitiesSearchResultsPageHandler","typeahead/client/CarSearchResultsPageHandler","typeahead/client/ClientHandlerRegistry","typeahead/client/FlightSearchResultsPageHandler","typeahead/client/HotelSearchResultsPageHandler","typeahead/client/MercuryWizardHandler","typeahead/client/OpenSearchPageHandler","typeahead/client/UserAccountPageHandler","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/plugins/ExecutionHelper","typeahead/core/plugins/PrefetchLoader","typeahead/core/TypeaheadUtils"],function(e,a,s,t,o,i,n,l,u,c,p,g,d,h,r,y){"use strict";a.__esModule=!0,a.prefetchInstance=r.PrefetchLoader.getInstance();var f=function(){function r(){}return r.getInstance=function(){return r.instance||(r.instance=new r),r.instance},r.prototype.handlePageLoad=function(t){if(!r.isPageLoadHandled){var e=h.abTest.getAllExperimentsAttribute(t.get(d.DefaultPluginAssembly.experimentIdentifier),"id").join("|"),o={maxresults:10},i={clientId:y.TypeaheadUtils.getClientId(),deviceType:y.TypeaheadUtils.getDeviceType(),expuserid:y.TypeaheadUtils.getExpUserId(),guid:y.TypeaheadUtils.getGuid(),lob:void 0,locale:s.locale,serviceUrl:s.serviceUrl,siteid:s.siteid},n=t.get(d.DefaultPluginAssembly.pageLoadHandlerIdentifier);a.prefetchInstance.prefetch(e).done(function(){a.prefetchInstance.getPrefetchExperiments().done(function(e){h.abTest.evaluateAllExperiments(t,e)})}),n&&0<n.length&&n.map(function(e){e.handlePageLoad(o,i)}),this.registerClients(),r.isPageLoadHandled=!0}},r.prototype.registerClients=function(){n.ClientHandlerRegistry.registerClient(new o.ActivitiesSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new i.CarSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new l.FlightSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new u.HotelSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new c.MercuryWizardHandler),n.ClientHandlerRegistry.registerClient(new p.OpenSearchPageHandler),n.ClientHandlerRegistry.registerClient(new g.UserAccountPageHandler),n.ClientHandlerRegistry.handlePageLoad()},r.isPageLoadHandled=!1,r}();a.CompositePageLoadHandler=f}),define("typeahead/core/plugins/DefaultPluginAssembly",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function e(){this.plugins=[]}return e.prototype.registerPlugin=function(e){var t,o;t=this.plugins,o=e,t.indexOf(o)<0&&t.push(o)},e.prototype.get=function(t){return this.plugins.filter(function(e){return t(e)})},e.requestParamModifierIdentifier=function(e){return"modifyParameters"in e},e.suggestionsModifierIdentifier=function(e){return"modifySuggestions"in e},e.dropDownHideHandler=function(e){return"function"==typeof e.handleDropDownHide},e.dropDownShowHandler=function(e){return"function"==typeof e.handleDropDownShow},e.dropdownContentHandler=function(e){return"function"==typeof e.handleContentToShow},e.onFocusSuggestionsProviderIdentifier=function(e){return"function"==typeof e.suggestOnFocus},e.pageLoadHandlerIdentifier=function(e){return"function"==typeof e.handlePageLoad},e.experimentIdentifier=function(e){return"function"==typeof e.getExperiments},e}();t.DefaultPluginAssembly=i}),define("typeahead/core/plugins/ExecutionHelper",["require","exports","jquery","typeahead/core/ABTest"],function(e,r,t,o){"use strict";r.__esModule=!0;var l={clients:"clientId",deviceTypes:"deviceType",lobs:"lob",locales:"locale",siteids:"siteid",tabs:"tab"};function a(e,t){void 0===t&&(t=r.abTest);var o=t.getAndLog(e);return void 0!==e.value?e.value===o.value:0<o.value}r.abTest=new o.ABTest,r.evaluateExperiment=a,r.shouldExecute=function(e,t,o){if(void 0===o&&(o=r.abTest),!t||!t.length||!e)return!0;var i=function(e,t){for(var o,i,n=0;n<t.length;n++){o=t[n];var r=!0;for(var a in o)if("experiment"!==a&&o.hasOwnProperty(a)&&o[a]){var s=(i=a,l.hasOwnProperty(i)?l[i]:null);if(s&&o[a].indexOf(e[s])<0){r=!1;break}}if(r)return o}}(e,t);if(i){var n=i.experiment;return!n||a(n,o)}return!1}}),define("typeahead/core/plugins/PrefetchLoader",["require","exports","typeahead/core/context","typeahead/core/TypeaheadUtils"],function(e,t,l,u){"use strict";t.__esModule=!0;var o=function(){function e(){this.hintsDeferred=$.Deferred(),this.experimentsDeferred=$.Deferred(),this.activeSearchDeferred=$.Deferred(),this.flightOriginSuggestion=$.Deferred()}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.prefetch=function(e){var t=this,o=$.Deferred(),i=(u.TypeaheadUtils.getClientId(),u.TypeaheadUtils.getDeviceType(),u.TypeaheadUtils.getExpUserId()),n=u.TypeaheadUtils.getGuid(),r=l.locale,a=l.serviceUrl+"/api/v4/prefetch/?format=json&siteid="+l.siteid+"&locale="+r+"&guid="+n+"&expuserid="+i+"&evalExp="+e,s=u.TypeaheadUtils.getUserLocation();return s&&(a+="&loc="+s),this.makePrefetchRequest(a).done(function(e){t.populatePrefetchData(e)}).always(function(e){return o.resolve(e)}),o.promise()},e.prototype.getPrefetchExperiments=function(){return this.experimentsDeferred.promise()},e.prototype.getPrefetchCarRentalHints=function(){return this.hintsDeferred.promise()},e.prototype.getPrefetchFlightOriginSuggestion=function(){return this.flightOriginSuggestion.promise()},e.prototype.getPrefetchActiveSearch=function(){return this.activeSearchDeferred.promise()},e.prototype.makePrefetchRequest=function(e){var t=$.Deferred(),o={};return $.getJSON(e).done(function(e){t.resolve(e)}).fail(function(){t.reject(o)}),t.promise()},e.prototype.populatePrefetchData=function(e){this.experimentsDeferred.resolve(e.experiments?e.experiments:{}),this.hintsDeferred.resolve(e.carRentalHints?e.carRentalHints:[]),this.activeSearchDeferred.resolve(e.activeSearch?e.activeSearch:{}),this.flightOriginSuggestion.resolve(e.flightOriginSuggestion||null)},e}();t.PrefetchLoader=o}),define("typeahead/core/plugins/SuggestionsProvider",["require","exports","jquery","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=function(){function e(e){this.suggestionsModifiers=[],this.suggestionsModifiers=e.get(i.DefaultPluginAssembly.suggestionsModifierIdentifier)}return e.prototype.modifySuggestions=function(t,o,i){return void 0===i&&(i={}),t&&0<t.length&&this.suggestionsModifiers&&0<this.suggestionsModifiers.length?(this.suggestionsModifiers.map(function(e){return e.modifySuggestions(t,o,i)}),t):[]},e}();t.SuggestionsProvider=n}),define("typeahead/core/message/ElementFocusedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o){this.elementValue=e,this.domElementId=o,this.context=t}return e.getTopic=function(){return"typeahead.element_focused"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getElementValue=function(){return this.elementValue},e.prototype.getContext=function(){return this.context},e}();t.ElementFocusedMessage=o}),define("typeahead/core/message/FlightOriginPopulationMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o){this.populatedOrigin=e,this.latitude=t,this.longitude=o}return e.getTopic=function(){return"flight_origin_population"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getPopulatedOrigin=function(){return this.populatedOrigin},e.prototype.getLatitude=function(){return this.latitude},e.prototype.getLongitude=function(){return this.longitude},e}();t.FlightOriginPopulationMessage=o}),define("typeahead/core/message/FormLoadedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e){this.tab=e}return e.getTopic=function(){return"typeahead.form_loaded"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getTab=function(){return this.tab},e}();t.FormLoadedMessage=o}),define("typeahead/core/message/FormSubmittedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o){this.formValid=e,this.context=t,this.event=o}return e.getTopic=function(){return"typeahead.form_submitted"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.isFormValid=function(){return this.formValid},e.prototype.getContext=function(){return this.context},e.prototype.getEvent=function(){return this.event},e}();t.FormSubmittedMessage=o}),define("typeahead/core/message/InputClearedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e){this.$elem=e}return e.getTopic=function(){return"Input cleared"},e.prototype.getTopic=function(){return e.getTopic()},e}();t.InputClearedMessage=o}),define("typeahead/core/message/InputValueEditedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o){this.newInputValue=e,this.domElementId=o,this.lob=t}return e.getTopic=function(){return"typeahead.input_value_edited"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getNewInputValue=function(){return this.newInputValue},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getLob=function(){return this.lob},e}();t.InputValueEditedMessage=o}),define("typeahead/core/message/SubmitClickedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t){this.rfrrIdPrefix=e,this.event=t}return e.getTopic=function(){return"typeahead.submit_clicked"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getRfrrIdPrefix=function(){return this.rfrrIdPrefix},e.prototype.getEvent=function(){return this.event},e}();t.SubmitClickedMessage=o}),define("typeahead/core/message/SuggestionAutoSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t){this.suggestion=e,this.domElementId=t}return e.getTopic=function(){return"typeahead.suggestion_auto_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.SuggestionAutoSelectedMessage=o}),define("typeahead/core/message/SuggestionListSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o){this.suggestion=e,this.lob=t,this.domElementId=o}return e.getTopic=function(){return"typeahead.suggestionlist_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getLob=function(){return this.lob},e}();t.SuggestionListSelectedMessage=o}),define("typeahead/core/message/SuggestionReadyMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o,i){this.query=e,this.suggestions=t,this.activeEssTests=o,this.domElementId=i}return e.getTopic=function(){return"typeahead.suggestion_ready"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getQuery=function(){return this.query},e.prototype.getSuggestions=function(){return this.suggestions},e.prototype.getActiveEssTests=function(){return this.activeEssTests},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.SuggestionReadyMessage=o}),define("typeahead/core/message/SuggestionSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o,i){this.suggestion=e,this.domElementId=i,this.lob=o,this.selectionMethod=t&&t.type?-1<t.type.indexOf("mouse")?"mouse":-1<t.type.indexOf("key")?"keyboard":-1<t.type.indexOf("touch")?"touch":"unknown":"unknown"}return e.getTopic=function(){return"typeahead.suggestion_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getSelectionMethod=function(){return this.selectionMethod},e.prototype.getLob=function(){return this.lob},e}();t.SuggestionSelectedMessage=o}),define("typeahead/core/message/SuggestionShownMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o,i,n,r){this.suggestions=e,this.domElementId=r,this.elementValue=t,this.lob=i,this.activeESSTests=o,this.renderTime=n}return e.getTopic=function(){return"typeahead.suggestion_shown"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getShownSuggestions=function(){return this.suggestions},e.prototype.getElementValue=function(){return this.elementValue},e.prototype.getLob=function(){return this.lob},e.prototype.getActiveESSTests=function(){return this.activeESSTests},e.prototype.getRenderTime=function(){return this.renderTime},e}();t.SuggestionShownMessage=o}),define("typeahead/core/message/TypeaheadMessage",["require","exports","uitk"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.publish=function(e){o.publish(e.getTopic(),e)},e.subscribe=function(e,t){return o.subscribe(e,t)},e.unsubscribe=function(e,t){return o.unsubscribe(e,t)},e}();t.TypeaheadMessage=i}),define("typeahead/core/message/UserExitedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.getTopic=function(){return"typeahead.user_exited"},e.prototype.getTopic=function(){return e.getTopic()},e}();t.UserExitedMessage=o}),define("typeahead/core/presentation/DisplayGroupHandler",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.prototype.getResultsByDisplayGroup=function(e){var o=this.getDisplayGroupsPresent(e);return $.each(e,function(e,t){t.displayGroup?o[t.displayGroup.groupName].items.push(t):o.default.items.push(t)}),this.sortDisplayGroupsByDisplayOrder(o)},e.prototype.getDisplayGroupsPresent=function(e){var o={};return $.each(e,function(e,t){t.displayGroup?o[t.displayGroup.groupName]={index:Object.keys(o).length,items:[],label:t.displayGroup.label}:o.default={index:Object.keys(o).length,items:[],label:""}}),o},e.prototype.sortDisplayGroupsByDisplayOrder=function(o){var e=Object.keys(o).sort(function(e,t){return o[e].index-o[t].index}),t=[];return e.forEach(function(e){t.push({groupName:e,items:o[e].items,label:o[e].label})}),t},e}();t.DisplayGroupHandler=o}),define("typeahead/core/presentation/DropDownHideHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function e(e){this.handlers=e.get(o.DefaultPluginAssembly.dropDownHideHandler)}return e.prototype.runHandlers=function(t,o,i){this.handlers.map(function(e){return e.handleDropDownHide(t,o,i)})},e}();t.DropDownHideHandlersAssembly=i}),define("typeahead/core/presentation/DropDownShowHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function e(e){this.handlers=e.get(o.DefaultPluginAssembly.dropDownShowHandler)}return e.prototype.runHandlers=function(t,o,i){this.handlers.map(function(e){return e.handleDropDownShow(t,o,i)})},e}();t.DropDownShowHandlersAssembly=i}),define("typeahead/core/presentation/DropdownContentHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function e(e){this.handlers=e.get(o.DefaultPluginAssembly.dropdownContentHandler)}return e.prototype.runHandlers=function(t,o,i){this.handlers.map(function(e){return e.handleContentToShow(t,o,i)})},e}();t.DropdownContentHandlersAssembly=i}),define("typeahead/features/IDropDownHideHandler",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0}),define("typeahead/features/IDropDownShowHandler",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0}),define("typeahead/features/IDropdownContentHandler",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0}),define("typeahead/core/presentation/IInputElementFocusByHumanOrScriptHandler",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0,t.isInputElementFocusByHumanOrScriptHandler=function(e){return"object"==typeof e&&"function"==typeof e.handleInputElementFocusByHumanOrScript}}),define("typeahead/core/presentation/IInputElementFocusHandler",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0,t.isInputElementFocusHandler=function(e){return"object"==typeof e&&"function"==typeof e.handleInputElementFocus}}),define("typeahead/core/presentation/SuggestionRendererUtils",["require","exports","typeahead/core/geolocation/GeolocationIcon","typeahead/core/TypeaheadUtils"],function(e,t,d,h){"use strict";t.__esModule=!0;var o=function(){function g(){}return g.getHtml=function(e){function t(){return"flight"===$("li.tab:visible").children("button.on").data("lob")||"Flights.Search"===h.TypeaheadUtils.getClientId()}var o,i,n,r="geolocation"===e.icon?'<span data-tid="typeahead-icon'+e.index+'" class="icon" aria-hidden="true"><img alt="" style="height:1em;width:1em;vertical-align:middle;" src=\''+d.locationIcon+"'/></span>":"none"===e.icon?'<span data-tid="typeahead-icon'+e.index+'" aria-hidden="true"></span>':'<span data-tid="typeahead-icon'+e.index+'" class="icon" aria-hidden="true">\n                    <svg class="uitk-icon-svg">\n                        <use xlink:href="#uitk-icon-'+e.icon+'"/>\n                    </svg>\n                    </span>',a=e.regionNames.displayName;e.showAsHierarchy&&(o=e.regionNames.displayName,(n=(i=e).hierarchyInfo&&i.hierarchyInfo.nearby?i.hierarchyInfo.nearby.locDist:void 0)&&(o=o+" "+n),a=o);var s,l,u,c,p=r+'<span class="text">'+(c=s=a,t()&&(c=e.showAsHierarchy?-1!==(u=(l=s).indexOf("-"))?"(<B>"+l.substring(0,u).replace(/&nbsp;/i,"").trim()+"</B>)"+l.substring(u+1,l.length):l:g.isApAlTagged(s)?g.convertApAlTaggedMainToMultiLineHtml(s):function(e){var t,o,i="",n="",r="",a=e.indexOf("("),s=e.indexOf(")");if(-1!==a&&-1!==s){i=e.substring(0,a);var l=(n=e.substring(a+1,s)).indexOf("-");-1!==l?(t=n.substring(0,l).replace(/&nbsp;/i,"").trim(),o=n.substring(l+1,n.length)):(t=n,o=""),n="(<B>"+t+"</B>)"+o,s+1<e.length&&(r=e.substring(s+1,e.length))}else i=e;return g.createMultiLineHtml(i,r,n)}(s)),c)+"</span>"+("LIST"===e.type?g.toggleIconHtml:"");return e.showAsHierarchy?'<div class="child-suggestion" style="padding-left:'+("none"===e.icon?"12px":"1.88235em")+'; width: 100%;">'+p+"</div>":p},g.formatApText=function(e,t){if(-1!==e.indexOf(g.apOpenTag)){var o=(e=e.replace(g.apOpenTag+"(","").replace(")"+g.apCloseTag,"")).indexOf("-"),i="",n="";-1!==o?(i=e.substring(0,o).trim(),n=e.substring(o+1,e.length)):(i=e,n=""),e=t?"(<B>"+i+"</B>)"+n:"("+e.replace(i,"<B>"+i+"</B>")+")",e=g.apOpenTag+e+g.apCloseTag}return e},g.convertApAlTaggedMainToMultiLineHtml=function(e){var t=e.indexOf(g.apOpenTag),o=e.indexOf(g.apCloseTag),i=e.indexOf(g.alOpenTag),n=e.indexOf(g.alCloseTag),r=t<i,a=e.substring(0,r?t:i),s="";s=r?e.substring(o+g.apCloseTag.length,i):e.substring(o+g.apCloseTag.length,e.length);var l=e.substring(t,o+g.apCloseTag.length),u=e.substring(i,n+g.alCloseTag.length);return r?this.createMultiLineHtmlWrapped(a+s,this.formatApText(l,!1),this.addAlVariantTwoStyleToTags(u)):this.createMultiLineHtmlWrapped(a+u,s,this.formatApText(l,!0))},g.addAlVariantTwoStyleToTags=function(e){if(this.isAlTagged(e)){e=(e=e.replace("(","").replace(")","")).replace(g.alOpenTag,'<al style="font-weight:bold;font-size:12px;color:black">')}return e},g.isAlTagged=function(e){return-1!==e.indexOf(g.alOpenTag)&&-1!==e.indexOf(g.alCloseTag)},g.isApTagged=function(e){return-1!==e.indexOf(g.apOpenTag)&&-1!==e.indexOf(g.apCloseTag)},g.isApAlTagged=function(e){return this.isApTagged(e)&&this.isAlTagged(e)},g.createMultiLineHtmlWrapped=function(e,t,o){var i="<div class='multiLineDisplay details' style='width:100%'>";return i+=e.trim(),t&&(i+=" "+t.trim()),o&&(i+="<br>"+o.trim()),i+="</div>"},g.createMultiLineHtml=function(e,t,o){var i="<div class='multiLineDisplay'>";return i+=e.trim(),t&&(i+=" "+t.trim()),o&&(i+="<br>"+o.trim()),i+="</div>"},g.alOpenTag="<al>",g.alCloseTag="</al>",g.apOpenTag="<ap>",g.apCloseTag="</ap>",g.toggleIconHtml='<span class="icon" aria-hidden="true" style="float:right;font-size:20px;margin-top:-4px;">\n            <svg class="uitk-icon-svg">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#uitk-icon-toggle90"></use>\n            </svg>\n        </span>',g}();t.SuggestionRendererUtils=o}),define("typeahead/core/presentation/SvgIcons",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function o(){}return o.init=function(){if(!o.initialized){var e=document.createElement("div");e.setAttribute("aria-hidden","true"),e.setAttribute("style","display:none"),e.innerHTML=o.svgSprite,i(function(){document.body.insertBefore(e,document.body.childNodes[0])}),o.initialized=!0;var t=document.createElement("style");t.type="text/css",t.innerHTML=".icon > .uitk-icon-svg \n            {fill:currentcolor;height:1em;width:1em;pointer-events:none;position:relative;top:0.15em;}",document.head.appendChild(t)}},o.initialized=!1,o.svgSprite='\n    <svg xmlns="http://www.w3.org/2000/svg">\n    <symbol id="uitk-icon-location" viewBox="0 0 18 18"><path d="M9 0C5.8 0 3.3 2.6 3.3 5.7V6C3.5 11.5 9 18 9 18s5.5-6.5\n     5.7-11.9v-.3C14.7 2.6 12.2 0 9 0zm0 8.3c-1.4 0-2.6-1.2-2.6-2.6S7.6 3.1 9 3.1s2.6 1.2 2.6 2.6S10.4 8.3 9 8.3z"/>\n    </symbol>\n    <symbol id="uitk-icon-flights" viewBox="0 0 18 18"><path d="M1.2 11.1l2.7.9 3.8-3.8L.1 \n    3.9l1.1-1.1c.1-.1.2-.1.4-.1l8.7 2.8L14.8 1c.6-.6 1.5-.9 2.3-1 .2 0 .5 0 .7.2.2.2.3.4.2.7-.1.7-.4 1.7-1 2.3l-4.5 4.5 \n    2.8 8.7c0 .1 0 .3-.1.4l-1.1 1.1-4.3-7.5L6 14.1l.9 2.7-1.1 1.1-2.3-3.4-3.4-2.3 1.1-1.1z"/></symbol>\n    <symbol id="uitk-icon-hotels" viewBox="0 0 18 18"><path d="M17.7 \n    17.5l-.4-1c-.1-.1-.2-.2-.3-.2h-.8V4.9c0-.2-.2-.4-.4-.4h-3.4V.4c0-.2-.2-.4-.4-.4H2.2c-.2 0-.3.2-.3.4v15.9h-.8c-.1 \n    0-.3.1-.3.2l-.4 1c-.1.1 0 .2 0 .4s.2.1.3.1h16.6c.1 0 \n    .2-.1.3-.2s.1-.2.1-.3zm-11.3-4H4.1v-2.2h2.2v2.2zm0-4.5H4.1V6.8h2.2V9zm0-4.5H4.1V2.2h2.2v2.3zM10.1 \n    16H7.9v-4.8h2.2V16zm0-7H7.9V6.8h2.2V9zm0-4.5H7.9V2.2h2.2v2.3zm3.8 9h-2.2v-2.2h2.2v2.2zm0-4.5h-2.2V6.8h2.2V9z"/>\n    </symbol>\n    <symbol id="uitk-icon-cars" viewBox="0 0 18 18"><path d="M17.8 8.3l-1.5-1.4L14.8 2c0-.2-.2-.3-.4-.3H3.6c-.2 \n    0-.3.1-.4.3L1.6 6.9.2 8.3s-.1.1-.1.2V13c0 .1 0 .2.1.3l.6.6V16c0 .2.2.4.4.4h3c.2 0 .4-.2.4-.4v-2.1h8.9V16c0 \n    .2.2.4.4.4h3c.2 0 .4-.2.4-.4v-2.1l.6-.6c.1-.1.1-.2.1-.3V8.5l-.2-.2zM4.4 3.2h9.3l1.1 3.7H3.3l1.1-3.7zm-.8 8.2c-.8 \n    0-1.5-.7-1.5-1.5 0-.9.7-1.5 1.5-1.5S5 9 5 9.9c0 .8-.6 1.5-1.4 1.5zm10.8 0c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.6 \n    1.5 1.5c0 .8-.7 1.5-1.5 1.5z"/></symbol>\n    <symbol id="uitk-icon-train" viewBox="0 0 18 18"><path d="M3.8 18l1-2.5h2l-.2 1h5l-.2-1h2l1 2.5H3.8zm9-18c.8 0 1.5.7\n     1.5 1.5v12.1c0 .2-.2.4-.4.4H4.1c-.2 0-.4-.2-.4-.4V1.5C3.8.7 4.4 0 5.2 0h7.6zM6.5 2.6c0 .2.2.4.4.4h4.2c.2 0 \n     .4-.2.4-.4v-.7c0-.2-.2-.4-.4-.4H6.9c-.2 0-.4.2-.4.4v.7zm.8 8.9c0-.6-.4-1-1-1s-1 .4-1 1 .4 1 1 1 1-.4 1-1zm5.5 \n     0c0-.6-.4-1-1-1s-1 .4-1 1 .4 1 1 1 1-.4 1-1zm0-7H5.3v4.8h7.5V4.5z"/></symbol>\n    <symbol id="uitk-icon-notime" viewBox="0 0 18 18"><path d="M17.4 9c0 4-3.2 7.2-7.2 7.2V14c2.8 0 5-2.3 5-5 \n    0-2.8-2.3-5-5-5s-4.9 2.2-5 4.8v.8l.1-.4.9-1c.1-.1.2-.1.3-.1s.2 0 .3.1l1 1c.1.1.1.2.1.3s0 .2-.1.3l-3.6 3.6L.5 \n    9.8c-.1-.1-.1-.2-.1-.3s0-.2.1-.3l1-1c.1-.1.2-.1.3-.1s.2 0 .3.1l.8.9.2.5v-.7c0-4 3.2-7.2 7.2-7.2S17.4 5 17.4 \n    9zm-4.1-.5l-2.4-.2-.2-2.9h-1l-.2 4.3 3.8-.2v-1z"/></symbol>\n    <symbol id="uitk-icon-tag" viewBox="0 0 18 18"><path d="M7.928.111A.376.376 0 0 0 7.661 0H3.434a.37.37 0 0 \n    0-.267.111L.11 3.168a.376.376 0 0 0-.111.267v4.227a.37.37 0 0 0 .111.267l9.961 9.961a.38.38 0 0 0 .535 \n    0l7.284-7.284a.38.38 0 0 0 0-.535L7.928.111zm-3.39 5.942a1.514 1.514 0 1 1 .002-3.028 1.514 1.514 0 0 1-.002 \n    3.028z"/></symbol>\n    <symbol id="uitk-icon-return" viewBox="0 0 18 18"><path d="M18 10.8c0 .1 0 .2-.1.3l-5 4.9c-.2.2-.4.2-.6 \n    0l-1.1-1.1c-.2-.2-.2-.4 0-.6l2-2 .5-.2H.5c-.1 0-.2 0-.3-.1-.1-.1-.1-.2-.1-.3V2.3c0-.1 0-.2.1-.3s.2-.1.3-.1h1.6c.1 0 \n    .2 0 .3.1.1 0 .1.1.1.3v7.3h11.3l-.5-.2-2-2c-.3-.2-.3-.4-.1-.6l1.1-1.1c.2-.2.4-.2.6 0l4.9 4.9c.1 0 .1.1.2.2z"/>\n    </symbol>\n    <symbol id="uitk-icon-close" viewBox="0 0 18 18"><path d="M14.4 \n    5.9c.1-.1.1-.2.1-.3s0-.2-.1-.3l-1.7-1.7c-.2-.2-.4-.2-.6 0L9 6.7 5.9 3.6c-.1-.1-.2-.1-.3-.1-.1 0-.2 0-.3.1L3.6 \n    5.3c-.2.2-.2.4 0 .6L6.7 9l-3.1 3.1c-.1.1-.1.2-.1.3s0 .2.1.3l1.7 1.7c.2.2.4.2.6 0L9 11.3l3.1 3.1c.2.2.4.2.6 \n    0l1.7-1.7c.1-.1.1-.2.1-.3s0-.2-.1-.3L11.3 9l3.1-3.1z"/></symbol>\n    <symbol id="uitk-icon-search" viewBox="0 0 18 18"><path d="M10.712.001a7.288 7.288 0 0 0-6.107 11.263L.111 \n    15.758a.378.378 0 0 0 0 .534l1.599 1.599a.378.378 0 0 0 .534 0l4.494-4.494A7.288 7.288 0 1 0 10.713.002l.001.001zm0 \n    11.56c-2.356 0-4.272-1.918-4.272-4.272s1.918-4.272 4.272-4.272 4.272 1.918 4.272 4.272-1.918 4.272-4.272 4.272z"/>\n    </symbol>\n    <symbol id="uitk-icon-toggle90" viewBox="0 0 18 18"><path d="M12.8 8.7c.1.1.1.2.1.3s0 .2-.1.3l-5.5 5.5c-.1.1-.4.1-.5\n     0l-1.6-1.6c-.1-.1-.1-.4 0-.5L8.8 9 5.2 5.3c-.2-.1-.2-.4 0-.5l1.6-1.6c.1-.1.4-.1.5 0l5.5 5.5z"/></symbol>\n     <symbol id="uitk-icon-list" viewBox="0 0 18 18"><path d="M4.5 4.125a.374.374 0 0 1-.375.375H.375A.374.374 0 0 1 0 \n     4.125V.375C0 .167.168 0 .375 0h3.75c.208 0 .375.168.375.375v3.75zM18 .375A.374.374 0 0 0 17.625 0h-10.5a.374.374 0 \n     0 0-.375.375v3.75c0 .208.168.375.375.375h10.5A.374.374 0 0 0 18 4.125V.375zM4.5 7.125a.374.374 0 0 \n     0-.375-.375H.375A.374.374 0 0 0 0 7.125v3.75c0 .208.168.375.375.375h3.75a.374.374 0 0 0 .375-.375v-3.75zm13.5 \n     0a.374.374 0 0 0-.375-.375h-10.5a.374.374 0 0 0-.375.375v3.75c0 .208.168.375.375.375h10.5a.374.374 0 0 0 \n     .375-.375v-3.75zm-13.5 6.75a.374.374 0 0 0-.375-.375H.375a.374.374 0 0 0-.375.375v3.75c0 \n     .208.168.375.375.375h3.75a.374.374 0 0 0 .375-.375v-3.75zm13.5 0a.374.374 0 0 0-.375-.375h-10.5a.374.374 0 0 \n     0-.375.375v3.75c0 .208.168.375.375.375h10.5a.374.374 0 0 0 .375-.375v-3.75z"/></symbol>\n    </svg>',o}();t.SvgIcons=o}),define("typeahead/core/presentation/TypeaheadDropdownBuilder",["require","exports","typeahead/core/presentation/SuggestionRendererUtils"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function r(){}return r.getHtml=function(e){var t=document.createElement("style");t.innerHTML=r.style;var o=document.createElement("ul");if(o.setAttribute("class","results"),o.setAttribute("id",e.ariaOwns),o.setAttribute("role","listbox"),e.resultsByDisplayGroup&&e.resultsByDisplayGroup.length)for(var i=0;i<e.resultsByDisplayGroup.length;i++)o.appendChild(r.getDisplayGroupResultDiv(e.resultsByDisplayGroup[i]));var n=document.createElement("div");return n.appendChild(t),n.appendChild(o),n.appendChild(this.getFooter(e.closeText)),n.innerHTML},r.getFooter=function(e){var t=document.createElement("footer");t.setAttribute("class","footer");var o=document.createElement("a");return o.setAttribute("aria-label",e),o.setAttribute("class","close"),o.setAttribute("href","#"),o.innerHTML=e+'<span class="icon icon-close"></span>',t.appendChild(o),t},r.getDisplayGroupResultDiv=function(e){var t=document.createElement("div");if(t.setAttribute("class","display-group-results"),e.label&&t.appendChild(r.getDisplayGroupLabelListItem(e)),e.items&&e.items.length)for(var o=0;o<e.items.length;o++){var i=e.items[o];i.label&&i.showAsHierarchy&&t.appendChild(r.getLabelListItem(i)),t.appendChild(r.getSuggestionListItem(i))}return t},r.getDisplayGroupLabelListItem=function(e){var t=document.createElement("li");return t.setAttribute("class","display-group-name"),t.setAttribute("role","presentation"),t.setAttribute("tabindex","-1"),t.innerHTML='<div role="option" class="details">'+e.label+"</div>",t},r.getLabelListItem=function(e){var t=document.createElement("li");return t.setAttribute("class","non-results-item"),t.setAttribute("role","presentation"),t.setAttribute("tabindex","-1"),t.innerHTML='\n            <div class="child-suggestion">\n                <span class="child-suggestion-label">'+e.label+"</span>\n            </div>",t},r.getSuggestionListItem=function(e){var t=document.createElement("li");return"LIST"===e.type?t.setAttribute("class","results-item list-item"):t.setAttribute("class","results-item"),t.setAttribute("role","presentation"),e.html?t.innerHTML=e.html:t.appendChild(r.getSuggestionAnchorTag(e)),t},r.getSuggestionAnchorTag=function(e){var t=document.createElement("a");return t.setAttribute("aria-selected","false"),t.setAttribute("class","details"),t.setAttribute("data-id",e.gaiaId),t.setAttribute("data-row",e.index),t.setAttribute("data-type",e.type),t.setAttribute("data-value",e.regionNames.lastSearchName),t.setAttribute("href","#"),t.setAttribute("id","aria-option-"+e.index),t.setAttribute("onclick","return false;"),t.setAttribute("role","option"),t.setAttribute("style",e.style?e.style:""),t.setAttribute("tabindex","-1"),t.innerHTML=o.SuggestionRendererUtils.getHtml(e),t},r.style="       \n        .autocomplete-dropdown .display-group-results:not(:first-of-type) {\n            padding-top: 0.9230769230769231em;\n            border-top: 0.07692307692307693em solid #c7c7c7;\n        }\n        .autocomplete-dropdown .display-group-results:not(:last-of-type) {\n            padding-bottom: 0.9230769230769231em;\n        }\n        .autocomplete-dropdown li.display-group-name {\n            list-style: none;\n            padding: 0 0.92307692em;\n        }\n        .autocomplete-dropdown li.display-group-name div.details {\n            color: #313131;\n            padding: 0.46153846em;\n        }\n        .autocomplete-dropdown li.non-results-item div.child-suggestion {\n            padding-left: 1.88235em;\n        }\n        .autocomplete-dropdown span.child-suggestion-label {\n            padding-left: 1.5em;\n            color: #313131;\n        }\n        .autocomplete-dropdown li.results-item {\n            margin: 0 !important;           \n        }\n        .results-item.list-item {\n            box-shadow: 0 0 3px 0 rgba(0,0,0,0.2) !important;\n            background: white;\n            padding: 0;\n        }\n        .results-item.list-item > a.details {\n            height: 44px;\n            padding-left: 18px;\n            padding-top: 12px;\n        }             \n    ",r}();t.TypeaheadDropdownBuilder=i}),define("typeahead/core/util/Functional",["require","exports","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity"],function(e,t,u,c,p){"use strict";t.__esModule=!0,t.mapMethodByName=function(e,t){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if(!Array.isArray(e))return u.default.log(new Error("mapMethodByName expected targets to be in an array, but got "+JSON.stringify(e)),p.Severity.MustFix,c.ProblemOrigin.UniversalTypeahead),[];for(var n=[],r=0,a=e;r<a.length;r++){var s=a[r],l=s[t];if("function"==typeof l)try{n.push(l.apply(s,o))}catch(e){u.default.log(e,p.Severity.MustFix,c.ProblemOrigin.UniversalTypeahead)}else u.default.log(new Error(t+" is not supported by "+JSON.stringify(s)),p.Severity.MustFix,c.ProblemOrigin.UniversalTypeahead)}return n}}),define("typeahead/core/util/Optional",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function t(e){this.value=e}return t.of=function(e){if(t.isEmpty(e))throw"Optional.of() does not accept undefined or null as argument";return new t(e)},t.ofNullable=function(e){return new t(e)},t.empty=function(){return new t(null)},t.isEmpty=function(e){return null==e},t.prototype.get=function(){if(this.isPresent())return this.value;throw new Error("trying to get the value of an empty Optional")},t.prototype.isPresent=function(){return!t.isEmpty(this.value)},t.prototype.orElse=function(e){return this.isPresent()?this.value:e},t}();t.Optional=o}),define("typeahead/core/util/PromiseTestUtil",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.prototype.promiseCompleteUtil=function(e){},e}();t.PromiseTestUtil=o});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define("typeahead/core/geolocation/logging/GeolocationMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(l){function e(e,t,o,i,n,r,a){var s=l.call(this,e,t,"GeolocationAsSuggestion",a)||this;return s.position=n,s.positionError=r,s.latency=i-o,s}return __extends(e,l),e}(o.TypeaheadMetric);t.GeolocationMetric=i}),define("typeahead/core/geolocation/logging/GeolocationMetricLogger",["require","exports","typeahead/core/geolocation/logging/GeolocationMetric","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/logging/CollectorTransport","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils"],function(e,t,o,i,n,r,a,s){"use strict";t.__esModule=!0;var l=function(){function e(){var o=this;a.TypeaheadMessage.subscribe(i.GeolocationRequestMessage.getTopic(),function(e,t){o.lob=s.Lob[s.TypeaheadUtils.getLob()],o.domElementId=t.getDomElementId(),o.beginTimestamp=Date.now()}),a.TypeaheadMessage.subscribe(n.GeolocationResponseMessage.getTopic(),function(e,t){o.position=t.getPosition(),o.positionError=t.getPositionError(),o.endTimestamp=Date.now(),o.emitGeolocationMetric()})}return e.prototype.emitGeolocationMetric=function(){(new r.CollectorTransport).log(new o.GeolocationMetric(s.Lob[s.TypeaheadUtils.getLob()],this.domElementId,this.beginTimestamp,this.endTimestamp,this.position,this.positionError,void 0))},e}();t.GeolocationMetricLogger=l}),define("typeahead/core/geolocation/message/GeolocationClearedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e){this.geolocationResult=e}return e.getTopic=function(){return"typeahead.geolocation_cleared"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e}();t.GeolocationClearedMessage=o}),define("typeahead/core/geolocation/message/GeolocationRequestMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e){this.domElementId=e}return e.getTopic=function(){return"typeahead.geolocation_request"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.GeolocationRequestMessage=o}),define("typeahead/core/geolocation/message/GeolocationResponseMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function e(e,t,o,i){void 0===i&&(i=void 0),this.position=e,this.postionError=t,this.geolocationResult=o,this.submitButton=i}return e.getTopic=function(){return"typeahead.geolocation_response"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getPosition=function(){return this.position},e.prototype.getPositionError=function(){return this.postionError},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e.prototype.getSubmitButton=function(){return this.submitButton},e}();t.GeolocationResponseMessage=o}),define("typeahead/dataprovider/IClientSideCacheStatusChecker",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.isClientSideCacheDisabled=function(e){return"object"==typeof e&&"function"==typeof e.isClientSideCacheDisabled}}),define("typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils",["require","exports","typeahead/core/plugins/ExecutionHelper"],function(e,t,r){"use strict";t.__esModule=!0,t.addFeatureFlag=function(e,t,o,i,n){return void 0!==o&&(o.features=o.features&&o.features.length&&o.features.push&&o.features||[],r.shouldExecute(i,t)&&o.features.indexOf(e)<0&&o.features.push(e)),o}}),require(["require","exports","typeahead/core/message/FlightOriginPopulationMessage","typeahead/core/message/FormLoadedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/ExecutionHelper","typeahead/core/SearchParametersUpdater","typeahead/core/StripingConfiguration","typeahead/core/SuggestionFactory","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,s,n,l,u,r,c,p,o,g,d,i){"use strict";t.__esModule=!0;var h=[{clients:["Homepage","FlightsLandingPage"],experiment:{id:25022,name:"ESS_Akamai_Current_Location_Flight"},tabs:["flight"]}],a=function(){function e(){this.SELECTOR="input[data-provide='utypeahead'][data-lob='FLIGHTS'][id^='flight-origin-']"}return e.prototype.handlePageLoad=function(e,o){var i=this;u.TypeaheadMessage.subscribe(n.FormLoadedMessage.getTopic(),function(e,t){o.tab=t.getTab(),r.prefetchInstance.getPrefetchFlightOriginSuggestion().done(function(t){r.prefetchInstance.getPrefetchActiveSearch().done(function(e){i.populateFlightOriginIfApplicable(e,o,t)})})})},e.prototype.getExperiments=function(){return o.getExperiments(h)},e.prototype.populateFlightOriginIfApplicable=function(e,t,o){if(this.isNotActiveSearch(e)&&c.shouldExecute(t,h)&&o.suggestion){var i=g.createSuggestion(o.suggestion),n=i.getLastSearchName().orElse(""),r=$(this.SELECTOR),a=d.TypeaheadUtils.getUserLocation().split("|");n&&r&&0<r.length&&(r.val(n),p.updateForSuggestion(n,i,r.data(),r.attr("id")),u.TypeaheadMessage.publish(new s.FlightOriginPopulationMessage(n,a[0],a[1])),u.TypeaheadMessage.publish(new l.SuggestionAutoSelectedMessage(i,r.attr("id"))))}},e.prototype.isNotActiveSearch=function(e){return e.hasOwnProperty("AIR")&&!0!==e.AIR},e}();i.registerPlugin(new a)}),require(["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/plugins/ExecutionHelper","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,r,i,o,n,a){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","HotelsLandingPage"],tabs:["hotel"]},{clients:["Hotels.Search"],lobs:["HOTELS"]}],l=function(){function e(){}return e.prototype.modifySuggestions=function(n,e,t){return n&&0<n.length&&o.shouldExecute(e,s)&&("focus"===t.renderTrigger?n.forEach(function(e,t){if(e.hierarchyInfo){var o=e.hierarchyInfo.relation;if(o&&"alt"===o[0]){e.showAsHierarchy=!0;var i=n[t-1];i.hierarchyInfo&&i.hierarchyInfo.relation||(e.label=r.altSuggestionLabelText?r.altSuggestionLabelText:"People also search")}}}):"type"===t.renderTrigger&&n.forEach(function(e,t){if(e.hierarchyInfo){var o=e.hierarchyInfo.relation;o&&"alt"===o[0]&&(e.displayGroup={groupName:"altSuggestion",label:r.altSuggestionLabelText?r.altSuggestionLabelText:"People also search"})}})),n},e.prototype.modifyParameters=function(e,t,o){return t.tab=i.ClientHandlerRegistry.getTab(),n.addFeatureFlag("altRegion",s,e,t,o)},e}();a.registerPlugin(new l)});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,o,i,n){"use strict";t.__esModule=!0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=[{lobs:["HOTELS"]}],e.featureName="IncludeHLR",e}return __extends(e,t),e.prototype.modify=function(e,t,o){this.addRegionType(e,256)},e}(i.SuggestServiceParamModifier);n.registerPlugin(new r)});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,o,i,n){"use strict";t.__esModule=!0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=[{clients:["Homepage","HotelsLandingPage"],tabs:["hotel"]},{clients:["Hotels.Search"]}],e.featureName="GoogleAutocomplete",e}return __extends(e,t),e.prototype.modify=function(e,t,o){this.addFeatureFlag(e,"google")},e}(i.SuggestServiceParamModifier);n.registerPlugin(new r)}),require(["require","exports","typeahead/core/loc","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,o,n,r,a,s,i){"use strict";t.__esModule=!0;var l=[{clients:["Homepage","AWSHomepage","CarsLandingPage"]}],u=[{clients:["Homepage","AWSHomepage","CarsLandingPage"]},{lobs:["CARS"]}],c=[{clients:["Homepage","AWSHomepage","CarsLandingPage"],experiment:{id:13136,name:"CWTA_CarRentalHintText",value:2}},{lobs:["CARS"]}],p=[u,c],g=function(){function i(){var o=this;this.$input=$("input[data-provide=utypeahead][data-dest=true][data-lob=CARS]"),this.originalPlaceholder=this.$input.attr("placeholder")||"City, airport or address",this.placeholderIndex=-1,this.modifyInputElement=function(e){o.$input=e,n.prefetchInstance.getPrefetchCarRentalHints().done(function(e){var t=e;0===t.length&&(t=o.getCarPlaceholders(s.TypeaheadUtils.getSiteId())),i.placeholders=t,uitk.subscribe("sfSelectedLobs.updated",function(e,t){o.stopCyclePlaceholders(),0!==o.recheckVariant(!0)&&o.startCyclePlaceholders()}),o.startCyclePlaceholders(),o.$input.blur(o.startCyclePlaceholders),o.$input.focus(o.stopCyclePlaceholders)})},this.startCyclePlaceholders=function(){o.stopCyclePlaceholders(),0!==o.getVariant()&&(o.timeoutId=setTimeout(o.cyclePlaceholders,i.initialDelayMillis))},this.stopCyclePlaceholders=function(){void 0!==o.intervalId&&clearInterval(o.intervalId),void 0!==o.timeoutId&&clearTimeout(o.timeoutId),o.placeholderIndex=-1,o.setPlaceholderText(o.originalPlaceholder)},this.cyclePlaceholders=function(){o.intervalId=setInterval(o.setNextPlaceholderText,i.cycleDelayMillis)},this.setPlaceholderText=function(e){o.$input.attr("placeholder",e),uitk.prepFields()},this.setNextPlaceholderText=function(e){o.setPlaceholderText(o.getNextText(e))},this.getNextIndex=function(e){if(void 0===e&&(e=i.placeholders.length),1===o.getVariant()){if(0!==i.placeholders.length)for(e=o.placeholderIndex;e===o.placeholderIndex;)e=Math.floor(Math.random()*(i.placeholders.length+1))}else if(2===o.getVariant()&&(e=o.placeholderIndex+1,o.placeholderIndex>i.placeholders.length))return 0;return e},this.getNextText=function(e){return void 0===e&&(e=o.getNextIndex(),o.placeholderIndex=e),e>=i.placeholders.length?o.originalPlaceholder:i.tryPhrase.replace("{0}",i.placeholders[e])},this.getVariant=function(){return o.recheckVariant(),i.variant}}return i.prototype.getExperiments=function(){return a.getExperiments([].concat.apply([],p))},i.prototype.handlePageLoad=function(e,t){$(".car-rental-hint-text").data("hint-order","random"),this.$input=$("input[data-provide=utypeahead][data-dest=true][data-lob=CARS]"),this.context=t,i.variant=0,r.shouldExecute(t,l)&&(r.shouldExecute(t,u)&&(i.variant=1),r.shouldExecute(t,c)&&(i.variant=2),this.modifyInputElement(this.$input))},i.prototype.recheckVariant=function(e){if(void 0===e&&(e=!1),e||void 0===i.variant){if(!r.shouldExecute(this.context,l))return i.variant=0;if(r.shouldExecute(this.context,u))return i.variant=1;if(r.shouldExecute(this.context,c))return i.variant=2}return 0},i.prototype.getCarPlaceholders=function(e){var t;switch(e){case"1":t=["Denver Hertz","Miami Budget","LAX","MCO","San Francisco","Boston"];break;case"3":t=["London Europcar","Miami Sixt","LON","DUB","Heathrow","Paris"];break;case"25":t=["Perth Enterprise","Brisbane Avis","MEL","SYD","Cairns","London"];break;case"27":t=["DEL","HYD","Bengaluru","Mumbai"];break;case"63":t=["Dublin Easirent","Sydney Europcar","LAS","DUB","London","Chicago"];break;case"29":t=["Wellington Economy Rent A Car","Queenstown Europcar","AKL","LON","Sydney","Auckland"];break;case"70125":t=["Belfast Sixt","Brisbane Hertz","MEL","SYD","Melborne","Las Vegas"];break;case"70403":t=["Houston Avis","Boston Dollar","LON","DUB","Paris","London"];break;case"70301":t=["Miami Hertz","Denver National Car Rental","LAS","MCO","Orlando","San Jose"];break;case"80001":t=["Tampa Budget","Atlanta Avis","MCO","LAS","Denver","Orlando"];break;case"70201":t=["Denver Hertz","Miami Budget","LAX","MCO","San Francisco","Boston"];break;default:t=[]}return t},i.tryPhrase=o.carPlaceholderCycleTryPhrase||'Try "{0}"',i.initialDelayMillis=1e3,i.cycleDelayMillis=2e3,i}();i.registerPlugin(new g)});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,o,i,n){"use strict";t.__esModule=!0;var r=["cars_rental","carsclickpopularity"],a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=[{lobs:["CARS"]}],e}return __extends(e,t),e.prototype.modify=function(e,t,o){e.maxresults=8,e.sortcriteria="popularity",e.features=e.features&&e.features.length?e.features:[],Array.prototype.push.apply(e.features,r)},e}(i.SuggestServiceParamModifier);n.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,o,i,n,r){"use strict";t.__esModule=!0;var a=[{experiment:{id:24928,name:"UtaTurnOffClientSideCache",value:1}}],s=function(){function e(){}return e.prototype.getExperiments=function(){return n.getExperiments(a)},e.prototype.isClientSideCacheDisabled=function(e){return i.shouldExecute(e,a)},e}();r.registerPlugin(new s)}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/logging/GeolocationMetricLogger","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/SuggestionsAggregator","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,o,i,n,a,s,l,u,c,p,g,r){"use strict";t.__esModule=!0;var d=[{deviceTypes:["Tablet","Mobile"],tabs:["hotel"]}],h=[{deviceTypes:["Tablet","Mobile"],experiment:{id:15389,name:"uTA_PrepopulateCurrentLocationForMobile",value:1},tabs:["hotel"]}],y=[{clients:["Homepage","AWSHomepage"],deviceTypes:["Tablet","Mobile"],experiment:{id:25348,name:"ess_Current_Location_for_LX_Follow_up",value:1},tabs:["activity"]},{clients:["LXLandingPage"],deviceTypes:["Tablet","Mobile"],experiment:{id:25348,name:"ess_Current_Location_for_LX_Follow_up",value:1}}],f=[d,h,y],m=["Homepage","AWSHomepage","HotelsLandingPage","LXLandingPage"],v=["ja_JP"],S=function(){function r(){}return r.isLocaleEligible=function(){return v.indexOf(g.TypeaheadUtils.getLocale())<0},r.isFirstStepInMultiStepTypeahead=function(){return window.location.search.indexOf("&depth=")<0},r.prototype.handlePageLoad=function(e,o){var i=this;r.isLocaleEligible()&&-1<m.indexOf(o.clientId)&&s.TypeaheadMessage.subscribe(a.FormLoadedMessage.getTopic(),function(e,t){o.tab=t.getTab(),g.TypeaheadUtils.isWithinMobileBreakpoint()&&(u.shouldExecute(o,d)||u.shouldExecute(o,y))&&(i.initialize(),i.geolocationViewController&&i.geolocationViewControllerPageloadHandler(o))})},r.prototype.suggestOnFocus=function(e,t){return this.suggest(e,t)},r.prototype.suggest=function(e,t){var o=this,i=$.Deferred(),n={id:this.getId(),results:[]};return r.isLocaleEligible()&&(u.shouldExecute(t,d)||u.shouldExecute(t,y))&&r.isFirstStepInMultiStepTypeahead()?(this.initialize(),this.geolocationDataProvider.fetchData(e).done(function(e){i.resolve({id:o.getId(),results:e.results})}).fail(function(){i.resolve(n)})):i.resolve(n),i.promise()},r.prototype.getId=function(){return p.SuggesterId.CurrentLocationSuggester},r.prototype.getExperiments=function(){return c.getExperiments([].concat.apply([],f))},r.prototype.initialize=function(){this.geolocationDataProvider||(this.geolocationDataProvider=new i.GeolocationDataProvider,this.geolocationViewController=o.ClientHandlerRegistry.getGeolocationViewController(this.geolocationDataProvider),this.geolocationMetricLogger=new n.GeolocationMetricLogger)},r.prototype.geolocationViewControllerPageloadHandler=function(n){var r=this;l.prefetchInstance.getPrefetchActiveSearch().done(function(e){var t=$("form[data-lob-form="+n.tab+"]").find("input[name=destination]"),o=!!$(t).val(),i=n.tab.toUpperCase();!(!!e.hasOwnProperty(i)&&e[i])&&o&&g.TypeaheadUtils.isWithinMobileBreakpoint()?r.mustPopulateCurrentLocationConfigHelper(!0,n,h):r.handlePageLoadPrefetchHelper(n)}).fail(function(e){r.handlePageLoadPrefetchHelper(n)})},r.prototype.mustPopulateCurrentLocationConfigHelper=function(e,t,o){(o&&u.shouldExecute(t,o)||null===o)&&this.geolocationViewController.handlePageLoad(t,e)},r.prototype.handlePageLoadPrefetchHelper=function(e){g.TypeaheadUtils.isWithinMobileBreakpoint()?this.mustPopulateCurrentLocationConfigHelper(!1,e,y):this.mustPopulateCurrentLocationConfigHelper(!1,e,null)},r}();r.registerPlugin(new S)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,r,i,o,n){"use strict";t.__esModule=!0;var s=[{clients:["Flights.Search"],experiment:{id:15336,name:"FSRP_uTA_OptimizeDropdownGeometry",value:1}}],a=function(){function a(){this.showHandlers={}}return a.optimizeDropDownGeometry=function(e,t){var o=4+document.body.clientWidth-2*a.baseSpacingHorz,i=4+Math.min(a.maxAvailableMediaWidthPx,o),n=Math.min(i,o),r=t.offset().left-2;o<r+n&&(r=a.baseSpacingHorz+o-n-2),e.css({left:r+"px","max-width":i+"px",width:n+"px"})},a.prototype.getExperiments=function(){return o.getExperiments(s)},a.prototype.handleDropDownShow=function(e,t,o){i.shouldExecute(o,s)&&this.doHandleDropDownShow(e,t)},a.prototype.handleDropDownHide=function(e,t,o){var i=t.attr("id"),n=i?this.showHandlers[i]:void 0;n&&(r(window).off(a.resizeEventTypes,null,n),delete this.showHandlers[i])},a.prototype.doHandleDropDownShow=function(t,o){var e=function(e){a.optimizeDropDownGeometry(t,o)};e(),r(window).on(a.resizeEventTypes,null,null,e),o.attr("id")&&(this.showHandlers[o.attr("id")]=e)},a.baseSpacingHorz=12,a.maxAvailableMediaWidthPx=770,a.resizeEventTypes="orientationchange resize",a}();n.registerPlugin(new a)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,r,o){"use strict";t.__esModule=!0;var a=[{lobs:["PACKAGES"]}],i=function(){function i(){}return i.prototype.modifySuggestions=function(e,t,o){return e&&0<e.length&&n.shouldExecute(t,a)&&this.isPackageOrigin()&&e.forEach(function(e){"USERHISTORY"===e.category||"LIST"===e.type||r.TypeaheadUtils.isChildSuggestion(e)||(e.icon=i.FLIGHTS_ICON)}),e},i.prototype.isPackageOrigin=function(){return $("input:focus").data("gcw-storeable-name")&&-1<$("input:focus").data("gcw-storeable-name").indexOf(i.ORIGIN_FIELD_TYPE)},i.FLIGHTS_ICON="flights",i.ORIGIN_FIELD_TYPE="origin",i}();o.registerPlugin(new i)}),require(["require","exports","jquery","typeahead/core/message/SuggestionListSelectedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,l,i,u,c,o,n,p,r){"use strict";t.__esModule=!0;var a=[{experiment:{id:24609,name:"TYPEAHEAD_FULL_SCREEN_HOTELS",value:1},tabs:["hotel"]},{experiment:{id:24610,name:"TYPEAHEAD_FULL_SCREEN_FLIGHTS",value:1},tabs:["flight"]},{experiment:{id:24611,name:"TYPEAHEAD_FULL_SCREEN_CARS",value:1},tabs:["car"]},{experiment:{id:24612,name:"TYPEAHEAD_FULL_SCREEN_PACKAGES",value:1},tabs:["package","packageFlightHotel","packageFlightHotelCar","packageFlightCar","packageHotelCar","flightHotel","flightHotelCar","flightCar","hotelCar","carHotel","carHotelFlight","carFlight"]},{experiment:{id:25415,name:"ess_typeahead_full_take_over_lx",value:1},tabs:["activity"]}],s=function(){function s(){}return s.isOpen=function(e){return e.hasClass("typeahead-overlay")},s.addCancelButton=function(e){var t=l.parseHTML(s.cancelButtonHtml).pop();return e.append(t),l(t).off("mousedown").on("mousedown",function(e){e.stopPropagation(),window.history.back()}),l(t).off("click focusin").on("click focusin",function(e){e.stopPropagation()}),t},s.applyFullScreenStyle=function(e){e.addClass("typeahead-overlay"),l("body").addClass("scroll-hidden"),"absolute"===l(".typeahead-overlay span.label").css("position")&&l(".typeahead-overlay span.label").addClass("show"),l("div.dropdown-con").css("display","none")},s.close=function(t,o,i,n){setTimeout(function(){var e=l(t).closest("div.col");l(t).attr("placeholder",o),l("body").removeClass("scroll-hidden"),s.enableOtherInputs(t),l(i).remove(),e.removeClass("typeahead-overlay"),c.TypeaheadMessage.unsubscribe(u.SuggestionSelectedMessage.getTopic(),n),l(t).trigger("blur"),window.uitkautocomplete.prototype.closeAllTA()},0)},s.open=function(o){var i,e=l(o).closest("div.col"),n=l(o).attr("placeholder");if(!s.isOpen(e)){i=Date.now(),history.pushState({placeholder:n},document.title,"?taid="+i+"&tapage=1&next=popular"),s.disableOtherInputs(o);var r=s.addCancelButton(e);s.applyFullScreenStyle(e);var a=c.TypeaheadMessage.subscribe(u.SuggestionSelectedMessage.getTopic(),function(){window.history.go(-parseInt(p.TypeaheadUtils.getURLParameter("tapage"),10))});l(window).off("popstate.typeahead").on("popstate.typeahead",function(e){if(-1<location.search.indexOf("taid="+i)){o.trigger("focus",!0);var t=e.originalEvent;t&&t.state&&t.state.placeholder&&o.attr("placeholder",t.state.placeholder)}else s.close(o,n,r,a),i=0}),l("html, body").animate({scrollTop:0,scrollLeft:0},"slow")}},s.disableOtherInputs=function(e){l(e).closest("form").find("input:visible, select:visible").not(e).attr("disabled","true")},s.enableOtherInputs=function(e){l(e).closest("form").find("input:visible, select:visible").not(e).removeAttr("disabled")},s.isMultiStep=function(e,t){return!t.srchText&&p.TypeaheadUtils.isWithinMobileBreakpoint()&&o.shouldExecute(e,a)},s.handleSuggestionListSelection=function(e,t){var o="next="+t.getSuggestion().getNext().orElse(""),i="tapage="+(parseInt(p.TypeaheadUtils.getURLParameter("tapage"),10)+1),n="taid="+p.TypeaheadUtils.getURLParameter("taid");history.pushState({placeholder:t.getSuggestion().getDisplayText()},document.title,"?"+n+"&"+i+"&"+o+"&depth="+t.getSuggestion().getPosition());var r=l("#"+t.getDomElementId());r.attr("placeholder",t.getSuggestion().getDisplayText()),r.trigger("focus",!0)},s.prototype.handlePageLoad=function(e,t){var o=document.createElement("style");o.type="text/css",o.innerHTML=s.css,document.head.appendChild(o),-1<location.search.indexOf("taid=")&&history.pushState(null,document.title,location.pathname),c.TypeaheadMessage.subscribe(i.SuggestionListSelectedMessage.getTopic(),s.handleSuggestionListSelection)},s.prototype.handleInputElementFocusByHumanOrScript=function(e,t){p.TypeaheadUtils.isWithinMobileBreakpoint()&&o.shouldExecute(t,a)&&s.open(e)},s.prototype.modifyParameters=function(e,t,o){if(s.isMultiStep(t,o)){e.next=p.TypeaheadUtils.getURLParameter("next");var i=-1<(e.next+"").toLowerCase().indexOf("domestic"),n=-1<(e.next+"").toLowerCase().indexOf("international"),r=l("input:focus").data("gcw-storeable-name")&&-1<l("input:focus").data("gcw-storeable-name").indexOf("origin");"ja_JP"===t.locale&&(i||n)&&(e.maxresults=r&&i?15:18)}return e},s.prototype.modifySuggestions=function(e,t,o){if(s.isMultiStep(t,o)){var i=p.TypeaheadUtils.getURLParameter("depth");e.forEach(function(e){e.parentPosition=i})}return e},s.prototype.getExperiments=function(){return n.getExperiments(a)},s.cancelButtonHtml='\n        <button type="button" class="typeahead-overlay-cancel"><span class="uitk-icon">\n        <svg role="img" aria-labelledby="icon-uitk-typeahead-cancel-title" viewBox="0 0 24 24" \n         style="fill:#616161; height:1.4em; width:1.4em;" xmlns="http://www.w3.org/2000/svg">\n        <title id="icon-uitk-typeahead-cancel-title">Cancel</title> \n        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg></span></button>',s.css="\n            .typeahead-overlay {\n                background: rgba(245,245,245,1); \n                margin: 0;\n                overflow: hidden !important; \n                padding: 0 !important;\n                position: fixed !important;\n                top: 0; right: 0; bottom: 0; left: 0;\n                transition: top 0.3s;\n                -moz-transition: top 0.3s;\n                -webkit-transition: top 0.3s;                \n                z-index: 99;\n            }\n            \n            .typeahead-overlay-cancel {\n                background-color: white;\n                border:0;\n                height: 52px;\n                margin:0;\n                padding-top: 6px;\n                position: absolute;\n                top: 0;\n                width: 48px;\n            }\n            \n            .typeahead-overlay input {       \n                border: 0 !important;\n                border-radius: 0 !important;   \n                box-shadow: none !important;    \n                height: 52px !important;               \n                padding-left: 48px !important;\n                padding-right: 48px !important;                \n            }\n            \n            .typeahead-overlay label {     \n                box-shadow: 0 2px 0.25rem 0 rgba(0,0,0,0.2) !important;         \n                margin: 0;                \n            }                        \n            \n            .typeahead-overlay button.btn-clear {\n                height: 52px;\n                margin-top: -12px;                \n                right: 0;\n                width: 48px;\n            }                         \n            \n            .typeahead-overlay .autocomplete-open .autocomplete-arrow::after,\n            .typeahead-overlay label span.label, \n            .typeahead-overlay label span.icon {\n                display: none;\n            }   \n            \n            .typeahead-overlay .autocomplete-dropdown {\n                background: none;\n                border: 0;\n                box-shadow: none;\n                height: -moz-calc(100% - 52px);\n                height: -webkit-calc(100% - 52px);\n                height: calc(100% - 52px);\n                left:0 !important;\n                margin: 0;   \n                max-width: 100% !important;\n                overflow:auto;    \n                right: 0 !important;\n                width: 100% !important;                                                          \n            }    \n            \n            .typeahead-overlay a.details { min-height: 32px; }\n            .typeahead-overlay .footer { display: none; }   \n            .typeahead-overlay .autocomplete-open { height: 100%; }            \n            .scroll-hidden { overflow: hidden; position: fixed; }                  \n            .typeahead-overlay .label.show { display: block; left: 48px; }          \n            .typeahead-overlay .btn-clear:disabled { display:none; }   \t\t\n    \t\t.typeahead-overlay input:placeholder-shown { padding-right:18px !important; }            \n            .typeahead-overlay input::-webkit-input-placeholder { font-size: 14px; }\n            .typeahead-overlay input::-moz-placeholder { font-size: 14px; }\n            .typeahead-overlay input:-ms-input-placeholder { font-size: 14px; }\n            .typeahead-overlay input::placeholder { font-size: 14px; } \n            .typeahead-overlay ul.results { padding-top: 2px; }       \n            .typeahead-overlay div.multiLineDisplay { display: inline-block; }                           \n        ",s}();r.registerPlugin(new s)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,o,i,n,r,a,s){"use strict";t.__esModule=!0;var l=[{lobs:["HOTELS","FLIGHTS","RAILS","PACKAGES"]}],u=function(){function e(){}return e.prototype.getExperiments=function(){return n.getExperiments(l)},e.prototype.modifyParameters=function(e,t,o){return r.TypeaheadUtils.getPackageType()!==r.PackageType.FlightCar?a.addFeatureFlag("ta_hierarchy",l,e,t,o):e},e.prototype.modifySuggestions=function(e,o,t){return e&&0<e.length&&e.forEach(function(e){if(i.shouldExecute(o,l)){var t=e.relation;0<+e.index&&e.hierarchyInfo&&(t=e.hierarchyInfo.relation),!t||"child"!==t[0]&&"nearby"!==t[0]||(e.showAsHierarchy=!0)}}),e},e}();s.registerPlugin(new u)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,o,r,i){"use strict";t.__esModule=!0;var a=[{experiment:{id:25399,name:"ESS_Region_Type_Specific_Icon_for_Hierarchy",value:1},lobs:["HOTELS"]}],s=function(){function e(){}return e.prototype.modifySuggestions=function(e,t,o){if(e&&0<e.length){var i=void 0;e.forEach(function(e){r.TypeaheadUtils.isChildSuggestion(e,o.renderTrigger)&&(void 0===i&&(i=!n.shouldExecute(t,a)),i&&(e.icon="return"))})}return e},e.prototype.getExperiments=function(){return o.getExperiments(a)},e}();i.registerPlugin(new s)}),require(["require","exports","jquery","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,p,o,i,g,n){"use strict";t.__esModule=!0;var d=[{clients:["Homepage","HotelsLandingPage","AWSHomepage"],tabs:["hotel"]}],r=function(){function e(){}return e.prototype.handlePageLoad=function(e,u){var c=this;i.TypeaheadMessage.subscribe(o.SubmitClickedMessage.getTopic(),function(e,t){if(u.tab=c.getMercuryWzdTab(),g.shouldExecute(u,d)){var o=p("[data-gcw-storeable-name=gcw-destination]:visible"),i="#"+p(o).attr("data-hotel_id_element"),n="#"+p(o).attr("data-city_element"),r=p(i),a=p(r).val(),s=p(n),l=p(s).val();a&&l?(p(s).attr("name","destination"),p(o).removeAttr("name")):(p(o).attr("name","destination"),p(s).removeAttr("name"))}})},e.prototype.getMercuryWzdTab=function(){return p("li.tab:visible").children("button.on").data("lob")},e}();n.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,i,n,o,r,a,u,c,s,l,p,g){"use strict";t.__esModule=!0;var d=[{clients:["Hotels.Search"],experiment:{id:13081,name:"OneSearchTypeahead"}}],h=function(){function e(){this.applicableClientIds=["Hotels.Search"],this.applicableTextInputElementIds=["inpSearchNear"]}return e.prototype.modifyParameters=function(e,t,o){return-1<this.applicableClientIds.indexOf(l.TypeaheadUtils.getClientId())&&-1<this.applicableTextInputElementIds.indexOf(o.inputElementId)&&c.shouldExecute(t,d)&&(e.rid=o.searchRegionId,e.mask|=128,p.addFeatureFlag("onesearchta",d,e,t)),e},e.prototype.handleContentToShow=function(e,t,o){-1<this.applicableClientIds.indexOf(l.TypeaheadUtils.getClientId())&&-1<this.applicableTextInputElementIds.indexOf(t.attr("id"))&&c.shouldExecute(o,d)&&this.showHotelNameSearchSupportedInfo(e)},e.prototype.getExperiments=function(){return s.getExperiments(d)},e.prototype.handlePageLoad=function(e,s){var l=this;u.TypeaheadMessage.subscribe(r.InputValueEditedMessage.getTopic(),function(e,t){l.clearRegionIdForChangeSearchSelection(),l.clearLatLongForChangeSearchSelection(),l.clearHotelIdForChangeSearchSelection(),i("input[name='searchPriorityOverride']").val("")}),u.TypeaheadMessage.subscribe(a.SuggestionSelectedMessage.getTopic(),function(e,t){var o=t.getSuggestion().getHotelId().orElse(""),i=t.getSuggestion().getRegionId().orElse(""),n=t.getSuggestion().getLatLong().orElse(""),r=t.getSuggestion().getCity().orElse("");if(c.shouldExecute(s,d)){var a=t.getSuggestion().getExtraSearchParams();l.regionId=i,l.latLong=n,o&&(a.orElse([]).forEach(function(e){"searchPriorityOverride"===e.field&&(l.searchPriorityOverride=e.value)}),l.selected=o,l.cityName=r)}else o?l.selected=o:l.clearHotelIdForChangeSearchSelection()}),uitk.subscribe(o.ClientHandlerRegistry.HSR_SUBMIT_GET_QUERY_MESSAGE,function(e,t){c.shouldExecute(s,d)&&(l.setRegionIdForChangeSearchSelection(t),l.setLatLongForChangeSearchSelection(t),l.selected?l.setSelectedHotelIdForChangeSearchSelection(t):i("input[name='searchPriorityOverride']").val(""))}),uitk.subscribe(o.ClientHandlerRegistry.HSR_SUBMIT_BEFORE_UPDATE_HASH_MESSAGE,function(e,t){if(l.selected){var o=l.updateQueryParam(t.query,"destination",l.cityName);t.query=o}else i("#selected").val()||i("input[name='searchPriorityOverride']").val("")})},e.prototype.showHotelNameSearchSupportedInfo=function(e){var t=n.taOnesearchPromptText?n.taOnesearchPromptText:"You can also search by hotel name or attraction",o=i.parseHTML("<li role='presentation' class='' style=padding-top:0.92307692em;padding-right:0.92307692em;padding-bottom:0;padding-left:0.92307692em;margin-top:0.92307692em;border-top-width:1px;border-top-style:solid;border-top-color:#DDD;><div id='oneSearchTypeaheadPromptInner' style=display:block;padding-top:0;padding-right:0.46153846em;padding-bottom:0;padding-left:0.46153846em;><span class='icon icon-info' aria-hidden='true' style=padding-right:0.76923077em;></span><span class='ta-onesearch-prompt-text' style=font-size:0.9em>"+t+"</span></div></li>");e.find("ul").append(o)},e.prototype.setRegionIdForChangeSearchSelection=function(e){var t=this.regionId;t&&(i("#regionId").val(t),e.query&&-1===e.query.indexOf("regionId")&&(e.query+="&regionId="+t))},e.prototype.clearRegionIdForChangeSearchSelection=function(){this.regionId=null,i("#regionId").val("")},e.prototype.setSelectedHotelIdForChangeSearchSelection=function(e){var t=this.selected,o=this.searchPriorityOverride;t&&(i("#selected").val(t),e.query&&-1===e.query.indexOf("selected")&&(e.query+="&selected="+t),e.query&&-1===e.query.indexOf("searchPriorityOverride")&&(e.query+="&searchPriorityOverride="+o))},e.prototype.clearHotelIdForChangeSearchSelection=function(){this.selected=null,i("#selected").val(""),this.searchPriorityOverride=null,i("input[name='searchPriorityOverride']").val(""),this.cityName=null},e.prototype.setLatLongForChangeSearchSelection=function(e){var t=this.latLong;t&&(i("#latLong").val(t),e.query&&-1===e.query.indexOf("latLong")&&(e.query+="&latLong="+t))},e.prototype.clearLatLongForChangeSearchSelection=function(){this.latLong=null,i("#latLong").val("")},e.prototype.updateQueryParam=function(e,t,o){var i=e,n=t+"="+o,r="?"+n;if(i){var a=new RegExp(t+"[^&]*"),s=new RegExp(t+"=[^&;]+[&;]?");r=null==o||""===o?(r=i.replace(s,"$1")).replace(/[&;]$/,""):null!==i.match(a)?i.replace(a,""+n):i+"&"+n}return r},e}();g.registerPlugin(new h)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,o,n,i,r,a){"use strict";t.__esModule=!0;var s=[{tabs:["flight"]}],l=[{tabs:["car"]}],u=[s,l],c=function(){function e(){}return e.prototype.getExperiments=function(){return i.getExperiments([].concat.apply([],u))},e.prototype.modifySuggestions=function(e,t,o){var i="";return r.TypeaheadUtils.isWithinMobileBreakpoint()&&e&&0<e.length&&(n.shouldExecute(t,s)&&(i="1.077"),n.shouldExecute(t,l)&&(i="1.231"),""!==i&&e.forEach(function(e){e.style="font-size:"+i+"em"})),e},e}();a.registerPlugin(new c)}),require(["require","exports","jquery","typeahead/client/ClientHandlerRegistry","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,i,n,r,a,s,l,u,o){"use strict";t.__esModule=!0;var c=[{clients:["Homepage","AWSHomepage"],tabs:["activity"]},{clients:["LXLandingPage"]}],p=function(){function e(){}return e.prototype.modifyParameters=function(e,t,o){return t.tab=n.ClientHandlerRegistry.getTab(),u.addFeatureFlag("lxcategory",c,e,t,o)},e.prototype.modifySuggestions=function(e,t,o){return e&&0<e.length&&l.shouldExecute(t,c)&&e.forEach(function(e){if(e.hierarchyInfo){var t=e.hierarchyInfo.relation;t&&"lxcategory"===t[0]&&(e.showAsHierarchy=!0)}}),e},e.prototype.handlePageLoad=function(e,o){s.TypeaheadMessage.subscribe(a.SuggestionSelectedMessage.getTopic(),function(e,t){(o.tab=n.ClientHandlerRegistry.getTab(),l.shouldExecute(o,c))&&t.getSuggestion().getExtraSearchParams().orElse([]).forEach(function(e){var t=document.createElement("INPUT");t.setAttribute("type","hidden"),t.setAttribute("class","uta-search-parameter"),t.setAttribute("name",e.field),t.setAttribute("value",e.value),i("div.tabs-container").find("form:visible").append(t)})}),s.TypeaheadMessage.subscribe(r.InputValueEditedMessage.getTopic(),function(e,t){l.shouldExecute(o,c)&&i("input.uta-search-parameter").remove()})},e}();o.registerPlugin(new p)}),require(["require","exports","typeahead/core/StripingConfiguration","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,o,i,n){"use strict";t.__esModule=!0;var r=[{lobs:["FLIGHTS"]}],a=function(){function e(){}return e.prototype.modifyParameters=function(e,t,o){return i.addFeatureFlag("nearby_airport",r,e,t,o)},e.prototype.getExperiments=function(){return o.getExperiments(r)},e}();n.registerPlugin(new a)}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","universalTypeahead"],function(e,t,o,i,a,s,l,n){"use strict";t.__esModule=!0;var r=function(){function e(){this.isMetricsLogged=!1}return e.prototype.handlePageLoad=function(e,t){this.evaluateMetrics()},e.prototype.evaluateMetrics=function(){var o=this,e=Date.now(),i={name:"UtaPageloadMetrics"};i.utaBundle=this.getUtaBundleUrl(),i.numberOfInputInteractions=0,i.durationInMillisFromStorefrontScriptStartToUtaScriptStart=isNaN(window.storefrontScriptLoadingStartedTimestamp)||isNaN(window.utaScriptLoadingStartedTimestamp)?void 0:window.utaScriptLoadingStartedTimestamp-window.storefrontScriptLoadingStartedTimestamp,i.durationInMillisFromUtaScriptStartToUtaReady=isNaN(window.utaModuleReadyTimeStamp)||isNaN(window.utaScriptLoadingStartedTimestamp)?void 0:window.utaModuleReadyTimeStamp-window.utaScriptLoadingStartedTimestamp,i.durationInMillisFromUtaReadyToUtaPageLoadHandler=isNaN(e)||isNaN(window.utaModuleReadyTimeStamp)?void 0:e-window.utaModuleReadyTimeStamp,$("body").one("focus","[data-provide=utypeahead]",function(){var e=Date.now();i.durationInMillisFromStorefrontScriptStartToInputFocus=isNaN(window.storefrontScriptLoadingStartedTimestamp)?void 0:e-window.storefrontScriptLoadingStartedTimestamp}),$("body").on("input.typeahead_metrics","[data-provide=utypeahead]",function(){i.numberOfInputInteractions++});var n=l.TypeaheadMessage.subscribe(s.SuggestionShownMessage.getTopic(),function(e,t){i.domElementId=t.getDomElementId(),i.suggestionsRenderTimeInMillis=t.getRenderTime(),l.TypeaheadMessage.unsubscribe(e,n),o.logMetrics(i)}),r=l.TypeaheadMessage.subscribe(a.SubmitClickedMessage.getTopic(),function(e,t){l.TypeaheadMessage.unsubscribe(e,r),o.logMetrics(i)})},e.prototype.logMetrics=function(e){this.isMetricsLogged||(e.tab=o.ClientHandlerRegistry.getTab(),e.isReadyOnFocus=!window.isUtaModuleNotReadyOnFocus,i.default.log(void 0,void 0,void 0,e),this.isMetricsLogged=!0,$("body").off("input.typeahead_metrics"),window.utaDebug&&(console.dir("uTA Pageload Metrics:"+JSON.stringify(e)),console.dir(e)))},e.prototype.getUtaBundleUrl=function(){var e=new Error;if(e.stack){var t=/(http.+universal_typeahead_bundle.*.js)/.exec(e.stack);return t&&t[1]?t[1]:void 0}},e}();n.registerPlugin(new r)}),require(["require","exports","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,o,n,i,r){"use strict";t.__esModule=!0;var a=function(){function e(){var i=this;this.applicableClientIds=["Homepage","AWSHomepage","PackageLandingPage"],this.applicablePackageTypes=["FH"],n.TypeaheadMessage.subscribe(o.FormSubmittedMessage.getTopic(),function(e,t){if(t.isFormValid()&&i.isRedirectApplicable()&&t.getEvent()){var o=i.getRedirectPath($(t.getEvent().currentTarget));o&&(t.getEvent().preventDefault(),window.location.href=o)}})}return e.prototype.isRedirectApplicable=function(){var e=i.TypeaheadUtils.getClientId(),t=i.TypeaheadUtils.getShortPackageType();return-1<this.applicableClientIds.indexOf(e)&&-1<this.applicablePackageTypes.indexOf(t)},e.prototype.getRedirectPath=function(e){var t=e.find("input[data-gcw-field-type=destination]:visible").closest("div.autocomplete").find("input[data-gcw-storeable-name=gcw-destination-ta]").val();if(t){var o=JSON.parse(t);if(o.redirectPath)return window.location.protocol+"//"+window.location.host+o.redirectPath}},e}();r.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,a,i,n,r,s,o,l,u){"use strict";t.__esModule=!0;var c=[{clients:["PackageLandingPage","FlightsLandingPage","HotelsLandingPage","CarsLandingPage"]},{clients:["Homepage","AWSHomepage"],tabs:["flight","hotel","car","package"]}],p=function(){function e(){var o=this;this.isScrollTopOn=!1,r.TypeaheadMessage.subscribe(i.ElementFocusedMessage.getTopic(),function(e,t){o.isScrollTopOn=!1,l.TypeaheadUtils.isWithinMobileBreakpoint()&&s.shouldExecute(t.getContext(),c)&&(o.scrollTop(a("#"+t.getDomElementId())),o.isScrollTopOn=!0)}),r.TypeaheadMessage.subscribe(n.InputValueEditedMessage.getTopic(),function(e,t){o.isScrollTopOn&&o.scrollTop(a("#"+t.getDomElementId()))})}return e.prototype.getExperiments=function(){return o.getExperiments(c)},e.prototype.scrollTop=function(e){var t=a("body"),o="wheel touchmove";if(!(1<document.documentElement.clientWidth/window.innerWidth)){var i=e.offset().top-13,n=e.siblings(".label");0<n.length&&(i=n.offset().top-7);var r=t.scrollTop();Math.abs(r-i)<6.5||(t.on(o,function(){t.off(o),t.stop()}),t.animate({scrollTop:i},300))}},e}();u.registerPlugin(new p)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,i,n,r,o){"use strict";t.__esModule=!0;var a=[{clients:["Flights.Search"]},{}],s=function(){function o(){}return o.enableAutoSelection=function(t){var e=function(){var e=i(t)[0];e&&i(t).val()&&document.activeElement===e&&e.setSelectionRange(0,9999)};setTimeout(function(){i(t).one("mouseup",function(){e()}),e()},0)},o.prototype.getExperiments=function(){return r.getExperiments(a)},o.prototype.handleInputElementFocusByHumanOrScript=function(e,t){n.shouldExecute(t,a)&&o.enableAutoSelection(e)},o}();o.registerPlugin(new s)}),require(["require","exports","typeahead/core/EssDataProvider","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/SuggestionsAggregator","universalTypeahead"],function(e,t,o,i,n,r,a){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","FlightsLandingPage","CarsLandingPage","HotelsLandingPage"],tabs:["flight","hotel","car","activity","package","packageFlightHotel","packageFlightHotelCar","packageFlightCar","packageHotelCar","flightHotel","flightHotelCar","flightCar","hotelCar","carHotel","carHotelFlight","carFlight"]},{clients:["Hotels.Search","Flights.Search","Cars.Search","LX.Search","LXLandingPage","PackageLandingPage"]}],l=function(){function e(){this.dataProvider=new o.EssDataProvider}return e.prototype.getId=function(){return r.SuggesterId.EssOnFocusPersonalizedSuggester},e.prototype.suggest=function(e,t){var o=$.Deferred();return i.shouldExecute(t,s)?this.fetchSuggestionsAndResolve(o,e,t):this.resolve(o,[]),o.promise()},e.prototype.getExperiments=function(){return n.getExperiments(s)},e.prototype.suggestOnFocus=function(e,t){return this.suggest(e,t)},e.prototype.resolve=function(e,t){e.resolve({id:this.getId(),results:t})},e.prototype.fetchSuggestionsAndResolve=function(e,t,o){var i=this,n=[];this.dataProvider.fetchData($.extend(!0,{},t,{context:o},{personalize:!0})).then(function(e){e&&e.results&&(n=n.concat(e.results))}).always(function(){i.resolve(e,n)})},e}();a.registerPlugin(new l)});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,i,n,r,o,a){"use strict";t.__esModule=!0;var s=function(e){function t(){var o=e.call(this)||this;return o.regionId="",o.configuration=[{clients:["Hotels.Search"],lobs:["HOTELS"]}],r.TypeaheadMessage.subscribe(n.SubmitClickedMessage.getTopic(),function(e,t){o.regionId=""}),o}return __extends(t,e),t.prototype.modify=function(e,t,o){o.srchText||(""===this.regionId&&(this.regionId=i("#regionId").val()),e.rid=this.regionId)},t}(o.SuggestServiceParamModifier);a.registerPlugin(new s)});__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();require(["require","exports","jquery","typeahead/core/SuggestionModifier","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,o,i,n,r){"use strict";t.__esModule=!0;var a=function(o){function i(){var e=null!==o&&o.apply(this,arguments)||this;return e.configuration=[{lobs:["FLIGHTS"]},{clients:["Flights.Search"]}],e.featureName="SuppressIcon",e}return __extends(i,o),i.prototype.modify=function(e,t){e.forEach(function(e){"LIST"===e.type||n.TypeaheadUtils.isChildSuggestion(e)||(e.icon="none")})},i.prototype.precondition=function(e,t){return o.prototype.precondition.call(this,e,t)&&i.inapplicableClients.lastIndexOf(t.clientId)<0},i.inapplicableClients=[],i}(i.SuggestionModifier);r.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,r,i,o){"use strict";t.__esModule=!0;var n=[{clients:["Flights.Search"],experiment:{id:15336,name:"FSRP_uTA_OptimizeDropdownGeometry",value:0}}],a=function(){function s(){this.showHandlers={}}return s.optimizeDropDownGeometry=function(e,t){var o=4+document.body.clientWidth-2*s.baseSpacingHorz,i=4+Math.min(s.uitkTypeaheadWidthPx,o),n=4+Math.min(s.uitkTypeaheadMinWidthPx,o),r=Math.min(i,o),a=t.offset().left-2;o<a+r&&(a=s.baseSpacingHorz+o-r-2),a-=t.get(0).getBoundingClientRect().left,e.css({left:a+"px","max-width":i+"px","min-width":n+"px",width:r+"px"})},s.prototype.getExperiments=function(){},s.prototype.handleDropDownHide=function(e,t,o){var i=t.attr("id"),n=i?this.showHandlers[i]:void 0;n&&(r(window).off(s.resizeEventTypes,null,n),delete this.showHandlers[i])},s.prototype.handleDropDownShow=function(e,t,o){i.shouldExecute(o,n)&&this.doHandleDropDownShow(e,t)},s.prototype.doHandleDropDownShow=function(t,o){var e=function(e){s.optimizeDropDownGeometry(t,o)};e(),r(window).on(s.resizeEventTypes,null,null,e),o.attr("id")&&(this.showHandlers[o.attr("id")]=e)},s.baseSpacingHorz=12,s.uitkTypeaheadWidthPx=390,s.uitkTypeaheadMinWidthPx=282,s.resizeEventTypes="orientationchange resize",s}();o.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,i,n,o){"use strict";t.__esModule=!0;var r=[{}],a=function(){function s(){this.showHandlers={}}return s.optimizeDropDownGeometry=function(e,t){var o=4+document.body.clientWidth-2*s.baseSpacingHorz,i=4+Math.min(s.uitkTypeaheadMinWidthPx,o),n=4+Math.min(s.uitkTypeaheadWidthPx,o),r=Math.min(n,o),a=t.offset().left-2;o<a+r&&(a=s.baseSpacingHorz+o-r-2),a-=t.get(0).getBoundingClientRect().left,s.applyDropDownGeometry(e,a,n,i,r)},s.applyDropDownGeometry=function(e,t,o,i,n){e.css({left:t+"px","max-width":o+"px","min-width":i+"px",width:n+"px"})},s.prototype.handleDropDownShow=function(e,t,o){0<=s.applicableClients.indexOf(o.clientId)&&n.shouldExecute(o,r)&&this.doHandleDropDownShow(e,t)},s.prototype.doHandleDropDownShow=function(t,o){var e=function(e){s.optimizeDropDownGeometry(t,o)};e(),i(window).on(s.resizeEventTypes,null,null,e),o.attr("id")&&(this.showHandlers[o.attr("id")]=e)},s.applicableClients=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"],s.baseSpacingHorz=12,s.uitkTypeaheadWidthPx=600,s.uitkTypeaheadMinWidthPx=282,s.resizeEventTypes="orientationchange resize",s}();o.registerPlugin(new a)}),require(["require","exports","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,o,i,s,n,r){"use strict";t.__esModule=!0;var l=[{experiment:{id:24828,name:"ESS_WRAP_TA_DISPLAY_HOTEL",value:1},lobs:["HOTELS"]},{experiment:{id:24829,name:"ESS_WRAP_DISPLAY_NAME_CARS",value:1},lobs:["CARS"]},{experiment:{id:24830,name:"ESS_WRAP_DISPLAY_NAME_FLIGHTS",value:1},lobs:["FLIGHTS"]}],a=function(){function a(){}return a.prototype.getExperiments=function(){return n.getExperiments(l)},a.prototype.handlePageLoad=function(e,n){var r=this;i.TypeaheadMessage.subscribe(o.SuggestionShownMessage.getTopic(),function(e,t){var o=$("div.autocomplete-dropdown:visible ul.results");if(n.lob=t.getLob(),!o.children("style#wrap-suggestion-text").length&&r.isTextOverflowing()&&s.shouldExecute(n,l)){var i=document.createElement("style");i.id="wrap-suggestion-text",i.type="text/css",i.innerHTML=a.css,o.append(i)}})},a.prototype.isTextOverflowing=function(){var e=$("div.autocomplete-dropdown:visible a.details");if(e.length)for(var t=e.innerWidth(),o=0;o<e.length;o++)if(e[o].scrollWidth>t)return!0;return!1},a.css="\n        div.autocomplete-dropdown ul.results a.details {white-space: normal !important;}\n        div.autocomplete-dropdown ul.results a.details .icon {float: left;}\n        div.autocomplete-dropdown ul.results a.details .text {display:block; overflow:hidden;}\n        div.autocomplete-dropdown .results-item.list-item > a.details > .text { float:left; } \n    ",a}();r.registerPlugin(new a)}),define("typeahead/client/ActivitiesSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","a#toggleSearch",function(){$("button#srpSearch").click(function(){o.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),o.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.rfrrIdPrefix="LX.SR|UpdateSearch",t.APPLICABLE_CLIENT_ID="LX.Search",t}();t.ActivitiesSearchResultsPageHandler=i}),define("typeahead/client/CarSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","a#wizard-toggle",function(){$("button#wizard-update").click(function(){o.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),o.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.rfrrIdPrefix="CAR.SR|UpdateSearch",t.APPLICABLE_CLIENT_ID="Cars.Search",t}();t.CarSearchResultsPageHandler=i}),define("typeahead/client/ClientHandlerRegistry",["require","exports","typeahead/core/context","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/TypeaheadUtils","typeahead/core/util/Optional"],function(e,t,o,n,r,a,s,l,u,c,p,g){"use strict";t.__esModule=!0;var i=function(){function i(){}return i.handlePageLoad=function(){(i.client=i.getClientHandler(p.TypeaheadUtils.getClientId())).isPresent()?(i.client.get().subscribeFormLoadedEvent(),i.client.get().subscribeFormSubmitEvent()):a.default.log(new Error("No client handler for this page. Omniture logs may not work."),r.Severity.MustFix,n.ProblemOrigin.UniversalTypeahead)},i.getTab=function(){return i.client.isPresent()?i.client.get().getTab():void 0},i.registerClient=function(e){i.allClients.indexOf(e)<0&&i.allClients.push(e)},i.publishSubmitClickedMessage=function(e,t){u.TypeaheadMessage.publish(new l.SubmitClickedMessage(e,t)),u.TypeaheadMessage.publish(new c.UserExitedMessage)},i.publishFormSubmittedMessage=function(e,t){u.TypeaheadMessage.publish(new s.FormSubmittedMessage(e,o,t))},i.getGeolocationViewController=function(e){return i.client.isPresent()?i.client.get().getGeolocationViewController(e):void 0},i.getClientHandler=function(e){var t=void 0;if(e)for(var o=0;o<i.allClients.length;o++)if(i.allClients[o].isApplicable(e)){t=i.allClients[o];break}return g.Optional.ofNullable(t)},i.HSR_SUBMIT_SHOW_ERRORS_MESSAGE="hsr.submit.showErrors",i.HSR_SUBMIT_GET_QUERY_MESSAGE="hsr.submit.getQuery",i.HSR_SUBMIT_BEFORE_UPDATE_HASH_MESSAGE="hsr.submit.beforeUpdateHash",i.allClients=[],i.client=g.Optional.ofNullable(void 0),i}();t.ClientHandlerRegistry=i}),define("typeahead/client/FlightSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","#flight-wizard-search-button",function(){o.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),$("#validation-alert").length||o.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.rfrrIdPrefix="FLT.SR|UpdateSearch",t.APPLICABLE_CLIENT_ID="Flights.Search",t}();t.FlightSearchResultsPageHandler=i}),define("typeahead/client/HotelSearchResultsPageHandler",["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,i,n,r,a){"use strict";t.__esModule=!0;var o=function(){function o(){}return o.prototype.isApplicable=function(e){return o.APPLICABLE_CLIENT_ID===e},o.prototype.subscribeFormSubmitEvent=function(){var o=this;$("form").on("click","button[type=submit]",function(e){if(0<$(e.target).parents("form:has(input[data-provide=utypeahead])").length){var t=$(e.target).data("track");t=t.match(/(\w+).(\w+)/g)[0]+"|"+t.match(/(\w+).(\w+)/g)[1],$(e.target).removeAttr("data-track"),n.ClientHandlerRegistry.publishSubmitClickedMessage(t)}}),uitk.subscribe(n.ClientHandlerRegistry.HSR_SUBMIT_SHOW_ERRORS_MESSAGE,function(e,t){n.ClientHandlerRegistry.publishFormSubmittedMessage(t.isValid)}),uitk.subscribe(n.ClientHandlerRegistry.HSR_SUBMIT_GET_QUERY_MESSAGE,function(e,t){o.setLatLongForCurrentLocation(t)})},o.prototype.subscribeFormLoadedEvent=function(){uitk.subscribe(o.SEARCH_WIZARD_OPENED_MESSAGE,function(e,t){o.SEARCH_WIZARD_TOGGLE_BUTTON_ID===t.attr("id")&&a.TypeaheadMessage.publish(new r.FormLoadedMessage(void 0))})},o.prototype.getTab=function(){},o.prototype.getGeolocationViewController=function(){},o.prototype.setLatLongForCurrentLocation=function(e){var t=this.getLatLongFromUrl();this.isDestinationCurrentLocation()&&t&&($("#latLong").val(t),e.query&&-1===e.query.indexOf("latLong")&&(e.query+="&latLong="+t))},o.prototype.getLatLongFromUrl=function(){var e;return(e=this.getRequestParameterValue("latLong"))&&e.match(/^[+-]?\d+\.\d+,[+-]?\d+\.\d+$/)?e:void 0},o.prototype.isDestinationCurrentLocation=function(){var e;return!!(e=this.getRequestParameterValue("destination"))&&(e=e.replace(/\+/g," "),i.geolocationDisplayText===$("#inpSearchNear").val()&&i.geolocationDisplayText===e)},o.prototype.getRequestParameterValue=function(e){var t=new RegExp(e+"=([^&]*)&?").exec(decodeURIComponent(window.location.href));if(t&&t.length&&t[1])return t[1]},o.APPLICABLE_CLIENT_ID="Hotels.Search",o.SEARCH_WIZARD_OPENED_MESSAGE="toggle.opened",o.SEARCH_WIZARD_TOGGLE_BUTTON_ID="changeSearchWizard",o}();t.HotelSearchResultsPageHandler=o}),define("typeahead/client/MercuryWizardHandler",["require","exports","jquery","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/MercuryGeolocationViewController","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,o,i,n,r,a){"use strict";t.__esModule=!0;var s=function(){function t(){uitk.subscribe("sfSelectedLobs.updated",function(e,t){-1<["flightHotel","flightHotelCar"].indexOf(t.searchSubType)&&o("input[data-provide=utypeahead]").removeData("typeahead")})}return t.prototype.isApplicable=function(e){return-1<t.APPLICABLE_CLIENT_IDS.indexOf(e)},t.prototype.subscribeFormSubmitEvent=function(){o("form").on("click","button[type=submit]",function(e){0<o(e.target).parents("form:has(input[data-provide=utypeahead])").length&&i.ClientHandlerRegistry.publishSubmitClickedMessage(null,e)}),setTimeout(function(){o("form:has(input[data-provide=utypeahead])").on("submit.typeahead",function(e){var t;i.ClientHandlerRegistry.publishFormSubmittedMessage((t=o("form:has(input[data-provide=utypeahead]):visible .validation-alert")).is(":hidden")||t.hasClass("visuallyhidden"),e)})},0)},t.prototype.subscribeFormLoadedEvent=function(){var e=this,t=function(){a.TypeaheadMessage.publish(new r.FormLoadedMessage(e.getTab()))};t(),uitk.subscribe("mercury-form-history-loaded",function(){t()})},t.prototype.getTab=function(){return o("li.tab:visible").children("button.on").data("lob")},t.prototype.getGeolocationViewController=function(e){return this.geolocationViewController||(this.geolocationViewController=new n.MercuryGeolocationViewController(e)),this.geolocationViewController},t.APPLICABLE_CLIENT_IDS=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"],t}();t.MercuryWizardHandler=s}),define("typeahead/client/OpenSearchPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,o,i,n){"use strict";t.__esModule=!0;var r=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){var o=this;$("div.open-search-page").on("click","button#search-button",function(){$("#uta-search-query").val()&&o.publishSubmitMessages()}),n.TypeaheadMessage.subscribe(i.SuggestionSelectedMessage.getTopic(),function(e,t){setTimeout(function(){o.publishSubmitMessages()},0)})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.prototype.publishSubmitMessages=function(){o.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),o.ClientHandlerRegistry.publishFormSubmittedMessage(!0)},t.rfrrIdPrefix="Open.Search|UpdateSearch",t.APPLICABLE_CLIENT_ID="OpenSearchPage",t}();t.OpenSearchPageHandler=r}),define("typeahead/client/UserAccountPageHandler",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var o=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.APPLICABLE_CLIENT_ID="UserAccountPage",t}();t.UserAccountPageHandler=o});
//# sourceMappingURL=universal_typeahead_bundle.min.js.map

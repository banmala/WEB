require(["gc/pageModel","dctk/dctk"],function(d,h){function l(d,f,a){if(window.dctk&&window.dctk.onReady)h.onReady(function(){h.logExperiment({id:7203,value:1,guid:d,tpid:f,eapid:a})})}var f=d.user.guid,n=d.site.tpid,k=d.site.eapid;if("object"===typeof d&&"object"===typeof d.user&&"object"===typeof d.site)try{l(f,n,k)}catch(m){logError("sf/abtests.js",Error("sfAbtests/call to logExperiments failed"),[])}});define("sfAbTest",["jquery","storefrontPageModel","cookies","dctk/dctk"],function(d,h,l,f){function n(a){var c=l.get("abov"),b={experiments:[{id:a,value:0}],id:a,value:0};if("string"!==typeof c||0===c.length)return b;c=c.split(":");for(var d in c)if(0<c[d].length){var e=c[d].split("|");if(3===e.length&&parseInt(e[0],10)===parseInt(a,10))return{experiments:[{id:e[0],value:e[2]}],id:e[0],value:e[2]}}return b}var k=h.guid,m=h.userInteraction.context.site.tpid,p=h.userInteraction.context.site.eapid;return{_loggedTests:[],_forcedOverrides:{},get:function(a,c,b){try{var g=d.Deferred();if("localhost"===window.location.hostname){var e=n(a);if("function"===typeof b)b(e);else return g.resolve(e)}else if(k&&m&&a){if(c)if("function"===typeof b)this.log(a,b);else return this.log(a,b);else if(f.onReady(function(){f.evaluateExperiment({id:"string"===typeof a?parseInt(a,10):a,tpid:m,eapid:p,guid:k,callback:function(a){if(a&&a.error&&a.error.message)if("4301"===a.error.message.substr(0,4))g.reject(a);else{var e={notes:"sfAbTest/get"};a.experiments&&a.experiments[0]&&(e.ab=a.experiments[0].id);window.logError("sfError",a.error,e);void 0===b&&g.reject(a)}else"function"===typeof b?b(a):g.resolve(a)}})}),void 0===b)return g.promise();if(-1<window.location.host.indexOf("localhost")&&this._forcedOverrides.id&&this._forcedOverrides.value)return this._forcedOverrides}}catch(q){window.logError("sfError",q,{notes:"sfAbTest"})}},log:function(a,c){var b=d.Deferred();if("localhost"===window.location.hostname){var g=n(a);if("function"===typeof c)c(g);else return b.resolve(g)}else if(k&&m&&a&&(f.onReady(function(){f.evaluateExperimentAndLog({id:"string"===typeof a?parseInt(a,10):a,tpid:m,eapid:p,guid:k,callback:function(a){if(a&&a.error&&a.error.message){if("4301"!==a.error.message.substr(0,4)){var d={notes:"sfAbTest/log"};a.experiments&&a.experiments[0]&&(d.ab=a.experiments[0].id);window.logError("sfError",a.error,d);void 0===c&&b.reject(a)}}else"function"===typeof c?c(a):b.resolve(a)}})}),void 0===c))return b.promise()},override:function(a,c){this._forcedOverrides.id=a;this._forcedOverrides.value=c;var b=[a,"0",c].join("|");b=_.compact([l.get("abov"),b]).join(":");l.set("abov",b)}}});var test={};
//# sourceMappingURL=metrics.js.map
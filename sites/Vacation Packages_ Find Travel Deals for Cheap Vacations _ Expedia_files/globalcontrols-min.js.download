"use strict";function createMarketingCookie(e,t,n,r,i){var a=e+"="+t+";";n&&(n instanceof Date?isNaN(n.getTime())&&(n=new Date):n=new Date((new Date).getTime()+1e3*parseInt(n)*60*60*24),a+="expires="+n.toGMTString()+";"),r&&(a+="path="+r+";"),i&&(a+="domain="+i+";"),document.cookie=a}function getMarketingCookie_unreliable(e){var t=new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g"),n=t.exec(document.cookie);return null===n?null:n[1]}function deleteMarketingCookie(e,t,n){createMarketingCookie(e,"",-1,t,n)}function setMarketingEAPID(e){var t=function(n,r){if(getMarketingCookie_unreliable("iEAPID")!=n){var i=getMarketingDomain();deleteMarketingCookie("iEAPID","/",i),createMarketingCookie("iEAPID",n,null,"/",i),r<5&&setTimeout(function(){t(e,r++)},1500)}};"undefined"!=typeof jQuery?$(document).ready(function(){t(e,0)}):t(e,0)}function getMarketingDomain(){var e=location.href.match(/:\/\/(www\.)?([^\/:]+)/);return e>""&&(e=e[2]?e[2]:"",e="."+e),e}function logoutMarketingUser(){var e=getMarketingDomain();deleteMarketingCookie("linfo","/",e),deleteMarketingCookie("user","/",e),deleteMarketingCookie("minfo","/",e),deleteMarketingCookie("accttype","/",e),deleteMarketingCookie("iEAPID","/",e)}function buildTaapMdpcidValue(e,t,n){var r="WPK."+e+"."+t+"-"+n;return r}function buildDateYYYYMMDD(e){var t=new Date((new Date).setTime((new Date).getTime()+24*e*60*60*1e3)),n=t.getFullYear().toString(),r=(t.getMonth()+1).toString();r.length<2&&(r="0"+r);var i=t.getDate().toString();return i.length<2&&(i="0"+i),n+r+i}function setMarketingCidInASPP(e,t){var n=buildDateYYYYMMDD(30),r="v.1,0|"+t+"|||||||||"+e+"|"+n+"|";createMarketingCookie("aspp",r,null,"/",getMarketingDomain())}!function(e,t){var n=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var n=function(e,t,r){return 1===arguments.length?n.get(e):n.set(e,t,r)};return n._document=e.document,n._cacheKeyPrefix="cookey.",n._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),n.defaults={path:"/",secure:!1},n.get=function(e){n._cachedDocumentCookie!==n._document.cookie&&n._renewCache();var r=n._cache[n._cacheKeyPrefix+e];return r===t?t:decodeURIComponent(r)},n.set=function(e,r,i){return i=n._getExtendedOptions(i),i.expires=n._getExpiresDate(r===t?-1:i.expires),n._document.cookie=n._generateCookieString(e,r,i),n},n.expire=function(e,r){return n.set(e,t,r)},n._getExtendedOptions=function(e){return{path:e&&e.path||n.defaults.path,domain:e&&e.domain||n.defaults.domain,expires:e&&e.expires||n.defaults.expires,secure:e&&e.secure!==t?e.secure:n.defaults.secure}},n._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},n._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?n._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!n._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},n._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var r=e+"="+t;return r+=n.path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toUTCString():"",r+=n.secure?";secure":""},n._getCacheFromString=function(e){for(var r={},i=e?e.split("; "):[],a=0;a<i.length;a++){var o=n._getKeyValuePairFromCookieString(i[a]);r[n._cacheKeyPrefix+o.key]===t&&(r[n._cacheKeyPrefix+o.key]=o.value)}return r},n._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var n,r=e.substr(0,t);try{n=decodeURIComponent(r)}catch(i){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+r+'"',i)}return{key:n,value:e.substr(t+1)}},n._renewCache=function(){n._cache=n._getCacheFromString(n._document.cookie),n._cachedDocumentCookie=n._document.cookie},n._areEnabled=function(){var e="cookies.js",t="1"===n.set(e,1).get(e);return n.expire(e),t},n.enabled=n._areEnabled(),n},r="object"==typeof e.document?n(e):n;"function"==typeof define&&define.amd?define("cookies",function(){return r}):"object"==typeof exports?("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=r),exports.Cookies=r):e.Cookies=r}("undefined"==typeof window?this:window),define("gc/abTestRegistry",["gc/abTestRegistryOverride","gc/errorLogging"],function(e,t){function n(e,t){for(var n={},r=e.length-1;r>=0;--r)n[e[r]]=e[r];for(var r=t.length-1;r>=0;--r)n[t[r]]=t[r];var i=[];for(var a in n)n.hasOwnProperty(a)&&i.push(n[a]);return i}try{var r=[11054,10901,11237,10921,11776,10406,10120,11046,11841,11842,11872,11636,11877,12234,12609,10188,12087,12963,12978,11714,12571,13429,13430,13543,13851,14261,13985,13986,14541,14592,14135,16064,14763,14764,15108,14767,14693,15538,15714,15805,16316,24500,24674,25126,25130,25792];return r=n(r,e)}catch(i){t.logError(i,"wizard","gc/abTestRegistryOverride","main")}}),function(e,t){"function"==typeof define&&define.amd?require(["gc/abTestRegistry","jquery"],t().initialize):"object"==typeof module&&module.exports&&(module.exports=t())}("undefined"!=typeof self?self:this,function(){function e(){return"function"==typeof define&&define.amd}function t(e,t,n){return y=t,k=e,w={},b="undefined"!=typeof n?n:document,l(k).then(function(){g()})}function n(e){return"string"==typeof e&&(e=parseInt(e)),e}function r(e,t,n){var r=a(e);return n&&s(e),r}function i(e,t){var n=a(e);return"undefined"!=typeof n?("undefined"!=typeof t&&t||s(e),n.value):0}function a(e){return e=n(e),w.hasOwnProperty(e)?w[e]:(console.log("Test ID "+e+" not evaluated. Add it to the abTestRegistry"),{id:e,value:0,cached:!1})}function o(e){e=n(e);var t=a(e);return t.cached&&!t.logged}function s(e){if(o(e))return y.ajax({url:S,type:"POST",dataType:"json",contentType:"application/json",data:d([e]),timeout:1e3}).then(function(){w[e].logged=!0})}function c(e){return"undefined"!=typeof w[e]&&w[e].logged===!0}function l(e){try{var t=u(e)}catch(n){return console.log("Not evaluating experiments. Missing cookies",e,n),y.Deferred().resolve().promise()}return y.ajax({url:t,dataType:"json",timeout:1e3}).then(function(e){if(e.evaluatedExperiments&&e.evaluatedExperiments.length>0){var t=e.evaluatedExperiments.map(function(e){return{id:parseInt(e.id),value:parseInt(e.value),cached:!0}}).reduce(function(e,t){return e[parseInt(t.id)]=t,e},{});Object.assign(w,t)}},function(e,t,n){console.log("Error evaluating AB tests",t,n)})}function d(e){try{var t={guid:f(),tpid:m(),eapid:v(),evaluatedExperiments:e.map(function(e){return a(e)})};return JSON.stringify(t)}catch(n){console.log("Not logging exposure for following experiments. Cookies missing",e,n)}}function u(e){var t=h("abov"),n=C+"?guid="+f()+"&tpid="+m()+"&eapid="+v();for(var r in e)n+="&id=",n+=e[r];return t.length>0&&(n+="&overrides="+t),n}function p(e,t){w[e].value=t}function g(){e()&&define("gc/abTest",[],function(){return A})}function h(e){var t="; "+b.cookie,n=t.split("; "+e+"=");return 2===n.length?n.pop().split(";").shift():""}function f(){return h("DUAID")}function m(){var e=h("tpid").split(",");return e.length>1?e[1]:""}function v(){return h("iEAPID")}var y,k,w,b,C="/api/bucketing/v1/evaluateExperiments/",S="/api/bucketing/v1/logExperiments",A={initialize:t,get:r,evaluateAndLog:i,override:p,log:s,isTestLogged:c,shouldTestBeLogged:o};return A}),require(["jquery","gc/abTestRegistry","env","gc/errorLogging"],function(e,t,n,r){function i(e){var t,n=window.location.search,r=e+"=";return t=n.indexOf(r)>-1?"&"+r+n.split(r)[1].split("&")[0]:""}function a(e){try{var t=e;t.hasUser=function(){return!!t.user},t.isUserAnonymous=function(){return t.hasUser()&&t.user.userStatus&&t.user.userStatus.match(/^ANONYMOUS$/i)},t.isUserIdentified=function(){return t.hasUser()&&t.user.userStatus&&t.user.userStatus.match(/^(AUTHENTICATED|IDENTIFIED)$/i)},t.isUserAuthenticated=function(){return t.hasUser()&&t.user.userStatus&&t.user.userStatus.match(/^AUTHENTICATED$/i)},l=t}catch(n){r.logError(n,"pagemodel","gc/pageModel","buildPageModel")}}function o(){define("gc/pageModel",[],function(){return l})}function s(e,t,n){a(l),r.logError(n,"pagemodel","gc/pageModel","$.ajax","Ajax Failed: "+t+" : "+n),"undefined"!=typeof console&&console.warn("failed to get model.json: ["+t+"] ["+n+"]")}try{for(var c=i("langid")+i("locale")+i("currency"),l={site:{id:0,tpid:0,eapid:0,brandName:"",companyCode:0,defaultDomain:"",langId:0,locale:"",resolvedCurrency:"USD"},user:{guid:"",userStatus:"ANONYMOUS",hasGroups:!1,arranged:!1},abTests:[]},d=0;d<t.length;d++)c.indexOf(t[d])===-1&&(c+="&id="+t[d]);window.__pageModel?o(a(window.__pageModel)):e.ajax({url:"//"+window.location.host+"/gc/model.json",data:c,dataType:"json",cache:!1,timeout:n.pageModelTimeout}).done(a).fail(s).always(o)}catch(u){r.logError(u,"pagemodel","gc/pageModel","main")}}),require(["gc/pageModel","jquery"],function(e,t){var n=t("#header-container").data("tab");if("undefined"!=typeof n&&""!==n){var r=t("ul.utility-nav"),i=r.data("selectedTabText")||"Currently selected";r.find("li").each(function(){var e=t(this);e.removeClass("selected-tab"),e.find(".selected-label").html("")});var a=t("#"+n);a[0]&&(a.addClass("selected-tab"),a.find(".selected-label").html(i))}e.site&&e.site.resolvedCurrency&&(t("#header-currency-menu .selected-item").text(e.site.resolvedCurrency),t("#currency-"+e.site.resolvedCurrency).hide())}),function(){define("gc/sp-tray-item-prototype",["jquery"],function(e){return{set:function(e,t,n){this.attributes[e]&&this.attributes[e]===t||(this.attributes[e]=t,n&&this.updateDisplay())},get:function(e){var t=null;return this.attributes[e]&&(t=this.attributes[e]),t},localizedAsOfKey:function(){return"SHORT_TIME"===this.get("dateTimeFormatType")?"asOfTime":"asOfDate"},insertBefore:function(e){this.$el.insertBefore(e)},appendTo:function(e){e.append(this.$el)},removeFromTray:function(){this.$el.remove()},moveToIndex:function(e){this.trayIndex=e},updateDisplay:function(){var t=e(e.trim(this.template(this.attributes))).find(".item-link");this.$el.empty().html(t),1===this.trayIndex&&this.$el.addClass("first")}}})}(),function(){define("gc/sp-car-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n="AIRPORT"==e.pickupRegionType?t.carsAt:t.carsNear;n=n.replace("{{destination}}",e.pickupLocation);var r='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-carsalt"></span></span><h4 class="item-title">'+n+'</h4><p class="item-date">'+e.pickupDate+" - "+e.dropOffDate+'</p><p class="item-dummy item-nested"></p><div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+t.daily+'<p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return r},i=function(t){var i=scratchpadTray.view.strings.item;this.trayIndex=t.trayIndex,this.template=r;var i=n.item;if(t.product){if(this.type="carSearch",this.attributes=t.carSearch,"AIRPORT"==this.get("pickupRegionType")?this.set("txtPreLocation",i.carsAt.replace("{{destination}}",this.get("pickupLocation"))):this.set("txtPreLocation",i.carsNear.replace("{{destination}}",this.get("pickupLocation"))),this.get("price")){var a=i.from.replace("{{itemPrice}}",this.get("price"));this.set("price",a),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",i.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",i.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))}else this.set("price",""),this.set("lastSeen","See price");this.$el=e(e.trim(this.template(this.attributes,i)))}};return i.prototype=t,i})}(),function(){define("gc/sp-cruise-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n=t.allDestinations;e.destination&&(n=e.destination);var r=t.allMonths;e.departureDate&&(r=e.departureDate);var i='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-cruisealt"></span></span><h4 class="item-title">'+n+'</h4><p class="item-date">'+r+'</p><p class="item-dummy item-nested"></p><div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+t.perNight+'<p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return i},i=function(t){var i=scratchpadTray.view.strings.item;this.trayIndex=t.trayIndex,this.template=r;var i=n.item;if(t.product){if(this.type="cruiseSearch",this.attributes=t.cruiseSearch,this.get("price")){var a=i.from.replace("{{itemPrice}}",this.get("price"));this.set("price",a),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",i.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",i.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))}else this.set("price",""),this.set("lastSeen","See price");this.$el=e(e.trim(this.template(this.attributes,i)))}};return i.prototype=t,i})}(),function(){define("gc/sp-flight-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n=e.legs.length,r="",i=0;for(i;i<n;i++){var a=e.legs[i],o="//images.trvl-media.com/media/content/expus/graphics/static_content/fusion/v0.1b/images/airlines/s/",s="multiple_airlines_logo",c=t.multiAirlineAltText,l=t.fromToAirports.replace("{{departureAirportCode}}",a.departureAirportCode).replace("{{arrivalAirportCode}}",a.arrivalAirportCode),d=t.fromToTime.replace("{{startTime}}",a.departureTime).replace("{{endTime}}",a.arrivalTime),u="";i>0&&(u=" item-group-gap");var p=a.numberOfDays?' <span class="number-of-days">+'+a.numberOfDays+"</span>":"";a.airlineImageFileName&&(s=a.airlineImageFileName,c=a.airlineName+t.airlineLogoAltText),o=o+s+"_sq.jpg",r=r+'<span class="item-img-icon'+u+'"><img src="'+o+'" alt="'+c+'" class="image" aspectRatio="1-1"></span><h4 class="item-title'+u+'">'+l+'</h4><p class="item-date"><span class="departure-date">'+a.departureDate+'</span><!----><span class="time-range">'+d+"</span>"+p+"</p>"}var g='<li class="scratchpad-item flight-detail"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data">'+r+'<div class="item-price-urgency"><strong class="price">'+e.formattedPricePerPerson+'</strong><p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return g},i=function(t){var i="",a=n.item;this.trayIndex=t.trayIndex,this.template=r,t.product&&(this.type="flightDetail",this.attributes=t.flightDetail,this.get("formattedPricePerPerson")?(this.set("price",this.get("formattedPricePerPerson")),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",a.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",a.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))):(this.set("formattedPricePerPerson",""),this.set("lastSeen","See price")),i=/\?/.test(this.attributes.url)?"&":"?",this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".FD"),this.set("deepLinkUrl",this.get("url")+this.get("rfrrString")),this.$el=e(e.trim(this.template(this.attributes,a))))};return i.prototype=t,i})}(),function(){define("gc/sp-flight-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e){var t='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-flightsalt"></span></span><h4 class="item-title">'+e.airportToAirport+'</h4><p class="item-date">'+e.departureDate+e.returnDate+'</p><p class="item-info item-nested">'+e.routeType+'</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return t},i=function(t){var i="",a=n.item;if(this.trayIndex=t.trayIndex,this.template=r,t.product){this.type="flight",this.attributes=t.flight;var o=a.fromToAirports.replace("{{departureAirportCode}}",this.get("departureAirportCode")).replace("{{arrivalAirportCode}}",this.get("arrivalAirportCode"));if(this.set("airportToAirport",o),this.get("price")){"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",a.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeen"))):this.set("lastSeen",a.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeen")));var s=a.from.replace("{{itemPrice}}",this.get("price"));this.set("price",s)}else this.set("price",""),this.set("lastSeen","See price");if(i=/\?/.test(this.attributes.deepLinkUrl)?"&":"?",this.get("returnDate")?this.set("returnDate"," - "+this.get("returnDate")):this.set("returnDate",""),this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".FS"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.get("routeType")){var c=this.get("routeType").replace("ROUND_TRIP",a.roundTrip).replace("ONE_WAY",a.oneWay);this.set("routeType",c)}this.$el=e(e.trim(this.template(this.attributes,a))),this.get("departureDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless")}};return i.prototype=t,i})}(),function(){define("gc/sp-hotel-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e){var t='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><img src="//images.trvl-media.com'+e.thumbnailUrl+'" alt="'+e.hotelName+'" class="image" aspectRatio="1-1"></span><h4 class="item-title">'+e.hotelName+'</h4><p class="item-date">'+e.checkInDate+" - "+e.checkOutDate+'</p><p class="item-watches item-nested">&nbsp;</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-nested">'+e.lastSeenDate+"</p></div></div></a></li>";return t},i=function(t){var i="",a=n.item;this.trayIndex=t.trayIndex,this.template=r,t.product&&(this.type="hotel",this.attributes=t.hotel,this.get("price")?"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeenDate",a.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeenDate",a.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate"))):(this.set("price",""),this.set("lastSeenDate",a.seePrice)),i=/\?/.test(this.get("deepLinkUrl"))?"&":"?",this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".HI"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.get("thumbnailUrl")&&this.set("thumbnailUrl",this.get("thumbnailUrl").replace("_s","_t")),this.$el=e(e.trim(this.template(this.attributes,a))),this.get("checkInDate")&&this.get("checkOutDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless"))};return i.prototype=t,i})}(),function(){define("gc/sp-hotel-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n=e.amount?'<div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+t.hotelSearchAvgPerNight+'</p><p class="item-nested">'+t.asOfDate.replace("{{lastSeenDate}}",e.lastSeenDate)+"</p></div>":"",r='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-hotelsalt"></span></span><h4 class="item-title">'+t.hotels.replace("{{destination}}",e.destination)+'</h4><p class="item-date">'+t.fromToDate.replace("{{startDate}}",e.checkInDate).replace("{{endDate}}",e.checkOutDate)+'</p><p class="item-watches item-nested">&nbsp;</p>'+n+"</div></a></li>";return r},i=function(t){var i="",a=n.item;this.trayIndex=t.trayIndex,this.template=r,t.product&&(this.type="hotelSearch",this.attributes=t.hotelSearch,this.set("viewCount",0),i=/\?/.test(this.get("deepLinkUrl"))?"&":"?",this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".HS"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.get("thumbnailUrl")&&this.set("thumbnailUrl",this.get("thumbnailUrl").replace("_s","_t")),this.$el=e(e.trim(this.template(this.attributes,a))))};return i.prototype=t,i})}(),function(){define("gc/sp-package-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n=t.packageIncludes,r=t.packages.replace("{{packageDestination}}",e.packageDestination),i='<li class="scratchpad-item"><a href="'+e.deepLinkUrl+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-packagesalt"></span></span><h4 class="item-title">'+r+'</h4><p class="item-date item-nested">'+e.departureDate+e.returnDate+'</p><p class="item-info item-nested">'+n+'</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+t.perPerson+'</p><p class="item-package-message">'+e.lastSeen+'</p></div><span class="item-img-icon"></span></div></a></li>';return i},i=function(t){var i="",a=n.item;if(this.trayIndex=t.trayIndex,this.template=r,t.product){if(this.type="package",this.attributes=t.packages,this.get("price")){var o=a.from.replace("{{itemPrice}}",this.get("price"));"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",a.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeen"))):this.set("lastSeen",a.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeen"))),this.set("price",o)}else this.set("price",""),this.set("lastSeen","See price");this.get("returnDate")?this.set("returnDate"," - "+this.get("returnDate")):this.set("returnDate",""),i=/\?/.test(this.attributes.deepLinkUrl)?"&":"?",this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".PS"),this.set("deepLinkUrl",this.get("deepLinkUrl")+this.get("rfrrString")),this.$el=e(e.trim(this.template(this.attributes,a)))}};return i.prototype=t,i})}(),function(){define("gc/scratchpadtrayitem",["gc/sp-hotel-details-item","gc/sp-hotel-search-item","gc/sp-flight-details-item","gc/sp-flight-search-item","gc/sp-package-search-item","gc/sp-car-details-item","gc/sp-car-search-item","gc/sp-cruise-search-item","gc/sp-activity-search-item","gc/sp-activity-details-item"],function(e,t,n,r,i,a,o,s,c,l){var d={validateItemLob:function(e){return e.hasOwnProperty("product")},validateItemActionType:function(e){return e.hasOwnProperty("type")},buildCompoundItemType:function(e){return e.product+"-"+e.type}},u={isSourceDataValid:function(e){return d.validateItemLob(e)&&d.validateItemActionType(e)},determineSourceDataType:function(e){return this.isSourceDataValid(e)?d.buildCompoundItemType(e)||"NOT-FOUND":{}}};return function(d){var p={"HOTEL-DETAIL":e,"HOTEL-SEARCH":t,"AIR-DETAIL":n,"AIR-SEARCH":r,"PACKAGE-SEARCH":i,"CAR-DETAIL":a,"CAR-SEARCH":o,"CRUISE-SEARCH":s,"ACTIVITY-SEARCH":c,"ACTIVITY-DETAIL":l},g=u.determineSourceDataType(d);return new p[g](d)}})}(),function(){define("gc/scratchpadtraycontroller",["gc/userhistoryapi","gc/scratchpadtrayitem","gc/abTest","uitk","jquery","gc/analyticsStore"],function(e,t,n,r,i,a){return{requiresHistory:!0,init:function(e){return this.view=e,this.buildRfrr().bindListeners().getCount()},buildRfrr:function(){var e=i("#header-history"),t=e.attr("href")+"?rfrr=SP.NoTray.SP";return e.attr("href",t),this},bindListeners:function(){var e=this;return this.view.on("click.tab",function(){e.logInteraction("Header.SP.Tray.Interaction")}),r.subscribe("sp:count:newCount",function(t,n){e.handleCountSuccess(n.response)}),r.subscribe("sp:count:fail",function(t,n){e.handleCountSuccess(n.response)}),this},getCount:function(){var t=n.get(24674,null,!0).value;return 0===t?e.getHistoryCount():this.handleCountFail(),this},handleCountSuccess:function(e){return e&&e.hasOwnProperty("count")?(this.view.badge.updateContent(e.count),i(".site-navigation .user-history-tab").css("margin-left","0px"),this):(this.handleCountFail(),this)},handleCountFail:function(){return this.view.badge.hide(),i(".site-navigation .user-history-tab").css("margin-left","0px"),this},logInteraction:function(e){return a.publishClickEvent({type:"o",name:"RFRR Action Link",rfrr:e,trackEvents:"event80"}),this},logExperimentExposure:function(){}}}),define("gc/scratchpadtrayview",["jquery"],function(e){return{_callbacks:{},_$el:null,init:function(){return this._captureEls()._captureStrings()._captureTemplates()._bindClickHandlers()},on:function(e,t){return"function"==typeof t&&(this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(t)),this},trigger:function(e,t){for(var n=this._callbacks[e]||[],r=0;r<n.length;r++)n[r](t);return this},badge:{$el:null,strings:{},updateContent:function(t){return this._updateCount(t)._updateScreenReaderText(t),e(".site-navigation .user-history-tab").css("margin-left","0px"),this[t>0?"show":"hide"]()},show:function(){return this.$el.css("display","inline-block"),this},hide:function(){return this.$el.hide(),this},flareAnimation:function(){},bindClickHandlers:function(){},unbindClickHandlers:function(){},_updateCount:function(e){return this.$el.find(".count").text(e),this},_updateScreenReaderText:function(e){var t=1===e?this.strings.badgeSRSingle:this.strings.badgeSRMany.replace("{{count}}",e);return this.$el.find(".badge-description").text(t),this}},navAnchor:{$el:null,bindClickHandlers:function(e,t){return t?this.bindFirstClickHandler(e):this.bindDefaultClickHandler(e),this},bindFirstClickHandler:function(e){var t=this,n=function(){e.trigger("click.tab.first"),t.bindDefaultClickHandler(e)};return this.$el.off("click").on("click",n),this},bindDefaultClickHandler:function(e){return this.$el.off("click").on("click",function(){e.trigger("click.tab")}),this}},menu:{_state:{loading:!0,items:[]},$el:null,updateItemList:function(e){e&&(this._state.items=this._state.items.concat(e));var t=this.$el.find(".item-list"),n=0,r=this._state.items.length;for(t.empty(),n;n<r;n++)this._state.items[n].appendTo(t);return this.showListState()},showLoadingState:function(){},hideLoadingState:function(e){return this._state.loading=!1,this.$el.find(".loading-wrapper").fadeOut("fast"),this.$el.find(".loader").removeClass("loading"),this.$el.find(".loading-message").fadeOut("fast",e),this},showEmptyState:function(){var e=this,t=function(){e.$el.find(".default-message").fadeIn()};return this.hideLoadingState(t),this},showListState:function(){var e=this,t=function(){e.$el.find(".item-list").fadeIn()};return this.hideLoadingState(t),this},bindClickHandlers:function(){},unbindClickHandlers:function(){}},tooltip:{_state:{},$el:null,template:null,reRender:function(){},show:function(){},hide:function(){},updateContent:function(){}},_captureEls:function(){return this._$el=e(".user-history-tab.scratchpad"),this.navAnchor.$el=this._$el.find(".nav-tab"),this.badge.$el=this._$el.find(".sp-badge"),this.menu.$el=e(".menu"),this.tooltip.$el=e(""),this},_captureStrings:function(){return this.strings=JSON.parse(this._$el.attr("data-localized-content")),this.navAnchor.strings=this.strings.link,this.badge.strings=this.strings.badge,this.menu.strings=this.strings.menu,this.tooltip.strings=this.strings.tooltip,this},_captureTemplates:function(){return this.menu.template=e("").html(),this.tooltip.template=e("").html(),this},_bindClickHandlers:function(){return this.navAnchor.bindClickHandlers(this),this}}}),require(["gc/scratchpadtraycontroller","gc/scratchpadtrayview","jquery"],function(e,t,n){"complete"==document.readyState?window.scratchpadTray=e.init(t.init()):n(window).on("load",function(){window.scratchpadTray=e.init(t.init())})}),require(["gc/abTest","jquery","gc/errorLogging","gc/headerMessages"],function(e,t,n,r){t(function(){if(t(".user-history-tab.scratchpad").length>0&&t(".user-history-tab.scratchpad").attr("data-localized-content"))try{if(t(".view-all-history.item-link").length>0){var i=t(".view-all-history.item-link");i.text(r.spViewscratchpadlink)}if(t(".greeting-message.loading-message").length>0){var a=t(".greeting-message.loading-message");a.text(r.spLoadingGreeting)}var o=t(".sp-name");if(o.length>0){o.text(r.spHeaderLink);var s=e.get(24674,null,!0).value;s>0&&(o.after('<span class="icon icon-heart heart-color" aria-hidden="true"></span>'),t("#header-history-sm .icon.icon-heart").addClass("heart-color"))}}catch(c){n.logError(c,"header","gc/scratchpadBranding","getScratchpadBranding")}})})}(),function(){var e={};require("jquery",function(t){t(".user-history-tab.scratchpad").length>0&&t(".user-history-tab.scratchpad").attr("data-localized-content")&&(e=JSON.parse(t(".user-history-tab.scratchpad").attr("data-localized-content")),define("gc/sp-tray-strings",[],function(){return e}))})}(),function(){var e={currentPath:window.location,defaultId:"-1",jsonpSuffix:"&format=jsonp&callback=?",prodCountEndpoint:"/userHistory/count?",labCountEndpoint:"/userHistory/count?",prodHistoryEndpoint:"/api/userhistory?",labHistoryEndpoint:"/api/userhistory?",lobQuery:function(e){return 1===e?"&lobs=HOTEL_DETAIL&lobs=HOTEL_SEARCH&lobs=AIR_SEARCH&lobs=AIR_DETAIL&lobs=CAR_SEARCH&lobs=CAR_DETAIL&lobs=PACKAGE_SEARCH&lobs=CRUISE_SEARCH&lobs=ACTIVITY_SEARCH&lobs=ACTIVITY_DETAIL":"&lobs=HOTEL_DETAIL&lobs=HOTEL_SEARCH&lobs=AIR_SEARCH&lobs=AIR_DETAIL&lobs=CAR_SEARCH&lobs=PACKAGE_SEARCH&lobs=CRUISE_SEARCH&lobs=ACTIVITY_SEARCH&lobs=ACTIVITY_DETAIL"}},t={isLab:function(e){return/trunk/.test(e.hostname)},formatGuid:function(e){return 5===e.split("-").length?e:[e.substring(0,8),e.substring(8,12),e.substring(12,16),e.substring(16,20),e.substring(20)].join("-")},userIsAnon:function(e){return"ANONYMOUS"===e.userStatus},userHasGuid:function(e){return e.hasOwnProperty("guid")},userHasTuid:function(e){return e.hasOwnProperty("tuid")&&e.tuid>0},userHasExpuid:function(e){return e.hasOwnProperty("expUserId")},envCountEndpoint:function(t){return t?e.labCountEndpoint:e.prodCountEndpoint},envHistoryEndpoint:function(t){return t?e.labHistoryEndpoint:e.prodHistoryEndpoint},makeGuidParamString:function(e,t){return t?"":"&guid="+e},makeTuidParamString:function(e){return"&tuid="+e},makeExpuidParamString:function(e){return"&expuserid="+e},makeLimitParamString:function(e){return"l="+(e||5)},makeSiteIdParamString:function(e){return"&siteid="+e},extendRequestObjWithDefaults:function(e){return{url:e,timeout:5e3}},extendRequestObjWithJSONP:function(t){return{url:t+e.jsonpSuffix,dataType:"jsonp",timeout:5e3}}},n={getUserExpuid:function(n){return t.userHasExpuid(n.user)?n.user.expUserId:e.defaultId},getUserTuid:function(n){return t.userHasTuid(n.user)?n.user.tuid:e.defaultId},getUserGuid:function(n){return t.userHasGuid(n.user)?t.formatGuid(n.user.guid):e.defaultId},buildCountEndpoint:function(n,r,i){return[t.envCountEndpoint(t.isLab(e.currentPath)),t.makeGuidParamString(this.getUserGuid(n),t.userHasTuid(n.user)),t.makeTuidParamString(this.getUserTuid(n)),t.makeExpuidParamString(this.getUserExpuid(n)),t.makeSiteIdParamString(r.siteId),e.lobQuery(i)].join("")},buildHistoryEndpoint:function(n,r,i,a){return[t.envHistoryEndpoint(t.isLab(e.currentPath)),t.makeLimitParamString(n),t.makeGuidParamString(this.getUserGuid(r),t.userHasTuid(r.user)),t.makeTuidParamString(this.getUserTuid(r)),t.makeExpuidParamString(this.getUserExpuid(r)),t.makeSiteIdParamString(i.siteId),e.lobQuery(a)].join("")}};define("gc/userhistoryapi",["uitk","jquery","gc/pageModel","env","gc/abTest"],function(e,r,i,a,o){return{getHistoryCount:function(){return this._makeNormalRequest(n.buildCountEndpoint(i,a,o.get(10044).value)).done(function(t){e.publish("sp:count:newCount",{src:this,response:t})}).fail(function(t){e.publish("sp:count:fail",{src:this,response:t})}),this},_makeNormalRequest:function(e){return r.ajax(t.extendRequestObjWithDefaults(e))},_makeJSONPRequest:function(e){return r.ajax(t.extendRequestObjWithJSONP(e))}}})}(),define("gc/errorLogging",[],function(){var e=function(){return!(!window.dctk||!dctk.enabled)&&(dctk.logging&&dctk.logging.logError)},t=function(e){console&&(console.error?console.error(e):console.log&&console.log("Error occurred in Wizard: "+e))},n={logError:function(n,r,i,a,o){
e()?dctk.logging.logError("globalcontrols",n,{control:r,module:i,method:a,comments:o}):(require("dctk/clientLogging",function(e){e.logError("globalcontrols",n,{control:r,module:i,method:a,comments:o})}),t(n))}};return n}),define("gc/analyticsStore",function(){function e(e){try{require(["dctk/dctk"],function(t){t.onReady&&t.trackEvent&&t.onReady(function(){t.trackEvent(e)})})}catch(t){t.message}}function t(e){try{require("PlatformAnalytics",function(t){var r=t.getInstance();if("undefined"!=typeof r){var i=n(e),a=i?new Array(i):[],o=r.newDataCapture({eventType:"click",adobeMappers:a});o.collect({pageInfo:{referrerId:e.rfrr}}),o.publish()}})}catch(t){t.message}}function n(e){return function(t,n){n.events=e.trackEvents,n.trackVars=e.trackVars}}var r={publishClickEvent:function(n){window.dctk&&window.dctk.onReady?e(n):t(n)}};return r});var gssExperimentId,appendAbaxUrlParameter="",toAddAbax=!1;require(["gc/errorLogging","gc/abTest","gc/pageModel","gc/analyticsStore","uitk"],function(e,t,n,r,i){try{"undefined"==typeof window.xp&&(window.xp={}),"undefined"==typeof xp.namespace&&(xp.namespace=function(){for(var e,t=arguments,n=null,r=0;r<t.length;r+=1){e=t[r].split("."),n=window;for(var i=0;i<e.length;i+=1)n[e[i]]=n[e[i]]||{},n=n[e[i]]}return n}),xp.namespace("xp.nav"),xp.nav.trackAnalytics=function(e,t,n){return r.publishClickEvent({name:"RFRR Action Link",rfrr:n,type:t}),!0},xp.nav.trackAnalyticsLanguageLinkWithLangID=function(e,t){r.publishClickEvent({name:"RFRR Action Link",rfrr:e,trackVars:{prop30:t,eVar54:t}})},xp.namespace("xp.nav.event"),xp.nav.event.onDOMReady=function(e){if(window.addEventListener)window.addEventListener("load",e,!1);else if(window.attachEvent)window.attachEvent("onload",e);else if(null!=window.onload){var t=window.onload;window.onload=function(n){t(n),window[e]()}}else window.onload=e},window.langRedirectionUrl=function(t){try{var n="/pub/agent.dll?qscr=chlg&lang={langID}&ovrd=3&rurl=",r=window.location.pathname,i=t.href.split("?langid=")[1],a=window.location.search,o=window.location.hash,s=t.href,c=r.indexOf("agent.dll")>-1||r.indexOf("/daily/")>-1,l=window.header_feedDomain;n=n.replace("{langID}",i),c&&(s=n+encodeURIComponent(window.location)),l?s="http:"+window.header_feedDomain+n+encodeURIComponent("http:"+window.header_feedDomain+"/"):(""===a&&(a="?"),a=a.indexOf("langid=")>-1?a.replace(/langid=\d+/,"langid="+i):a+"&langid="+i,s=r+a+o),window.location.href=s}catch(d){e.logError(d,"header","header.js","langRedirectionUrl")}},window.currencyRedirectionUrl=function(e){var t=window.location.pathname,n=window.location.search,r=window.location.hash,i=window.location.pathname,a=e.href.split("?currency=")[1],o=window.header_feedDomain;if(o)i="http:"+window.header_feedDomain+"/?currency="+a;else{if(""===n&&(n="?"),n.indexOf("rfrr")>-1){for(var s=n.split("&"),c=0;c<s.length;c++)s[c].indexOf("rfrr")>-1&&(s.splice(c,1),c--);n=s.join("&"),0!==n.indexOf("?")&&(n="?"+n)}n=n.indexOf("currency=")>-1?n.replace(/currency=[A-Z]{3}/,"currency="+a):n+"&currency="+a,i=t+n+r}window.location.href=i},window.appendRedirectionUrl=function(t){try{var n,r,i,a=window.location.pathname,o=(/uurl=([^&]+)/.exec(window.location.search)||[])[1],s=window.header_feedDomain;n=t.href.indexOf("/user/signin")!=-1?toAddAbax?"/user/signin?ckoflag=0&"+appendAbaxUrlParameter:"/user/signin?ckoflag=0":t.href.indexOf("/user/login")!=-1?"/user/login?ckoflag=0":t.href.indexOf("/user/createaccount")!=-1?toAddAbax?"/user/createaccount?fromheader=true&"+appendAbaxUrlParameter:"/user/createaccount?fromheader=true":"/user/logout?",s?n="http:"+window.header_feedDomain+n+"&uurl=http:"+window.header_feedDomain:o&&o.indexOf("e3id")!==-1?n=n+"&uurl="+o:"/Hotel-Search"===a?(r=a+window.location.search+window.location.hash.replace("#",""===window.location.search?"?":"&"),i="&uurl="+encodeURIComponent("e3id=redr&rurl="+r),n+=i):"/"!==a&&(r=a.concat(window.location.search,window.location.hash),i="&uurl="+encodeURIComponent("e3id=redr&rurl="+r),n+=i),window.location.href=n.replace(/\'/g,"").replace(/\"/g,"")}catch(c){e.logError(c,"header","header.js","appendRedirectionUrl")}};var a="gc_rewrite_lang_links",o=function(e,t){var n="#header-language-",r="langRedirectionUrl(this);return false;";t.forEach(function(e){var t=document.querySelector(n+e.langId);t&&(t.href=e.canonicalUrl+"?langid="+e.langId,t.dataset.onclick&&(t.dataset.onclick=t.dataset.onclick.replace(r,"")))}),i.unsubscribe(a)};i.subscribe(a,o),i.publish("gc_headjs_isready",{})}catch(s){e.logError(s,"header","header.js","main")}}),require(["uitk","jquery"],function(e,t){t(".utility-nav a").on("click",function(){var n=t(this).attr("id"),r=t(this).attr("href"),i=t(this).attr("target"),a=t(this).data("route"),o=t(this).data("omniture-id");e.publish("gc_nav_click",{id:n,href:r,target:i,route:a,omnitureId:o})})}),require(["gc/abTest","gss-modal","env","gc/pageModel","uitk","uitk_init","jquery","dctk/dctk","gc/analyticsStore"],function(e,t,n,r,i,a,o,s,c){function l(e){k=e.pathname}function d(e,t){var n=e.getAttribute(t);return e.removeAttribute(t),n}function u(e){return document.getElementById(e)}function p(e,t){l(e),P&&(e.href+="?"+appendAbaxUrlParameter);var n=d(e,"data-onclick");v(null,e,"page.Account.GSS.SignIn",null,n,t,!0)}function g(e,t){return"undefined"!=typeof e&&"undefined"!=typeof t&&null!=e&&null!=t}function h(){var e=window.location.pathname;return"/"===e||e.indexOf("/gc/")>-1||window.location.host.indexOf("localhost")>-1?(gssExperimentId=25384,!0):e.indexOf("Hotel-Information")>-1&&(gssExperimentId=13607,!0)}function f(t){P?_?(s.loggingAdapter.logMessage("GSS_MODAL_ORIGINATED_FROM_CHINA"),x=0,appendAbaxUrlParameter=""):(x=e.get(gssExperimentId,null,!1).value,x<=1?appendAbaxUrlParameter="abax="+gssExperimentId+"."+x:(appendAbaxUrlParameter="",t&&!T&&e.log(gssExperimentId,null))):(appendAbaxUrlParameter="",x=0)}function m(e){var r={showLoyaltyCheckBox:x<4};r.siteid=n.siteId,r.langid=n.langId,r.locale=n.locale,r.rurl=k,r.evaluateRecaptchaGCFlag=E,null!==e&&e.preventDefault(),t.initDomEmbedded(r)}function v(e,n,r,i,a,o,c){f(c),x>1?(m(o),s.onReady(function(){s.omtr.pageName=r,s.omtr.t()}),"page.Account.GSS.CreateAccount"===r?t.openSignUp():t.openSignIn()):(null!==n&&(A&&null!==e&&P?n.setAttribute("data-onclick",a+"; location.href='/user/signin?ckoflag=0' + '&' + appendAbaxUrlParameter "):n.setAttribute("data-onclick",a)),null!==e&&e.setAttribute("data-onclick",i))}function y(e,t,n,r){if(g(e,t)){var i=d(t,r),a=d(e,n);A&&P&&(e.removeAttribute("onclick"),a="xp.nav.trackAnalytics(this,'a','Header.Signin')",i="appendRedirectionUrl(this); return false;"+i),t.addEventListener("click",function(n){toAddAbax=!0,c.publishClickEvent({name:"RFRR Action Link",rfrr:"page.Account.GSS.CreateAccount"}),v(t,e,"page.Account.GSS.CreateAccount",i,a,n,!0)}),e.addEventListener("click",function(n){toAddAbax=!0,c.publishClickEvent({name:"RFRR Action Link",rfrr:"page.Account.GSS.SignIn"}),v(t,e,"page.Account.GSS.SignIn",i,a,n,!0)})}}var k,w,b=r&&"Identified"===r.user.userStatus,C=r&&"AUTHENTICATED"===r.user.userStatus,S=r&&("Identified"===r.user.userStatus&&r.user.expUserId<0||"ANONYMOUS"===r.user.userStatus),A=window.innerWidth<=725,T=!1,x=0,I=e.get(14261,null,!1).value,E=I!=w?3==I:w,_=!1,P=h();if(void 0!==r.location&&void 0!==r.location.country){var D=r.location.country;"cn"===D&&(_=!0)}if(f(!1),C||b){var O;O=u(A?"account-menu-myaccount":"account-myaccount"),C&&null!==O?(localStorage.setItem("identifiedLogout",!1),O.addEventListener("click",function(e){e.preventDefault(),o.ajax({url:"/gc/getUserState.json",type:"GET",async:!1,timeout:n.pageModelTimeout,success:function(e){C=e.authenticated}}),C?o(this).trigger("click"):(toAddAbax=!0,p(O,e))})):b&&null!==O&&(localStorage.setItem("identifiedLogout",!0),O.addEventListener("click",function(e){toAddAbax=!0,p(O,e)}))}else{var L,M;if(A)L=u("header-accountMenu-signin"),M=u("header-account-signup"),y(L,M,"data-onclick","data-onclick");else{L=u("account-signin"),M=u("account-register");var R=u("header-account-signin-button");null!==R&&"undefined"!==R&&(L=u("header-account-signin"),M=u("header-account-register")),y(L,M,"data-onclick","data-onclick")}}"?logout=1"===window.location.search&&"true"===localStorage.getItem("identifiedLogout")&&S&&(localStorage.removeItem("identifiedLogout"),v(null,null,"page.Account.GSS.SignIn",null,null,null,!1))}),require("gc/errorLogging",function(e){try{define("module",function(){return{}}),define("exports",function(){return{}}),require("env",function(e){window.site_id=e.siteId}),define("./utils",["Handlebars.Utils"],function(e){return e}),define("./handlebars/utils",["Handlebars.Utils"],function(e){return e}),define("./exception",["Handlebars.Exception"],function(e){return e}),define("./handlebars/exception",["Handlebars.Exception"],function(e){return e}),define("./safe-string",["Handlebars.Safe-String"],function(e){return e}),define("./handlebars/safe-string",["Handlebars.Safe-String"],function(e){return e}),define("./no-conflict",["Handlebars.noConflict"],function(e){return e}),define("./handlebars/no-conflict",["Handlebars.noConflict"],function(e){return e}),define("./runtime",["Handlebars"],function(e){return e}),define("./handlebars/runtime",["Handlebars"],function(e){return e})}catch(t){e.logError(t,"header","handlebars-amd-bootstrap.js","main")}}),define("gc/script-loader",["jquery"],function(e){function t(t,n){var r=document.createElement("script");r.setAttribute("src",t),r.setAttribute("type","text/javascript"),r.addEventListener("load",n),e("head")[0].appendChild(r)}return t}),require(["uitk","gc/pageModel","gc/script-loader","env","jquery","dctk/dctk"],function(e,t,n,r,i,a){var o=t.user.hasGroups,s=r.locale||t.site.locale,c=r.siteId||t.site.id,l=r.taapHeaderBundleUrl||"https://d4rb83r2tty9a.cloudfront.net",d=r.version||"e4128bc5b740c3a51be00492446cfc400d08b587",u=(r.prefix||"//a.travel-assets.com/globalcontrols-service").replace("http:",""),p=!1,g=function(){p||(n(l+"/taapHeaderBundle.js"),n(l+"/loc/taapHeader."+s+".js"),p=!0)};location.search.indexOf("hasGroup=true")>=0&&(o=!0);var h=function(){var e="/marketingHeader/branding",n=v(m);n&&k(n,Date.now())?f(n.response):i.get(e,function(e){y(m,{currentTime:Date.now(),response:e,tuid:t.user.tuid}),f(e)})},f=function(e){if(e&&e.model&&e.id&&(e.model&&e.model.programName&&"npp"==e.model.programName&&a.onReady(function(){a.clearOmnitureObj(),a.trackEvent("o","Use Different Account",{eVar40:e.model.partnerProgramMetadata.companyID})}),e.id)){e.id=e.id.toLowerCase(),"pugs"==e.id&&e.model&&e.model.programName&&(e.id=e.model.programName);var t="header/cobrand/"+e.id+"/brandingheader";if("taap"==e.id){g();var r=setInterval(function(){i("#all-in-rewards-header-link").length&&i("#sub-menu-header-shop-rewards").length&&(clearInterval(r),i("#all-in-rewards-header-link").hide(),i("#sub-menu-header-shop-rewards").hide()),i("#header-account-rewards-more-menu").length&&i("#header-account-rewards-more-menu").hide()},10);return}var o=function(){var r=u+"/content/"+d+"/templates/"+c+"/"+s+"/"+e.id+".js";n(r,function(){for(var n in e.model)e.model.hasOwnProperty(n)&&(cugModel[n]=e.model[n]);require("handlebars",function(e){var n=document.createElement("div");n.innerHTML=e.templates[t](cugModel),i("#cobranded-header").html(n).show()})})};o()}},m="marketing.header.key",v=function(e){if(sessionStorage)try{return JSON.parse(sessionStorage.getItem(e))}catch(t){console.error(t)}return null},y=function(e,t){if(sessionStorage)try{sessionStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(n)}},k=function(e,n){if(r.skipMarketingHeaderValidation)return!0;if(t.isUserAuthenticated()&&t.user.tuid==e.tuid&&e.currentTime){var i=(n-e.currentTime)/1e3;return i<7200}return!1};if(sessionStorage&&sessionStorage.getItem("taapContext"))g();else if(o)try{h()}catch(w){console.error(w)}}),require(["uitk","gc/pageModel","jquery","gc/errorLogging","gc/abTest","gc/analyticsStore"],function(e,t,n,r,i,a){try{var o=t&&("Identified"===t.user.userStatus&&t.user.expUserId<0||"ANONYMOUS"===t.user.userStatus),s=t&&"Identified"===t.user.userStatus,c=t&&"AUTHENTICATED"===t.user.userStatus,l=t&&t.user.sua&&"Identified"===t.user.userStatus,d=function(){return window.innerWidth<=725},u=80001===t.site.id&&d(),p=function(){n("#account-menu-header").removeClass("hidden"),n("#account-menu").addClass("hide"),n("#utility-link").addClass("hide");var e=n("#header-account-signup"),r=e.text(),i=t.site.brandName?t.site.brandName.toLowerCase():"";i=h(i),r=r.replace("{{0}}",i),e.text(r)},g=function(){var e=t.user.loyalty&&t.user.loyalty.tier?t.user.loyalty.tier:"",r=n(".signedInIcon"),i=n(".rewardsInHeader");if(r.addClass(e),i.addClass("hide"),n(".account-menu-rewards").removeClass("hidden"),!t.user.loyalty||!t.user.loyalty.tier){var a=n(".joinExpediaRewards");a.removeClass("hidden")}},h=function(e){return"undefined"!=typeof e&&e?e[0].toUpperCase()+e.slice(1):""};if(c||!o){n("#header-account-menu").addClass("hidden"),n("#account-signin").addClass("hidden");var f,m=n("#header-account-menu-signed-in"),v=t.user.emailAddress||"";if(v=v.trim(),v.length>20)v=v.substring(0,17).concat("...");else{var y=v.split("@");y[0].length>8&&(y[0]=y[0].substring(0,7).concat("..."),v=y.join("@"))}f=t.user.firstName&&""!=t.user.firstName?t.user.firstName:t.user.emailAddress&&""!=t.user.emailAddress?v:"Guest",u&&n("#account-menu-header .userDetails span").text(f),t.user.arranged?(m.find("#arrangedUserGreetingName").text(f),m.find(".arrangedUser").removeClass("hidden")):(m.find("#userGreetingName").text(f),m.find(".nonArrangedUser").removeClass("hidden"),n("#account-menu-signed-in").find("#userGreetingName").text(f),n("#account-menu-signed-in").find(".nonArrangedUser").removeClass("hidden")),s?(n("#account-signout").addClass("hidden"),n("#identified-account-signout").addClass("hidden"),n("#identified-account-signout-v2").removeClass("hidden"),n("#userGreetingNameSignOut-v2").text(f)):(n("#account-signout").removeClass("hidden"),n("#identified-account-signout").addClass("hidden"),n("#identified-account-signout-v2").addClass("hidden")),m.removeClass("hidden"),n(".notSignedIn").css("display","none"),l&&n("#account-myaccount").addClass("hidden")}else n(".signedIn").css("display","none");d()&&p(),d()&&(g(),n(".fav-hotels-link").removeClass("hidden")),n(document).on(e.clickEvent,"#account-menu-icon",function(){a.publishClickEvent({name:"AccountIconButtonClicked",rfrr:"HP.ACCOUNT.HEADER.ENG"})}),n(window).on("resize",function(){c||!o?(n(".notSignedIn").css("display","none"),n("#account-menu-header .userDetails span").text(f)):n(".signedIn").css("display","none"),d()&&p(),d()&&g()})}catch(k){r.logError(k,"header","account-menu.js","main")}}),require(["jquery","gc/errorLogging","gc/redirect-banner/model"],function(e,t,n){function r(e){e.find("a").attr("href",o)}function i(e){e.find(".btn-close").on("click",function(){e.addClass("hidden")}),e.removeClass("hidden")}function a(){var t=e("#redirectBanner");r(t),i(t)}var o;try{if(n.isRedirected(window.location)){var o=n.createReturnUrl(window.location);e(document).ready(a)}}catch(s){t.logError(s,"header","redirect-banner/ui.js","main")}}),function(e,t){"function"==typeof define&&define.amd?define("gc/redirect-banner/model",t):"object"==typeof exports&&(module.exports=t())}(this,function(){function e(e){return e.search.indexOf(a)>=0}function t(e){var t=r(e.search),i=e.protocol+"//"+t.host+"/IpSniffRedir?forceNoRedir=1&userTpid=1&targetUrl="+n(e,t);return i}function n(e,t){var n=i(e.search);return n.length>0?n="/"+n+"&":n+="/?",n+="rfrr=Header.POSRedirect."+e.hostname,n+="/"===e.pathname?"":e.pathname,encodeURIComponent(e.protocol+"//"+t.hostname+("/"===t.pathname?"":t.pathname)+n)}function r(e){for(var t=e.indexOf(a)+a.length+1,n=e.indexOf("&",t),r=n===-1?e.length:n,i="https://"+e.substring(t,r),o=document.createElement("a");i.indexOf("%")!==-1;)i=decodeURIComponent(i);return o.href=i,o}function i(e){var t=e.split("&");for(var n in t)if(t[n].indexOf(a)!==-1){t.splice(n,1);break}return t.join("&")}var a="rfrr=Redirect.From";return{isRedirected:e,createReturnUrl:t,createTargetUrl:n,cleanSearch:i,getRfrrLocationObject:r}}),function(){require("jquery",function(e){var t=e(".disclaimerMessage"),n=e(".displayDomain"),r=e("#pageId").attr("value");if((e("#home-page").length>0||"Homepage"===r||"page.Hotels"===r||"page.Flights"===r||"page.Packages"===r)&&t.length>0&&n.length>0){var i=t.html();i=i.replace("{{displayDomain}}",n.text()),t.html(i),e("#disclaimerMessageBanner").removeClass("hidden"),e("#redirectBanner").addClass("customizedBanner")}})}(),require(["jquery","uitk","uitk_init"],function(e,t){var n=e("#redirectPopup"),r=e(".domainOnPopup"),i=e("#pageId").attr("value");if((e("#home-page").length>0||"Homepage"===i||"page.Hotels"===i||"page.Flights"===i||"page.Packages"===i)&&n.length>0&&r.length>0){var a=n.html();a=a.replace("{{displayDomain}}",r.text()),n.html(a);var o="redirectPopShow=true",s=document.cookie;if(a.trim().length>0&&(0===s.length||s.length>0&&s.indexOf(o)===-1)){var c={modalId:"redirectPopupModel",content:a};document.cookie=o,t.modal.create(c),e(".modal-inner").addClass("redirect-popup")}}}),require(["gc/pageModel","jquery","gc/errorLogging"],function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,c=void 0,l=void 0,d=!1,u=!1,p="rewards",g=!1,h=!1,f=!1,m=!1,v={};v.enabled={},v.processPointsAndTiers={},v.processCashBalance={},v.showRewardsHeaderAlways={},v.program={},v.currencyFormat={},v.program[1178]="td",v.program[1236]="barclays",v.program[1]="rewards",v.program[3]="rewards",v.program[4]="rewards",v.program[8]="rewards",v.program[9]="rewards",v.program[11]="rewards",v.program[14]="rewards",v.program[16]="rewards",v.program[17]="rewards",v.program[18]="rewards",v.program[20]="rewards",v.program[27]="rewards",v.program[28]="rewards",v.program[29]="rewards",v.program[61]="rewards",v.program[62]="rewards",v.program[63]="rewards",v.program[64]="rewards",v.program[65]="rewards",v.program[66]="rewards",v.program[67]="rewards",v.program[69]="rewards",v.program[70]="rewards",v.program[71]="rewards",v.program[72]="rewards",v.program[73]="rewards",v.program[70301]="rewards",v.program[70201]="rewards",v.program[70403]="rewards",v.program[70406]="rewards",v.program[70420]="rewards",v.program[70463]="rewards",v.program[70473]="rewards",v.program[70472]="rewards",v.program[70465]="rewards",v.processPointsAndTiers[1178]=!0,v.processPointsAndTiers[1236]=!0,v.processPointsAndTiers[1]=!0,v.processPointsAndTiers[3]=!0,v.processPointsAndTiers[4]=!0,v.processPointsAndTiers[8]=!0,v.processPointsAndTiers[9]=!0,v.processPointsAndTiers[11]=!0,v.processPointsAndTiers[14]=!0,v.processPointsAndTiers[16]=!0,v.processPointsAndTiers[17]=!0,v.processPointsAndTiers[18]=!0,v.processPointsAndTiers[20]=!0,v.processPointsAndTiers[27]=!0,v.processPointsAndTiers[28]=!0,v.processPointsAndTiers[29]=!0,v.processPointsAndTiers[61]=!0,v.processPointsAndTiers[62]=!0,v.processPointsAndTiers[63]=!0,v.processPointsAndTiers[64]=!0,v.processPointsAndTiers[65]=!0,v.processPointsAndTiers[66]=!0,v.processPointsAndTiers[67]=!0,v.processPointsAndTiers[69]=!0,v.processPointsAndTiers[70]=!0,v.processPointsAndTiers[71]=!0,v.processPointsAndTiers[72]=!0,v.processPointsAndTiers[73]=!0,v.processPointsAndTiers[70301]=!1,v.processPointsAndTiers[70201]=!1,v.processPointsAndTiers[70403]=!1,v.processPointsAndTiers[70406]=!1,v.processPointsAndTiers[70420]=!1,v.processPointsAndTiers[70463]=!1,v.processPointsAndTiers[70473]=!1,v.processPointsAndTiers[70472]=!1,v.processPointsAndTiers[70465]=!1,v.processCashBalance[1178]=!1,v.processCashBalance[1236]=!1,v.processCashBalance[1]=!1,v.processCashBalance[3]=!1,v.processCashBalance[4]=!1,v.processCashBalance[8]=!1,v.processCashBalance[9]=!1,v.processCashBalance[11]=!1,v.processCashBalance[14]=!1,v.processCashBalance[16]=!1,v.processCashBalance[17]=!1,v.processCashBalance[18]=!1,v.processCashBalance[20]=!1,v.processCashBalance[27]=!1,v.processCashBalance[28]=!1,v.processCashBalance[29]=!1,v.processCashBalance[61]=!1,v.processCashBalance[62]=!1,v.processCashBalance[63]=!1,v.processCashBalance[64]=!1,v.processCashBalance[65]=!1,v.processCashBalance[66]=!1,v.processCashBalance[67]=!1,v.processCashBalance[69]=!1,v.processCashBalance[70]=!1,v.processCashBalance[71]=!1,v.processCashBalance[72]=!1,v.processCashBalance[73]=!1,v.processCashBalance[70301]=!0,v.processCashBalance[70201]=!0,v.processCashBalance[70403]=!0,v.processCashBalance[70406]=!0,v.processCashBalance[70420]=!0,v.processCashBalance[70463]=!0,v.processCashBalance[70473]=!0,v.processCashBalance[70472]=!0,v.processCashBalance[70465]=!0,v.enabled[1]=!0,v.enabled[3]=!0,v.enabled[4]=!0,v.enabled[8]=!0,v.enabled[9]=!0,v.enabled[11]=!0,v.enabled[14]=!0,v.enabled[16]=!0,v.enabled[17]=!0,v.enabled[18]=!0,v.enabled[20]=!0,v.enabled[27]=!0,v.enabled[28]=!0,v.enabled[29]=!0,v.enabled[61]=!0,v.enabled[62]=!0,v.enabled[63]=!0,v.enabled[64]=!0,v.enabled[65]=!0,v.enabled[66]=!0,v.enabled[67]=!0,v.enabled[69]=!0,v.enabled[70]=!0,v.enabled[71]=!0,v.enabled[72]=!0,v.enabled[73]=!0,v.enabled[1236]=!0,v.enabled[1178]=!0,v.enabled[70301]=!0,v.enabled[70201]=!0,v.enabled[70403]=!0,v.enabled[70406]=!0,v.enabled[70420]=!0,v.enabled[70463]=!0,v.enabled[70473]=!0,v.enabled[70472]=!0,v.enabled[70465]=!0,v.showRewardsHeaderAlways[3]=!0,v.showRewardsHeaderAlways[1178]=!0,v.showRewardsHeaderAlways[70301]=!0,v.showRewardsHeaderAlways[70201]=!0,v.showRewardsHeaderAlways[70403]=!0,v.showRewardsHeaderAlways[70406]=!0,v.showRewardsHeaderAlways[70420]=!0,v.showRewardsHeaderAlways[70463]=!0,v.showRewardsHeaderAlways[70473]=!0,v.showRewardsHeaderAlways[70472]=!0,v.showRewardsHeaderAlways[70465]=!0,v.currencyFormat[70301]="${0}",v.currencyFormat[70201]="${0}",v.currencyFormat[70403]="£{0}",v.currencyFormat[70406]="{0} €",v.currencyFormat[70420]="{0} €",v.currencyFormat[70463]="€{0}",v.currencyFormat[70473]="{0} €",v.currencyFormat[70472]="CHF {0}",v.currencyFormat[70465]="{0} kr";try{if(e&&(h=v.enabled[e.site.id]===!0,g=h&&v.showRewardsHeaderAlways[e.site.id]===!0,d=h&&v.processPointsAndTiers[e.site.id]===!0,u=h&&v.processCashBalance[e.site.id]===!0,p=void 0!==v.program[e.site.id]?v.program[e.site.id]:p,"rewards"===p?c=t(".rewardsHeader"):p.match(/td|barclays/)&&(c=t("#header-award-module-info")),f=e.isUserIdentified(),m=h&&e.user.loyalty&&e.user.loyalty.rewardsMember),f&&m&&d){if(r=e.user.loyalty.tier,i=e.user.loyalty.tierId,a=parseInt(e.user.loyalty.confirmedPoints),"td"===p){if(/^([6789]|10|11)$/.test(i)){var y=document.createElement("img");y.src="//{{domain}}/_dms/group/header/1178/howitworks/logo.png?locale={{locale}}&tierid={{tierid}}".replace("{{locale}}",e.site.locale).replace("{{tierid}}",i).replace("{{domain}}","www.expediafortd.com"),t("#header-howitworks").append(y).removeClass("hidden"),/^(6|[89])$/.test(i)&&c.find("#header-pointBalDescRewards").removeClass("hidden")}}else if("rewards"===p){var k=c.find(".benefits_link"),w=k.find(".tierBadge"),b=k.attr("href");b=b.replace("color",r),k.attr("href",b),w.addClass(r).text("+"+r)}if(a>0){var C;C=e.user.loyalty.confirmedPointsFormatted?e.user.loyalty.confirmedPointsFormatted:a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var S;if("td"===p){S=c.find(".point-balance"),S.text(C);var A=t("#header-cySymbol");A.removeClass("hidden")}if(p.match(/td|barclays/)){var T="td"==p?e.user.loyalty.redeemableDollarValue:e.user.loyalty.cashBalanceFormatted;t("#header-cashValue").text(T)}else S=c.find(".pointsDisplay"),S.text(C+" points");S&&S.removeClass("hidden"),g=!0}else"td"===p&&(g=!1)}else if(f&&m&&u){if(e.user.loyalty.balanceInCurrency["double"]&&(o=e.user.loyalty.balanceInCurrency["double"],s=o.toFixed(2)),e.user.loyalty.programName&&(l=70465===e.site.id?e.user.loyalty.programName.replace(/.{7}$/," $&"):e.user.loyalty.programName),"rewards"===p){var x,I=c.find(".rewardsBadge"),E=c.find(".amountDisplay"),_=v.currencyFormat[e.site.id];l&&s&&_&&(x=_.replace("{0}",s),I.text(l),E.text(x).removeClass("hidden"))}g=!0}else g=!1}catch(P){n.logError(P,"header","rewards-badge.js","main")}finally{g&&c&&c.removeClass("hidden").attr("style","")}}),require(["jquery","gc/analyticsStore"],function(e,t){e("#header-container").on("click","a[data-omniture-id]",function(e){var n=e.target;e.target!==this&&(n=e.target.closest("a"));var r=n.getAttribute("data-omniture-id");try{t.publishClickEvent({name:"RFRR Action Link",rfrr:r})}catch(i){}})}),require(["gc/errorLogging","jquery"],function(e,t){window.headerFeedback=function(){try{var n,r,i=screen.width,a=screen.height,o=null!==document.getElementById("home-page"),s=OpinionLab_FB.O_HT(),c="ModalPopUp",l=t("#support-feedback").attr("href").length>0?t("#support-feedback").attr("href"):"/p/info-other/feedback.htm",d=(a-192)/2,u=(i-535)/2;o&&(s=s.replace("Homepage.html","Homepage-new.html")),void 0!==window.header_feedBackUrl&&(l=header_feedBackUrl),n=l+"?referer="+s+"&customvar="+OpinionLab_FB.O_CV()+"&prev="+OpinionLab_FB.O_PRV(),r=["toolbar=no","scrollbars=no","location=no","statusbar=no","menubar=no","resizable=no","width=635px","height=280px","screenX="+u,"screenY="+d,"left="+u,"top="+d].join(",");var p=window.open(n,c,r);p.focus()}catch(g){e.logError(g,"header","header-feedback.js","headerFeedback")}}}),function(){require(["uitk","jquery"],function(e,t){t("#header-container").on(e.clickEvent,"#mobile-toggle-header-link",function(){t(this).attr("aria-expanded","true"===t(this).attr("aria-expanded")?"false":"true");var e=t("#show-menu"),n=t("#hide-menu");e.toggleClass("hidden"),n.toggleClass("hidden"),t("#globalSiteNavigation").toggleClass("responsive-menu-shown")})})}();var OpinionLab_FB=function(){function _fC(_u){for(var _aT=_sp+",\\/,\\.,-,_,"+_rp+",%2F,%2E,%2D,%5F",_aA=_aT.split(","),i=0;i<5;i++)eval("_u=_u.replace(/"+_aA[i]+"/g,_aA[i+5])");return _u}function _fPe(){Math.random()>=1-_poE&&(O_LC(),_poX=0)}function _fPx(){Math.random()>=1-_poX&&O_LC()}function _populateCustomVar(){var e="",t="";"undefined"!=typeof dctk&&"undefined"!=typeof dctk.omtr?(e="undefined"!=typeof dctk.omtr.prop11?dctk.omtr.prop11:"",t="undefined"!=typeof dctk.omtr.prop12?dctk.omtr.prop12:""):"undefined"!=typeof s_exp?(e="undefined"!=typeof s_exp.prop11?s_exp.prop11:"",t="undefined"!=typeof s_exp.prop12?s_exp.prop12:""):(e="undefined"!=typeof s_prop11?s_prop11:"",t="undefined"!=typeof s_prop12?s_prop12:""),custom_var=t+"|"+e}function _replacePageName(){var e=null;if(e="undefined"!=typeof dctk&&"undefined"!=typeof dctk.omtr?escape(dctk.omtr.pageName)+".html":"undefined"!=typeof s_exp&&"undefined"!=typeof s_exp.pageName?escape(s_exp.pageName)+".html":"undefined"!=typeof s_pageName?escape(s_pageName)+".html":null){var t=e.toLowerCase();t.search("infosite")>=0&&(e=null)}if(e){var n=_ht.replace("https%3A//","").replace("http%3A//","");_ht=_ht.substr(0,_ht.indexOf("%3A//"))+"%3A//"+n.substr(0,n.indexOf("/"))+"/"+e}if("undefined"!=typeof bIsCAFR&&1==bIsCAFR){var r="fr-CA.";_rp="%3A//"+r}if("undefined"!=typeof bIsMSMY&&1==bIsMSMY){var r="ms-my.";_rp="%3A//"+r}if("undefined"!=typeof OlAltLang&&null!=OlAltLang){var r=OlAltLang;_rp="%3A//"+r}}var custom_var,_sp="%3A\\/\\/",_rp="%3A//",_poE=0,_poX=0,_sH=screen.height,_d=document,_w=window,_ht=escape(_w.location.href),_hr=_d.referrer,_tm=(new Date).getTime(),_kp=0,_sW=screen.width;return{O_HT:function(){return _replacePageName(),_ht},O_CV:function(){return _populateCustomVar(),custom_var},O_PRV:function(){return null==_hr||_hr.length<1?"null":escape(_hr)},O_LC:function(e,t,n,r){_replacePageName(),_populateCustomVar(),(null==e||e.length<1)&&(e="comments"),(null==t||t.length<1)&&(t=_ht),(null==n||n.length<1)&&(n=custom_var),r=null==r||r.length<1?_fC(escape(_hr)):"null"==r?"":_fC(escape(r)),_w.open("https://secure.opinionlab.com/ccc01/comment_card.asp?time1="+_tm+"&time2="+(new Date).getTime()+"&prev="+r+"&referer="+_fC(t)+"&height="+_sH+"&width="+_sW+"&custom_var="+n,e,"width=535,height=192,screenX="+(_sW-535)/2+",screenY="+(_sH-192)/2+",top="+(_sH-192)/2+",left="+(_sW-535)/2+",resizable=yes,copyhistory=yes,scrollbars=no")},O_GoT:function(e){_d.write("<a href='javascript:O_LC()'>"+e+"</a>")}}}();require(["uitk","gc/pageModel","jquery","gc/errorLogging"],function(e,t,n,r){try{var i=function(e){return e.removeClass("hidden").addClass("active")},a=function(e){e.find("#arrangee-first-name").text(t.user.firstName),e.find("#arrangee-last-name").text(t.user.lastName)};if(t&&t.user&&t.user.arranged&&!t.user.agent){var o=n("#header-alert-banner");a(o),i(o)}}catch(s){r.logError(s,"wizard","travel-arranger.js","main")}}),require(["uitk","jquery","gc/errorLogging"],function(e,t,n){try{var r="/agent/expe/agentbar",i=function(){t("#agent-arranger-bar-container").load(r)};/^(.*;)?\s*actx\s*=\s*[^;]/.test(document.cookie)?i():require(["gc/pageModel"],function(e){e&&e.user&&e.user.agent&&i()})}catch(a){n.logError(a,"wizard","agent-bar.js","main")}}),function(){define("gc/sp-car-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n="";"daily"===e.pricePeriod?n=t.daily:"weekly"===e.pricePeriod?n=t.weekly:"total"===e.pricePeriod&&(n=t.total);var r='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><img src="//images.trvl-media.com/cars'+e.thumbnailUrl+'" alt="'+e.carName+'" class="image" aspectRatio="1-1" onerror="this.onerror=null;this.src=\'/static/default/default/images/car/no_photo.png\';"></span><h4 class="item-title">'+e.carName+'</h4><p class="item-date">'+e.pickupDate+" - "+e.dropOffDate+'</p><p class="item-dummy item-nested">'+e.pickupLocation+'</p><div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+n+'<p class="item-nested">'+e.lastSeen+"</p></div></div></a></li>";return r},i=function(t){var i=scratchpadTray.view.strings.item;this.trayIndex=t.trayIndex,this.template=r;var i=n.item;if(t.product){if(this.type="carDetail",this.attributes=t.carDetail,this.get("price")){var a=i.from.replace("{{itemPrice}}",this.get("price"));this.set("price",a),"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeen",i.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeen",i.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate")))}else this.set("price",""),this.set("lastSeen","See price");this.$el=e(e.trim(this.template(this.attributes,i)))}};return i.prototype=t,i})}(),function(){define("gc/sp-activity-search-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n="";e.price&&(n=t.perTraveler);var r='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><span class="icon icon-activitiesalt"></span></span><h4 class="item-title">'+e.destination+'</h4><p class="item-watches item-nested">&nbsp;</p><div class="item-price-urgency lx"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+n+'</p><p class="item-nested">'+e.lastSeenDate+"</p></div></div></a></li>";return r},i=function(t){var i="",a=n.item;this.trayIndex=t.trayIndex,this.template=r,t.product&&(this.type="activitySearch",this.attributes=t.activitySearch,this.get("price")?"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeenDate",a.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeenDate",a.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate"))):(this.set("price",""),this.set("lastSeenDate",a.seePrice)),i=/\?/.test(this.get("deepLink"))?"&":"?",this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".ACS"),this.set("deepLink",this.get("deepLink")+this.get("rfrrString")),this.$el=e(e.trim(this.template(this.attributes,a))),this.get("startDate")&&this.get("endDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless"))};return i.prototype=t,i})}(),function(){define("gc/sp-activity-details-item",["jquery","gc/sp-tray-item-prototype","gc/sp-tray-strings"],function(e,t,n){var r=function(e,t){var n="";e.price&&(n=t.perTraveler);var r='<li class="scratchpad-item"><a href="'+e.deepLink+'" class="item-link" data-onclick=""><div class="item-data"><span class="item-img-icon"><img src="'+e.thumbnail+'" alt="'+e.title+'" class="image lx" aspectRatio="1-1"></span><h4 class="item-title">'+e.title+'</h4><p class="item-date"><span class="icon icon-time"></span> '+e.duration+'</p><p class="item-watches item-nested">&nbsp;</p><div class="item-price-urgency"><strong class="price">'+e.price+'</strong><p class="item-package-message">'+n+'</p><p class="item-nested">'+e.lastSeenDate+"</p></div></div></a></li>";
return r},i=function(t){var i="",a=n.item;this.trayIndex=t.trayIndex,this.template=r,t.product&&(this.type="activityDetail",this.attributes=t.activityDetail,this.get("price")?"SHORT_TIME"===this.get("dateTimeFormatType")?this.set("lastSeenDate",a.asOfTime.replace("{{lastSeenTime}}",this.get("lastSeenDate"))):this.set("lastSeenDate",a.asOfDate.replace("{{lastSeenDate}}",this.get("lastSeenDate"))):(this.set("price",""),this.set("lastSeenDate",a.seePrice)),i=/\?/.test(this.get("deepLink"))?"&":"?",this.set("rfrrString",i+"rfrr=SP.Tray."+this.trayIndex+".ACD"),this.set("deepLink",this.get("deepLink")+this.get("rfrrString")),this.get("thumbnail")&&this.set("thumbnail",this.get("thumbnail")),this.$el=e(e.trim(this.template(this.attributes,a))),this.get("startDate")&&this.get("endDate")?""===this.get("price")&&this.$el.addClass("priceless"):this.$el.addClass("dateless"))};return i.prototype=t,i})}(),define("gc/mobileAppBanner",["jquery","env","gc/abTest","gc/analyticsStore"],function(e,t,n,r){var i=i||{},a=t.prefix,o=t.version,s=t.locale,c=t.siteId,l=0,d=0;if("local"===o)a="";else if("undefined"==typeof a||null==a||0===a.length){var u="a".charCodeAt(),p="c".charCodeAt(),g=String.fromCharCode(Math.floor(Math.random()*(p-u+1))+u);a=["//",g,".travel-assets.com/globalcontrols-service"].join("")}return i.el=e("#mobile-app-banner-container"),i.init=function(){if(i.isMobile()&&!i.doesCookieExist()){var e=document.getElementById("mad-header-container");e&&(l=n.get(25130,null,!0).value,d=n.get(15805,null,!0).value),e&&(1==d||l>0)?i.renderMadService(l):i.render(n)}},i.getHTML=function(e,t){if(window.XMLHttpRequest){var n=new XMLHttpRequest;n.onload=function(){t&&"function"==typeof t&&t(this.responseXML)},n.open("GET",e),n.responseType="document",n.overrideMimeType("text/html"),n.send()}},i.renderMadService=function(e){var t=document.createElement("script"),r="desktop";if(Modernizr.appleios?r="iOS":Modernizr.android&&(r="Android"),1==n.get(24500,null,!0).value||e>0){var a=["/mad-service/globalControls/gcHeaderServerSide?containerId=mad-header-container"];a.push("&siteid="),a.push(c),a.push("&locale="),a.push(s),a.push("&pageName=gc.header-from-content"),a.push("&os="),a.push(r);var o=a.join("");e>0&&(o=o+"&alternateText="+e),i.getHTML(o,function(e){var t=document.querySelector("#mad-header-container"),n=!!e.querySelector("#app")&&e.querySelector("#app").innerHTML;if(t&&n){var r=!!e.querySelector("script")&&e.querySelector("script").src,i=!!e.querySelector("link")&&e.querySelector("link").href;if(i&&n.indexOf("<style>")===-1){var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",i),document.head.appendChild(a)}if(r){var o=document.createElement("script");o.setAttribute("src",r),document.head.appendChild(o)}t.innerHTML=n}})}else{var a=["/mad-service/globalControls/gcHeader?containerId=mad-header-container"];a.push("&siteid="),a.push(c),a.push("&locale="),a.push(s),a.push("&pageName=gc.header-from-content"),a.push("&os="),a.push(r),t.setAttribute("src",a.join("")),document.head.appendChild(t)}},i.isMobile=function(){return window.innerWidth<=491},i.doesCookieExist=function(){return document.cookie.indexOf("MDBClose")>=0},i.render=function(t){var n=function(){require("gc/script-loader",function(t){var n=a+"/content/"+o+"/templates/"+c+"/"+s+"/mobile-download-banner.js";t(n,function(){e.isEmptyObject(cugModel)?window.dctk&&window.dctk.logging&&window.dctk.logging.logError("Mobile Download Banner - HBS CugModel Empty",new Error("Mobile Download Banner - HBS Model Empty"),[]):(Modernizr.appleios?cugModel.appUrl=cugModel.iosAppBannerUrl:Modernizr.android?cugModel.appUrl=cugModel.androidAppBannerUrl:cugModel.appUrl="",70201==c?cugModel.downloadBannerBottomText=cugModel.downloadBannerBottomText.replace("{{brand}}","Orbitz"):cugModel.downloadBannerBottomText=cugModel.downloadBannerBottomText.replace("{{brand}}","Expedia+"),require("handlebars",function(e){i.el.html(e.templates["header/cobrand/mobile-download-banner/brandingheader"](cugModel))}))})})},l=function(){var e=new Date;e.setTime(e.getTime()+864e6),document.cookie="MDBClose=yes; expires="+e.toGMTString()},d=function(){(Modernizr.appleios||Modernizr.android)&&(r.publishClickEvent({rfrr:"GH.Banner.App.GCHEADERMWEB.IMP"}),e(document).on("click","#mobile-app-banner-link",function(){r.publishClickEvent({rfrr:"GH.Banner.App.GCHEADERMWEB.CLICK"})}),e("#close-banner-anime").on("click",function(){document.getElementById("mobile-app-banner-wrapper").style.setProperty("display","none","important"),l(),r.publishClickEvent({rfrr:"GH.Banner.App.Close"})}))},u=navigator.userAgent.indexOf("app.webview")>-1,p=t.get(14592,null,!0).value,g=t.get(14763,null,!0).value,h=t.get(15714,null,!0).value,f=t.get(15715,null,!0).value,m=t.get(25126,null,!0).value;i.doesCookieExist()||!(p||g||h||f||m)||u?document.getElementById("mobile-app-banner-wrapper")&&d():e.when(n()).then(d())},i}),require(["gc/mobileAppBanner","env"],function(e,t){navigator.userAgent.indexOf("app.webview")===-1&&(document.getElementById("mad-header-container")&&"29"==t.siteId&&e.isMobile()&&!e.doesCookieExist()?e.renderMadService(0):e.init())}),require(["gc/mobileAppBanner","env"],function(e){(1==e.doesCookieExist()||navigator.userAgent.indexOf("app.webview")>-1)&&document.getElementById("mobile-app-banner-wrapper")&&document.getElementById("mobile-app-banner-wrapper").style.setProperty("display","none","important")}),require(["jquery","uitk","gc/abTest","gc/pageModel"],function(e,t,n,r){function i(){u.removeClass(w),y.removeClass(w);var t=e(window).width();s(t,!1),o()}function a(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}function o(){u.on("click",function(){h.addClass(b),g.removeClass(b),t.utils.focusElement(m)}),p.on("click",function(){g.addClass(b),h.removeClass(b)}),v.mousedown(function(){M=!0,c(e(window).width()>=I?S.desktop:S.mobile)}),m.keypress(function(t){13==t.which&&c(e(window).width()>=I?S.desktop:S.mobile)}),m.focusin(function(){m.addClass(C),f.addClass(C),v.show();var t=e(window).width();s(t,!0)}),m.focusout(function(){if(M)M=!1;else{v.hide(),m.removeClass(C),f.removeClass(C);var t=e(window).width();s(t,!1)}}),e(window).resize(function(){var t=e(window).width();m.blur(),s(t,!1)})}function s(e,t){if(e>=I){g.addClass(b);var n=e;e>x&&(n=x);var r=n-E;t&&(r=r-_-P),k.width(r)}}function c(n,r){var i=r||l(n),a=d(i);e(m).val(""),t.redirect(a)}function l(t){var n=m.map(function(t,n){return e(n).val()});return n[t]}function d(t){var n=T.params;n.q=t;var r=e.param(n);return T.url+"?"+r}var u=e(".open-search-icon-search"),p=e(".open-search-icon-close"),g=e(".open-search-search-bar-mobile"),h=e(".site-header-primary-banner"),f=e(".search-query-label"),m=e(".open-search-query"),v=e(".open-search-search-button"),y=e(".open-search-wrapper"),k=e(".open-search-search-bar-desktop").find(".search-query-wrapper"),w="hidden",b="visuallyhidden",C="open-search-bar-focus",S={desktop:0,mobile:1},A=e("#assetLinkPrefix").text(),T={url:"/search-results",params:{q:"",rfrr:"globalcontrols-header"}},x=1176,I=960,E=770,_=96,P=8,D="12087";v.hide();var O=n.get(D),L=!1,M=!1;switch(r.site.id){case 1:1033===r.site.langId&&(L=!0);break;case 3:2057===r.site.langId&&(L=!0)}if(O&&1===O.value&&L&&"function"==typeof window.turnOnHeaderOpenSearch){var R=A+"/config/js/jquery-ui-1.11.4.js";a(R,function(){i()})}}),require(["uitk","jquery"],function(e,t){t(".skip-nav a[href^=\\#]:not([href=\\#])").on("click",function(n){n.preventDefault();var r=n.currentTarget.getAttribute("href");e.utils.focusElement(t(r))})}),require(["uitk","gc/pageModel","jquery","gc/errorLogging"],function(e,t,n,r){try{if(t&&t.site&&1170===t.site.id&&t.user&&t.user.agent){var i=n("#hdr-packages").parent();n("#menu-bar ul:first").children().remove(),n("#menu-bar ul:first").append(i),n("ul.nav-secondary").remove()}}catch(a){r.logError(a,"wizard","gco-agent.js","main")}});var GSS_MODAL_VERSION="1.0.72";if(define("gss-modal",["uitk","gss-view-handler","gss-forms"],function(e,t,n){function r(e){$("#gss-deferred-content").ready(function(t){"undefined"!=typeof dctk&&dctk.ewePerformance?dctk.ewePerformance.mark("gss-modal_deferred_end_uitk_modal"):window.performance.mark("gss-modal_deferred_end_uitk_modal");var n=new Array,r=$.parseHTML($.trim(e),document,!0),i=$(r).filter(function(e,t){return"script"!=t.nodeName.toLowerCase()||(n.push(t),!1)});$("#gss-deferred-content").html(i),$("head").append(n),require(["gss-omniture-tracker"],function(e){e.initDeferred(w)})})}function i(e){w.push("switchToSignUp"),t.transitToSignUp()}function a(e){w.push("switchToSignIn"),t.transitToSignIn()}function o(e){var t=document.createElement("script");t.type="application/javascript",t.src=e,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)}function s(e){var t={da_DK:"da",de_CH:"de-CH",de_DE:"de",en_GB:"en-GB",en_US:"en",en_SG:"en",en_MY:"en",en_AU:"en",en_PH:"en",id_ID:"en",zh_TW:"en",en_IE:"en",ru_RU:"en",en_CA:"en",es_AR:"es","es-ES":"es",es_MX:"es-419",fi_FI:"fi",fr_CA:"fr-CA",fr_FR:"fr",it_IT:"it",ja_JP:"ja",ko_KR:"ko",nb_NO:"no",nl_NL:"nl",nl_BE:"nl",pt_BR:"pt-BR",sv_SE:"sv",th_TH:"th",vi_VN:"vi",zh_CN:"zh-CN",zh_HK:"zh-HK"};return t.hasOwnProperty(e)?t[e]:null}function c(){var e=475,t=315,n=void 0!=window.screenLeft?window.screenLeft:screen.left,r=void 0!=window.screenTop?window.screenTop:screen.top,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=i/2-e/2+n,s=a/2-t/2+r,c=window.open(C,"fb-auth-window","channelmode=yes,width="+e+",height="+t+",top="+s+", left="+o,"resizable=no,toolbar=no,menubar=no,location=no,status=no");return c}function l(e){$(e).attr("disabled",!0),window.tpLoginSuccess=void 0;var t=c(),n=setInterval(function(){t.closed&&($(e).attr("disabled",!1),clearInterval(n),void 0!=window.tpLoginSuccess&&window.tpLoginSuccess&&d())},100)}function d(){var e={provider:"Facebook",referrerUrl:A,successUrl:S,modal:"modal"};u(50,function(){return"undefined"!=typeof authtk&&"undefined"!=typeof $LAB},function(){k.open&&k.close(),authtk.showConnectModal(e)})}function u(e,t,n){var r=e||50;t()?n&&n():setTimeout(function(){u(r,t,n)},r)}function p(e){"undefined"!=typeof dctk&&dctk.logging&&dctk.logging.logError("GSS_MODAL_ERROR",new Error(e+" not loaded due to network error. Modal won't work."),["topic=GSS","experimentId=d/a"])}function g(e,t,n){"undefined"!=typeof dctk&&dctk.trackAction&&dctk.onReady(function(){dctk.trackAction(e,n,{pageName:t,prop16:e,eVar28:e})})}function h(){x.evaluateRecaptchaModalFlag&&x.loadRecaptchaJs(b.locale,null)}var f,m,v,y=n.common,k={},w=[],b={},C="/user/third-party-login",S=window.location.pathname+window.location.search,A=window.location.pathname+window.location.search,T="https://www.google.com/recaptcha/api.js?render=explicit",x={deferredLoaded:!1,evaluateRecaptchaModalFlag:void 0,initDomEmbedded:function(t){if(b=t,y.redirectionUrl=t.rurl,!k.open){var r=$("#"+n.common.mdlCntId);k=e.modal.create({content:r[0].outerHTML,modalId:n.common.modalId,background:!0,dismiss:!0,manual:"both",classes:"gss-elem-4-cols"}),r.remove()}},init:function(t,r){k.open||(b=r,y.redirectionUrl=r.rurl,k=e.modal.create({content:t,modalId:n.common.modalId,background:!0,dismiss:!0,manual:"both",classes:"gss-elem-4-cols"}))},clearForms:function(){},getUitkModal:function(){return k},openSignIn:function(){$("body").addClass("body-fixed"),void 0!==f&&e.unsubscribe("modal.appended",f),void 0!==m&&e.unsubscribe("modal.beforeClose",m),this.preSetup(),k.open(),this.setupModalEventtHandlers(),this.setupFbLoginEventtHandlers(),this.clearForms(),t.transitToSignIn()},openSignUp:function(){$("body").addClass("body-fixed"),void 0!==f&&e.unsubscribe("modal.appended",f),void 0!==m&&e.unsubscribe("modal.beforeClose",m),this.preSetup(),k.open(),this.clearForms(),this.setupModalEventtHandlers(),this.setupFbLoginEventtHandlers(),t.transitToSignUp()},preSetup:function(){m=e.subscribe("modal.beforeClose",function(e,r){if(r.options.modalId===n.common.modalId){var i=t.presentView();require(["gss-omniture-tracker"],function(e){null!==i&&($("body").removeClass("body-fixed"),"GSS-SIGNIN-VIEW"===i.toUpperCase()?(e.signIn.closeView(),e.track.resetBackgroundPageName(v)):"GSS-SIGNUP-VIEW"===i.toUpperCase()?(e.signUp.closeView(),e.track.resetBackgroundPageName(v)):"GSS-FORGOT-PASSWORD-VIEW"===i.toUpperCase()&&(e.resetPassword.closeView(),e.track.resetBackgroundPageName(v)))}),t.deactivateViews(),r.close()}}),f=e.subscribe("modal.appended",function(e,t){t.options.modalId===n.common.modalId&&("undefined"!=typeof dctk&&dctk.omtr&&(v=dctk.omtr.pageName),x.deferredLoaded||("undefined"!=typeof dctk&&dctk.ewePerformance?dctk.ewePerformance.mark("gss-modal_deferred_start_uitk_modal"):window.performance.mark("gss-modal_deferred_start_uitk_modal"),void 0==x.evaluateRecaptchaModalFlag&&(void 0!==b.evaluateRecaptchaGCFlag?(x.evaluateRecaptchaModalFlag=b.evaluateRecaptchaGCFlag,h()):"undefined"!=typeof dctk&&dctk.evaluateExperiment&&dctk.evaluateExperiment({id:14261,callback:function(e){e.error||3!==e.value?x.evaluateRecaptchaModalFlag=!1:x.evaluateRecaptchaModalFlag=!0,h()}})),o("https://a.travel-assets.com/gss-loader/user/gss/common/authtk-gss-min.js"),o("https://a.travel-assets.com/gss-loader/user/gss/common/LAB-gss-min.js"),$.ajax({url:"/user/global-login",type:"GET",data:b,headers:{isDeferred:!0},success:function(e){r(e)},error:function(){p("gss-modal-deferred-content")}})))})},setupModalEventtHandlers:function(){n.init(),$(n.signUp.gotoSignInButton).click(a),$(n.signIn.gotoSignUpButton).click(i),$(n.common.uitkModalContainer).bind("transitionend",function(e){n.common.isDesktop&&t.focus()}),n.common.isDesktop&&(n.signUp.password.setAttribute("type","password"),n.signIn.password.setAttribute("type","password")),b.showLoyaltyCheckBox&&($(n.signUp.joinProgramDiv).removeClass("hidden"),b.preCheckLoyalyBox&&n.signUp.joinProgram.setAttribute("checked","true"))},setupFbLoginEventtHandlers:function(){$(n.signUp.facebookSignupButton).click(function(e){var t=e.target||e.srcElement;l(n.signUp.facebookSignupButton),g("GSS.CreateAccount.FB.Connect","page.Account.GSS.CreateAccount",t)}),$(n.signIn.facebookSigninButton).click(function(e){var t=e.target||e.srcElement;l(n.signIn.facebookSigninButton),g("GSS.Login.FB.Connect","page.Account.GSS.SignIn",t)})},loadRecaptchaJs:function(e,t){var n=s(e),r=document.createElement("script");r.type="application/javascript",r.src=T,r.src+=null!=n?"&hl="+n:"",r.src+=null!=t?"&onload="+t:"",r.async=!0,r.defer=!0,document.getElementsByTagName("head")[0].appendChild(r)}};return x}),define("gss-forms",function(){function e(){i.modalContainer=$("#"+i.mdlCntId)[0],i.uitkModalContainer=$("#"+i.modalId)[0],i.uitkModalBody=i.uitkModalContainer.getElementsByClassName("modal-body")[0],i.interstitialAriaMsg=$("#gss-interstitial-aria-msg")[0].value,i.isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),i.isDesktop=!i.isMobile}function t(){a.container=$("#gss-signup-view")[0],a.firstName=$("#gss-signup-first-name")[0],a.lastName=$("#gss-signup-last-name")[0],a.email=$("#gss-signup-email")[0],a.password=$("#gss-signup-password")[0],a.passwordIcon=$("#gss-signup-password-icon")[0],a.passwordIconButton=$("#gss-signup-password-icon-button")[0],a.joinProgram=$("#gss-join-program-check")[0],a.submitButton=$("#gss-signup-submit")[0],a.gotoSignInButton=$("#gss-goto-signin")[0],a.facebookSignupButton=$("#gss-signup-login-facebook-button")[0],a.interstitial=$("#gss-signup-interstitial")[0],a.genericErrorMessage=$("#gss-signup-error-message")[0],a.duplicateEmail=$("#gss-signup-duplicate-email")[0],a.unregisteredAccount=$("#gss-signup-unregistered-account-exists")[0],a.joinProgramDiv=$("#gss-join-program")[0],a.joinMerEmailOpt=$("#gss-marketing-email-opt-in-check")[0],a.joinMerEmailOptdefaultValue=$("#gss-marketing-email-opt-default-value")[0],a.LookingGoogleSignInButton=$("#gss-sign-up-looking-google-sign-in-link")[0],a.joinProgram||(a.joinProgram={checked:!0}),void 0==a.joinMerEmailOpt&&(a.joinMerEmailOpt={checked:!0})}function n(){o.container=$("#gss-signin-view")[0],o.email=$("#gss-signin-email")[0],o.password=$("#gss-signin-password")[0],o.passwordIcon=$("#gss-signin-password-icon")[0],o.keepMeSignIn=$("#gss-keep-signin-check")[0],o.submitButton=$("#gss-signin-submit")[0],o.gotoSignUpButton=$("#gss-goto-signup")[0],o.gotoForgotPasswordButton=$("#gss-go-to-forgot-password")[0],o.LookingGoogleSignInButton=$("#gss-sign-in-looking-google-sign-in-link")[0],o.facebookSigninButton=$("#gss-signin-login-facebook-button")[0],o.captchaForm=document.forms["gss-signin-captcha"]}var r={common:{mdlCntId:"gss-modal-main-container",modalId:"gss-modal-01",activeView:null},init:function(){e(),n(),t()}},i=r.common,a=r.signUp={},o=r.signIn={};return r}),define("gss-view-handler",["gss-forms"],function(e){var t="visuallyhidden",n="gss-uitk-default",r="non-hero-img-container",i=e.common,a=e.signUp,o=e.signIn,s=!1;return{transitToSignIn:function(){this.activateView(o.container)},transitToSignUp:function(){this.activateView(a.container)},focus:function(){i.isDesktop&&s&&$(i.activeView).find("input[type=email],input[type=text]").filter(":visible:first").focus()},deactivateViews:function(){i.activeView&&i.activeView.classList&&(i.activeView.classList.add(t),i.uitkModalContainer.classList.remove(i.activeView.id),i.activeView=null,s=!1)},activateView:function(e){var a=i.uitkModalContainer.classList;this.deactivateViews(),e&&e.classList&&(e.classList.remove(t),a.remove(n),a.add(e.id),i.activeView=e,a&&("true"==e.dataset.heroImgEnabled?a.remove(r):a.add(r)),this.focus(),s=!0)},presentView:function(){return i.activeView&&i.activeView.classList?i.activeView.id:null}}}),require(["gc/abTest","gc/pageModel","jquery"],function(e,t,n){var r=e.get(16316,null,!0),i=n(".cols-row.secondary-branding-container");n(i).length>0&&1===r.value&&n(i).hide()}),require(["gc/pageModel","dctk/dctk","jquery"],function(e,t,n){var r=24815,i=n("#header-partner-add-hotel-container"),a=n("> a",i),o=n.Deferred();if(n(i).length>0&&n(a).length>0){var s=n(a).attr("href");s=s.replace(/{HEADER_VARIANT_TEXT}/g,function(){var e=n(i).parents('[role="banner"]');return e.hasClass("EPC_header_link_variant_1")?"header_lyp":e.hasClass("EPC_header_link_variant_2")?"header_ayp":"no_header"}()).replace(/{POS}/g,e.site.locale.substr(e.site.locale.indexOf("_")+1)).replace(/{EXPERIMENT_ID}/g,r),t&&t.onReady?t.onReady(function(){o.resolve(void 0!==t.omtr&&void 0!==t.omtr.pageName?t.omtr.pageName:"")}):o.resolve(""),o.promise().then(function(e){s=s.replace(/{PAGE_NAME}/g,e),n(a).attr("href",s)})}}),require(["gc/abTest"],function(e){e.get(25792,null,!0)}),require(["jquery","dctk/dctk","cookies"],function(e,t,n){var r=15939,i="Storefront_2017_B2P",a="Storefront_2017_B2P_variant_",o=n.get(i)||0,s=["page.TravelGuides.Hotels.Metro","page.TravelGuides.Hotels.Train","page.TravelGuides.Hotels.MultiCity"].indexOf(void 0!==window.utag_data&&"object"===e.type(window.utag_data)&&void 0!==window.utag_data.pageInfo&&"object"===e.type(window.utag_data.pageInfo)&&void 0!==window.utag_data.pageInfo.pageName?window.utag_data.pageInfo.pageName:"")>-1,c=function(e){return[1,2].indexOf(parseInt(e))>-1},l=function(e){return[0,3].indexOf(parseInt(e))>-1},d=function(e,t){return parseInt(e)!==parseInt(t)},u=function(t,n){var r=e("#header-container div[role='banner']"),i=e("#header-logo > img",r);if("string"===e.type(n)){r.removeClass(n),r.addClass(t);var a=i.attr("src"),o=a.substr(a.indexOf("?")+1).split("&"),s=o.indexOf("test="+n);s>-1&&o.splice(s,1),o.push("test="+t),i.attr("src",a.substr(0,a.indexOf("?")+1)+o.join("&"))}else r.addClass(t),i.attr("src",i.attr("src")+"&test="+t)},p=function(t){var n=e("#header-container div[role='banner']"),r=e("#header-logo > img",n);n.removeClass(t);var i=r.attr("src"),a=i.substr(i.indexOf("?")+1).split("&"),o=a.indexOf("test="+t);o>-1&&a.splice(o,1),r.attr("src",i.substr(0,i.indexOf("?")+1)+a.join("&"))};!s&&c(o)&&u(a+o),require(["gc/abTest"],function(t){var g=function(n){var r=e.Deferred();return r.resolve(t.get(n,null,!0)),r.promise()};s||g(r).then(function(e){n.set(i,e.value),c(e.value)&&c(o)&&d(e.value,o)?u(a+e.value,a+o):c(e.value)&&l(o)?u(a+e.value):l(e.value)&&c(o)&&p(a+o)})})}),require(["gc/abTest","jquery","gc/pageModel"],function(e,t,n){try{var r=[2,3];1===e.get(16206,null,!0).value&&r.indexOf(e.get(16125,null,!0).value)!==-1&&(n.user.loyalty&&n.user.loyalty.tier||(t("#join-rewards-banner").hide(),t(".secondary-branding").hide(),t("#all-in-rewards-header-link").hide(),t("#header-account-rewards-more-menu").hide()))}catch(i){console.log("error processing loyalty holdout "+i.message)}}),define("gc/abTestRegistryOverride",function(){return[16160,15939,16206,16125,14261,13607]}),define("gc/headerMessages",[],function(){return{closeButtonLabel:"Close",supportMenuLink:"Support",customerSupportLink:"Customer Support",feedbackLink:"Feedback",accountMenuLink:"Account",signInLink:"Sign In",createAccountLink:"Create an Account",accountLink:"My Account",moreMenuLink:"More",currentlySelected:"Currently selected",rbcRewardsHome:"RBC Rewards Home",travelRewards:"Travel Rewards",availablePoints:"Available Points",signOutLink:"Sign Out",identifiedSignOutLink:"Not <span id='userGreetingNameSignOut'></span> ?","identifiedSignOutLink-v2":"Not <span id='userGreetingNameSignOut-v2'></span> ? </br> <span class='type-200'>Log in to your account</span>",scratchpadLink:"My Lists",tripsLink:"My Trips",taapTrackingCode:"Tracking Code",travelAgentTitle:"TRAVEL AGENT AFFILIATE PROGRAM",userGreeting:"<span class='nonArrangedUser hidden'>Hello, <span id='userGreetingName'></span></span> <span class='arrangedUser hidden'><span id='arrangedUserGreetingName'></span>'s Account</span>",arrangeeMessage:"Booking travel on behalf of <strong><span id='arrangee-first-name'></span> <span id='arrangee-last-name'></span></strong>",doneArrangingText:"Done",beginMainContent:"Beginning of main content",skipNavContent:"Skip to main content",shopTravel:"Shop Travel",getLowRatesOnHotelsLink:"Get lower rates on thousands of hotels.",rewardsLink:"My Rewards",zeroPointsLink:"0 points",joinExpediaRewardsLink:"Join Expedia Rewards",createAccountInAccountIconLink:"or <a id='header-account-signup' href='/user/createaccount' data-onclick='xp.nav.trackAnalytics(this, &quot;a&quot;, &quot;Header.CreateAccount&quot;)'>create an {{0}} Account</a>",sessionExpiredButton:"Sign In",sessionExpiredPara:"Please sign back in.",sessionExpiredTitle:"You have been logged out due to inactivity.",sessionLoading:"Loading",sessionWarningButton:"Extend Session",sessionWarningPara:"It's been a while since you were active on the site. Please extend your session below to continue shopping.",sessionWarningTitle:"Session Timeout Warning",epcAddProperty1:"List your property",epcAddProperty2:"Add your property",spHeaderLink:"My Lists",spHeaderLink_1:"My Favorites",spHeaderLink_2:"My Lists",spHeaderLink_3:"My Shortlist",spHeaderLink_4:"Recently Viewed",spHeaderLink_5:"My Notes",spSpTrayBadgeOne:"You have 1 recent search",spSpTrayBadgePlural:"You have {{count}} recent searches",spViewallitems:"View all {{count}} items",spViewscratchpadlink:"View your lists",spViewscratchpadlink_1:"View Favorites",spViewscratchpadlink_2:"View Lists",spViewscratchpadlink_3:"View Shortlist",spViewscratchpadlink_4:"View Recently Viewed",spViewscratchpadlink_5:"View Notes",savedHotels:"Saved Hotels",showAccountIconMenu:"Show Account Menu",spEmailaskstring:"Get price updates by email for your saved items and recent searches.",spPageupdatesoffer:"Get price updates by email for your saved items and recent searches.",spToolTipOff:"Get price updates by email for your saved and recently viewed items.",spTrackChanges:"Track changes",spSaveScratchpad:"Sign In or Create an Account to Keep",spEmailconfirmationstring:"You are receiving price updates for your saved items and recent searches. Watch your inbox!",spToolTipOnJS:"You are receiving price updates for your saved and recently viewed items. Watch your inbox at {{userEmail}}.",spSavesuccessstring:"This search has been added to your recent searches list.",spStandardGreeting:"Things you view while shopping are saved here.",spLoadingGreeting:"Loading your lists...",spLoadingGreeting_1:"loading your Favorites...",spLoadingGreeting_2:"loading your Lists...",spLoadingGreeting_3:"loading your Shortlist...",spLoadingGreeting_4:"loading your Recently Viewed...",spLoadingGreeting_5:"loading your Notes...",spSaveconfirmationstring:"Things you view while shopping are saved here. Pick up where you left off.",spOriginAirportToDestinationAirport:"{{departureAirportCode}} to {{arrivalAirportCode}}",spTimeRange:"{{startTime}} - {{endTime}}",spDateRange:"{{startDate}} - {{endDate}}",spAsOfDate:"as of {{lastSeenDate}}",spAsOfTime:"as of {{lastSeenTime}}",spPerPerson:"per person",spHotelSearchAvgPerNight:"avg per night",spHotelSearchAvgTotalRate:"avg total rate",spHotels:"{{destination}} hotels",spDaily:"daily",spWeekly:"weekly",spTotal:"total",spPerTraveler:"per traveler",spCruiseSearchPerNight:"per night",spCruiseSearchCruises:"Cruises",spCruiseSearchAllMonths:"All Months",spCruiseSearchAllDestinations:"All Cruise Destinations",spPricefrom:"from {{itemPrice}}",spSeePrice:"See price",spOneWay:"One way",spRoundtrip:"Round trip",spAirlineLogoAltText:"logo",spMultipleAirlinesLogoAltText:"Multiple Airlines logo",spPackageTitle:"{{packageDestination}} Packages",spPackageIncludes:"Flight and hotel included",spThing1PlusThing2:"{{item1}} + {{item2}}",spCarPackageItem:"car",spCarsAt:"Cars at {{destination}}",spCarsNear:"Cars near {{destination}}",nudgeEnrollmentTitle:"Get price updates by email for your saved items and recent searches.",nudgeEnrollmentSubtitle:"We'll watch prices on your saved items and recent searches for you.",nudgeEnrollmentAction:"Track Changes",nudgeEnrollmentSuccess:"You are receiving price updates for your saved items and recent searches. Watch your inbox!",spPriceDownOne:"1 price dropped.",spPriceDownMany:"{{params.[0]}} prices dropped.",spPriceUpOne:"1 price increased.",spPriceUpMany:"{{params.[0]}} prices increased.",spPriceDownManyUpMany:"{{params.[0]}} prices dropped, {{params.[1]}} prices increased.",spPriceDownManyUpOne:"{{params.[0]}} prices dropped, {{params.[1]}} price increased.",spPriceDownOneUpMany:"{{params.[0]}} price dropped, {{params.[1]}} prices increased.",spPriceDownOneUpOne:"1 price dropped, 1 price increased.",seeWhatChanged:"See what’s changed",signInToSee:"Sign in to see your notifications.",scratchpadFoundUpdates:"There's a price update on at least 1 item in your recent searches.",somethingHasChanged:"Something’s changed!",welcome:"Welcome!",itinBouncedEmail:"We weren’t able to deliver your purchase confirmation email.",itinBouncedEmailLink:"View your itinerary online or resend",seeDetails:"See details",itemsChanged:"Items you viewed have changed!",noNotifications:"All caught up!",noNotificationsPartTwo:"No new notifications right now.",spMemberDealsSignUp:"Sign Up Now",spMemberRewardsSignUp:"Join Now",rewardsHotelCouponAvailability:"You have a {{params.[0]}} coupon available. Use it on your next hotel booking and save!",rewardsVIPCouponAvailability:"You have a {{params.[0]}} +VIP Access coupon available. Use it on your next hotel booking and save!",rewardsHotelCouponAvailabilityLink:"Shop hotels",rewardsVIPCouponAvailabilityLink:"Shop +VIP Access hotels",rewardsHotelCouponExpirationLinkV2:"Visit your account",rewardsHotelCouponExpirationV1:"Your {{params.[0]}} coupon expires on {{params.[1]}}!&lt;br&gt;Book now to make sure you get your rewards.",rewardsHotelCouponExpirationV2:"You have a coupon that’s expiring soon. Check your account for more details.",rewardsTierLink:"See&lt;br&gt;your new benefits",rewardsOneAwayLink:"See all the perks",rewardsGoldUpgradeLink:"See your new benefits",rewardsPointExpirationLink:"Redeem now",rewardsPayWithPointsLearnMoreLink:"Learn More",rewardsNewBadge:"NEW!",spAccessibleBellIcon:"Your notifications",spAccessibleBadgeOne:"You have 1 notification",spAccessibleBadgePlural:"You have #### notifications",spAccessibleNotifClose:"Close",addChromeExtensionNotificationMessage:"The official Expedia Member Only Deals extension is here! Stay connected and get your 10% off with member pricing.",addChromeExtensionNotificationLink:"Add to Chrome",spSwitchToAarp:"Get AARP Member discounts on AARP Travel Center",exclusiveDealsMsg:"Sign in to see exclusive Member Pricing.",newCreateAccountLink:"New? <span>Create an Account</span>",TAAPWelcomeMessage:"Welcome to Expedia Travel Agent Affiliate Program. You’re eligible to earn commission on your purchases!",TAAPWelcomeMessageLeanMoreLink:"Learn more about our incentives.",flightMIPGTMsg:"Exclusive offer: Your flight booking just unlocked up to 20% off ground transportation!",flightMIPActivityMsg:"Exclusive offer: Your flight booking just unlocked up to 20% off activities!",flightMIPActivityMsgCTC:"See Things to Do",flightMIPGTMsgCTC:"See Transportation",TAAPGBVRemainingMessageSilver:"You’re <b>{{params.[0]}}</b> away from reaching the Silver level - higher commission on hotels, car rentals and activities.",TAAPGBVRemainingMessageGold:"You’re <b>{{params.[0]}}</b> away from reaching the Gold level - higher commission on hotels, car rentals and activities.",TAAPGBVRemainingMessagePlatinum:"You’re <b>{{params.[0]}}</b> away from reaching the Platinum level - higher commission on hotels, car rentals and activities.",TAAPGBVRemainingLink:"See our incentive plans",promisingText:"Price Guarantee",downloadText:"Download the free app",pointsText:"Earn 2x {{brand}} points on all bookings",DEpointsText:"Book on the go.",TravelocitydownloadText:"Get 15% off hotels in app",TravelocitypointsText:"Download the app & use code <b>MOB15</b> to save 15% on select hotels",OrbitzdownloadText:"Download the free app",OrbitzpointsText:"Earn 5% back in app + save 15% on select hotels with code <b>APP15</b>",CheapTicketsdownloadText:"Become a travel ninja",CheapTicketspointsText:"Book on the go and stay connected with real-time trip updates on the app",eBookersdownloadText:"Download the free app",eBookerspointsText:"Earn 5% BONUS+ back in app & save 10% on hotels with code APP10",WotifdownloadText:"Take a shortcut to your next trip",WotifpointsText:"Get the Wotif App and book on the go",speedbumpTitle:"You're continuing to another website",speedbumpMessage:"You're continuing to another website that we do not own or operate. Its owner is solely responsible for the website's content, offerings and level of security, so please refer to the website's posted privacy policy and terms of use.",speedbumpButtonContinue:"Continue",speedbumpButtonReturn:"Return",disclaimerBannerMessage:"Welcome to <u>{{displayDomain}}</u>, a US site operated by Expedia, Inc., a Washington corporation.",redirectPopupMessage:"Welcome to <u>{{displayDomain}}</u>, a US site operated by Expedia, Inc., a Washington corporation."}}),window.location.hostname.indexOf("travelocity")>-1)var channelTrackingAlreadyLoaded=!0;if("undefined"==typeof channelTrackingAlreadyLoaded){var channelTrackingAlreadyLoaded=!0,emptyAsppCookie="v.1,0|||||||||||||",SEO_SOURCES={"www.google.":[!0,null],"search.yahoo.com":[!0,null],"wrs.yahoo.com":[!0,null],"rc12.overture.com":[!0,!1],"bing.com/search":[!0,null],"terra.es":[!0,null],"ya.com":[!0,null],"ricerca.virgilio.it":[!0,null],"iltrovatore.it":[!0,null],"213.215.201.230":[!0,null],"orange.fr":[!0,null],"lycos.":[!0,null],"ask.com":[!0,null],"search.aol.":[!0,null],"askjeeves.":[!0,null],"myway.com":[!0,null],altavista:[!0,null],baidu:[!0,null],
"daum.net":[!0,null],"mywebsearch.com":[!0,null],"naver.com":[!0,null],"suche.web.de":[!0,null],"mvirgilio.it":[!0,null],yandex:[!0,null]},CHANNEL_TYPES="(AFF|OLA|EML|MDP|SEM|OFF|MSN|ICM|SEO|AFM)";if("undefined"!=typeof qUnitTestRun&&null!=qUnitTestRun)var stub=sinon.stub(this,"getDomainLegacy",function(){return["://www.testDomain.com","www.","testDomain.com"]});var tracking_array_contains=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},ClearMediaCookieIfItIsTickSeparated=function(){var e="p1=",t=document.cookie.indexOf(e);if(t==-1){var n="MediaCookie=",r=document.cookie.indexOf(n);if(r>=0){var i=r+n.length+1,a=document.cookie.indexOf(";",i);a==-1&&(a=document.cookie.length);var o=i+1;if(o<a){var s=document.cookie.substring(i,o);if("`"==s){var c=new Date((new Date).setTime((new Date).getTime())),l=getDomainLegacy(location.href);l>""&&(l=l[2]?l[2]:"",document.cookie=n+"; expires="+c.toUTCString()+"; domain=."+l+"; path=/")}}}}},GetChannelSpecificCode=function(e,t){var n=/(?:cuid|tduid)=([^&]*)/i,r=t;return n.test(location.search)&&(r=n.exec(location.search)[1]),r},getChannelSpecificConversionID=function(e){var t=/(?:mdpdtl|oladtl|afflid|icmdtl)=([^&]*)/i,n="";return n=t.test(location.search)?t.exec(location.search)[1]:e},IsLockedCode=function(e,t,n,r){return t&&""!=t&&"wpk"==t.slice(0,3)&&"wpk"!=r.slice(0,3)},GetASPPersistentCookie=function(){var e=document.cookie.indexOf("aspp="),t=e+5;if(!e&&"aspp"!=document.cookie.substring(0,4))return null;if(e==-1)return null;var n=document.cookie.indexOf(";",t);return n==-1&&(n=document.cookie.length),document.cookie.substring(t,n)},SetASPPersistentCookie=function(e){ExpireASPPCookieInParentDomain();var t=new Date((new Date).setTime((new Date).getTime()+15768e7)),n=getDomainLegacy(location.href);n>""?(n=n[2]?n[2]:"",document.cookie="aspp="+e+"; expires="+t.toUTCString()+"; domain=."+n+"; path=/"):document.cookie="aspp="+e+"; expires="+t.toUTCString()+"; path=/",null!=n&&""!=n||("undefined"!=typeof dctk?dctk.loggingAdapter.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]):"undefined"!=typeof expClientLogging&&expClientLogging.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]))},getCookie=function(e){var t=RegExp("(?:^| |;)"+e+"=([^ ;]*)","i"),n=t.exec(document.cookie);return null==n||n.length<=1?null:n[1]},setAspCookie=function(e,t){if(null!=t&&null!=e){var n=t?"aspp":"asps",r=getDomain(location.href),i=t?new Date((new Date).setTime((new Date).getTime()+15768e7)):null,a="/";t&&ExpireASPPCookieInParentDomain();var o=n+"="+e+"; ";null!=i&&(o+="expires="+i.toUTCString()+"; "),r>""&&"localhost"!=r&&(o+="domain=."+r+"; "),o+="path="+a,document.cookie=o,null!=r&&""!=r||("undefined"!=typeof dctk?dctk.loggingAdapter.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]):"undefined"!=typeof expClientLogging&&expClientLogging.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]))}},ExpireASPPCookieInParentDomain=function(){var e=new Date((new Date).setTime((new Date).getTime()-15768e7)),t=getDomainLegacy(location.href);t=t[2]?t[2]:"",t>""&&(document.cookie="aspp=; expires="+e.toUTCString()+"; path=/")},GetCookieValue=function(e,t,n){null==n&&(n=","),e+="=";var r=document.cookie.indexOf(e),i=r+e.length;if(!r&&e!=document.cookie.substring(0,e.length))return"";if(r==-1)return"";var a=document.cookie.indexOf(";",i);a==-1&&(a=document.cookie.length);var o=document.cookie.substring(i,a),s=o.split(n);return null!=s[t]?s[t]:null},GetP1CookieTpid=function(){var e="p1=",t=document.cookie.indexOf(e),n=t+e.length;if(t==-1)return GetCookieValue("tpid",1);var r=document.cookie.indexOf(";",n);r==-1&&(r=document.cookie.length);for(var i=document.cookie.substring(n,r).split("`"),a=0;a<i.length;a++)if(i[a].indexOf("tpid")!=-1)return i[a].split(",")[1]},isValidASPPCookie=function(e){var t=/v\..*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*/i,n=t.exec(e);return!!n},captureZanpid=function(e){var t=getZanpids(e),n=getCookie("asps");if(!(t.length<1)){if(!isValidAspsCookie(n))return n="0||||||0|"+t.toString(),void setAspCookie(n,!1);var r=n.split("|");r[7]=t.toString(),n="";for(var i=0;i<r.length;i++)n+=r[i]+"|";setAspCookie(n.substring(0,n.length-1),!1)}},getZanpids=function(e){for(var t,n=/zanpid=([^&]*)/gi,r=[];t=n.exec(e);)t.length>1&&""!=t[1]&&r.push(t[1]);return r},isValidAspsCookie=function(e){var t=/.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*/i;return null!=e&&e>""&&t.test(e)},getDomainLegacy=function(e){var t=e.match(/:\/\/(www\.)?([^\/:]+)/);return t},getDomain=function(e){var t=null!=e?e.match(/:\/\/(?:www\.)?([^\/:]+)/):"";return null==t||t.length<=1?"":t[1]},checkIfEmailInString=function(e){var t=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;return t.test(e)},getValueOfCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(i=i.replace(" ",""),i.indexOf(t)!=-1)return i.substring(t.length,i.length)}return""},deleteCookie=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);r=r.replace(" ","");for(var i=0;i<e.length;i++)if(r.indexOf(e[i])!=-1&&r.length>300){var a=new Date((new Date).setTime((new Date).getTime()-15768e7)),o=getDomainLegacy(location.href);return o=o[2]?o[2]:"",void(o>""?document.cookie=r.split("=")[0]+"= ;expires="+a.toUTCString()+"; domain=."+o+"; path=/":document.cookie=r.split("=")[0]+"= ;expires="+a.toUTCString()+"; path=/")}}};ClearMediaCookieIfItIsTickSeparated();var tpid=GetP1CookieTpid(),eapid=GetCookieValue("iEAPID",0),ChannelType="",ChannelID="",ASPPersistentCookie="";GetASPPersistentCookie()>""&&isValidASPPCookie(GetASPPersistentCookie())||SetASPPersistentCookie("v.1,0|||||||||||||");var previousChannelID=GetCookieValue("aspp",1,"|"),previousChannelType=GetCookieValue("aspp",10,"|"),referrerAddress=document.referrer;if(""!=referrerAddress&&previousChannelID&&""!=previousChannelID&&"wpk"!=previousChannelID.slice(0,3).toLowerCase()&&(20==tpid||previousChannelType&&""!=previousChannelType&&"aff"!=previousChannelType.toLowerCase())){var clearSeocid=!1,clearCookie=!1;for(var site in SEO_SOURCES)referrerAddress.toLowerCase().indexOf(site)>-1&&(clearSeocid=SEO_SOURCES[site][0],clearCookie=null==SEO_SOURCES[site][1]?referrerAddress.toLowerCase().indexOf("semcid")==-1:SEO_SOURCES[site][1]);if(clearCookie&&SetASPPersistentCookie("v.1,0|||||||||||||"),clearSeocid){var urlAndQueryAttributes=window.location.toString().split("?");if(urlAndQueryAttributes.length>1){for(var url=urlAndQueryAttributes[0],queryAttributes=urlAndQueryAttributes[1].split("&"),relocate=!1,index=0;index<queryAttributes.length;index++)queryAttributes[index].toLowerCase().indexOf("seocid")==-1?(url+=0==index?"?":"&",url+=queryAttributes[index]):relocate=!0;1==relocate&&(window.location=url)}}}!function(){var e=new RegExp(CHANNEL_TYPES+"cid=([^&]*)","i"),t=e.exec(window.location.search);if(t||(t=e.exec(window.location.hash)),t||(t=e.exec(document.referrer)),t&&(ChannelType=t[1].toUpperCase(),ChannelID=escape(t[2]),""!==ChannelID&&(ASPPersistentCookie=GetASPPersistentCookie(),!ASPPersistentCookie>""&&(SetASPPersistentCookie(emptyAsppCookie),ASPPersistentCookie=GetASPPersistentCookie()),!IsLockedCode(previousChannelType,previousChannelID,ChannelType,ChannelID)))){var n=new Date((new Date).setTime((new Date).getTime()+2592e6)),r=n.getFullYear().toString(),i=(n.getMonth()+1).toString();i.length<2&&(i="0"+i);var a=n.getDate().toString();a.length<2&&(a="0"+a);var o=r+i+a,s=ASPPersistentCookie.split("|");s[1]=ChannelID,s[10]=ChannelType,s[11]=o,s[12]=GetChannelSpecificCode(ChannelID,s[12]),s[13]=getChannelSpecificConversionID(s[13]),ASPPersistentCookie="";for(var c=0;c<s.length;c++)ASPPersistentCookie+=s[c]+"|";ASPPersistentCookie=ASPPersistentCookie.substring(0,ASPPersistentCookie.length-1),checkIfEmailInString(ASPPersistentCookie)&&(ASPPersistentCookie=emptyAsppCookie),SetASPPersistentCookie(ASPPersistentCookie)}var l=getValueOfCookie("aspp");if(checkIfEmailInString(l)&&(l=emptyAsppCookie,SetASPPersistentCookie(l)),null!=l&&0!=l.length&&l.split("|").length>14){var d=l.substring(0,l.indexOf(l.split("|")[14])-1);SetASPPersistentCookie(d)}var u=["_tq_ref","mvthistory"];deleteCookie(u),window.location.search.search(/zanpid/i)>-1&&captureZanpid(window.location.search)}(),location.search.indexOf("cntrkrdebug")>-1&&window.console&&window.console.log&&console.log("Previous Channel Type: "+previousChannelType+"\n Previous Channel ID: "+previousChannelID+"\n Current Channel Type: "+ChannelType+"\n Current Channel ID: "+ChannelID+"\n ASPP Cookie Value: "+getCookie("aspp")+"\n ASPS Cookie Value: "+getCookie("asps"))}require(["jquery","gc/abTest","gc/pageModel","gc/analyticsStore"],function(e,t,n,r){function i(){document.getElementById("mad-footer-container")&&(n.site.id<74||1==t.get(16064,null,!0).value)?a():e("#t2d-footer-container").length&&1==t.get(14135,null,!0).value&&(s(),C(),e("#t2d-footer-form button").click(f),e("#t2d-footer-container").show(),o())}function a(){var e=document.createElement("script"),t="desktop";Modernizr.appleios?t="iOS":Modernizr.android&&(t="Android");var r=["/mad-service/globalControls/gcFooter?containerId=mad-footer-container"];r.push("&siteid="),r.push(n.site.id),r.push("&locale="),r.push(n.site.locale),r.push("&pageName=gc.footer"),r.push("&os="),r.push(t),r.push("&brand="),r.push(n.site.brandName),e.setAttribute("src",r.join("")),document.head.appendChild(e)}function o(){console.log("test loadTrackingAndClick"),r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.T2D.IMP"}),e(document).on("click","#t2d-footer-app-stores-ios-desktop",function(){r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.BUTTON.IOS"})}),e(document).on("click","#t2d-footer-app-stores-android-desktop",function(){r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.BUTTON.ANDROID"})}),e(document).on("click","#t2d-footer-app-stores-ios-mobile",function(){r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.BUTTON.IOS"})}),e(document).on("click","#t2d-footer-app-stores-android-mobile",function(){r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.BUTTON.ANDROID"})})}function s(){c("#t2d-footer-error-international","countryName",g()),c("#t2d-footer-error-international","phoneNumberFormat",h()),c("#t2d-footer-error-validation","phoneNumberFormat",h())}function c(t,n,r){var i=e(t).text(),a=new RegExp("{{"+n+"}}","g");i=i.replace(a,r),e(t).text(i)}function l(){return e("#t2d-footer-form-input").val()}function d(){return e("#t2d-footer-form").attr("data-valid-phone-min-length")}function u(){return e("#t2d-footer-form").attr("data-valid-phone-max-length")}function p(){return e("#t2d-footer-form").attr("data-country-phone-prefix")}function g(){return e("#t2d-footer-form").attr("data-country-name")}function h(){return e("#t2d-footer-form").attr("data-phone-number-format")}function f(){m();var e=v();e&&y(e)}function m(){e("#t2d-footer-success").hide(),e("#t2d-footer-error").hide(),e("#t2d-footer-error-duplication").hide(),e("#t2d-footer-error-service").hide(),e("#t2d-footer-error-validation").hide(),e("#t2d-footer-error-international").hide()}function v(){var e=l();e=e.replace(/\D/g,""),e=e.replace(/^0*/,"");var t=d(),n=u();if(e.length<t)return w("validation");if(e.length>n){var r=new RegExp("^"+p());if(e=e.replace(r,""),e.length<t||e.length>n)return w("international")}return e}function y(t){var r=1==n.site.id?"app_61":"app_60",i={url:"/T2DGenProxy?serviceID=TXT_MOBILEAPP_LINK",type:"POST",dataType:"json",data:{mobile_phone:t,data_app:r,country_calling_code:p()},success:b,error:k};e.ajax(i)}function k(e){var t=e.responseText;w(t.toLowerCase().indexOf("has already received 3 messages in 24 hours")>=0?"duplication":"service")}function w(t){e("#t2d-footer-error").show(),e("#t2d-footer-error-"+t).show(),r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.T2D.INVALID"})}function b(){e("#t2d-footer-success").show(),e("#t2d-footer-form input").attr("value",""),r.publishClickEvent({rfrr:"GCF.Banner.App.GC.APP.FOOTER.V2.T2D.VALID"})}function C(){Modernizr.appleios?S("ios","mobile"):Modernizr.android?S("android","mobile"):(S("ios","desktop"),S("android","desktop"),e("#t2d-footer-form").css("display","block"),e("#t2d-footer-form-legal").css("display","block"))}function S(t,n){e("#t2d-footer-app-stores-"+t+"-"+n).css("display","inline")}navigator.userAgent.indexOf("app.webview")===-1&&e(document).ready(i)}),require(["gc/abTest","gc/pageModel","dctk/dctk","jquery"],function(e,t,n,r){var i=14541,a=e.get(i,null,!0),o=r("#footer-partner-add-hotel-container"),s=r("> a",o),c=r("#header-partner-add-hotel-container"),l=r.Deferred();if(r(o).length>0&&r(s).length>0&&(1===a.value||2===a.value)){2===a.value&&r(s).attr("target","_blank");var d=r(s).attr("href");d=d.replace(/{HEADER_VARIANT_TEXT}/g,function(){var e=r(c).parents('[role="banner"]');return e.hasClass("EPC_header_link_variant_1")?"header_lyp":e.hasClass("EPC_header_link_variant_2")?"header_ayp":"no_header"}()).replace(/{POS}/g,t.site.locale.substr(t.site.locale.indexOf("_")+1)).replace(/{EXPERIMENT_ID}/g,i),n&&n.onReady?n.onReady(function(){l.resolve(void 0!==n.omtr&&void 0!==n.omtr.pageName?n.omtr.pageName:"")}):l.resolve(""),l.promise().then(function(e){d=d.replace(/{PAGE_NAME}/g,e),r(s).attr("href",d),r(o).show()})}}),require(["gc/abTest","jquery","gc/pageModel"],function(e,t,n){try{var r=[2,3];1===e.get(16206,null,!0).value&&r.indexOf(e.get(16125,null,!0).value)!==-1&&(n.user.loyalty&&n.user.loyalty.tier||(t("#rewards-header").parent().hide(),null!=t('#brand-links-links > li:contains("Rewards")')&&t('#brand-links-links > li:contains("Rewards")').hide(),null!=t('#vínculos-de-expedia-links > li:contains("Expedia+")')&&t('#vínculos-de-expedia-links > li:contains("Expedia+")').hide(),null!=t('#featured-hotel > .links-list > .cf > li:contains("VIP Access")')&&t('#featured-hotel > .links-list > .cf > li:contains("VIP Access")').hide(),t("#partner-services-links > li:nth-child(7)").hide(),t('#expedia-links > li:contains("Rewards")').hide()))}catch(i){console.log("error processing loyalty holdout "+i.message)}});
//# sourceMappingURL=globalcontrols-min.js.map

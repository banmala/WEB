define("locateme/constants",function(){return{version:"v.1.0",dctkClientLoggingURL:"//a.travel-assets.com/datacapture/2/js/cl.js",forceDctkLoggingOn:!0,devUrl:"https://wwwexpediacom.sandbox.dev.sb.karmalab.net:8443",testUrl:"https://wwwexpediacom.trunk.sb.karmalab.net",intUrl:"https://wwwexpediacom.integration.sb.karmalab.net",prodUrl:"https://www.expedia.com",ADOBEORGID:"C00802BE5330A8350A490D4C@AdobeOrg",EXPERIMENTS:{featureGate:13308},ENVIRONMENTS:{DEV:"dev",TEST:"test",INT:"int",PROD:"prod"},PATTERNS:{DEV:/(local|sandbox|localhost)/g,TEST:/(trunk|test)/g,INT:/(int)/g},location:{}}});define("locateme/utils",["locateme/constants","locateme/config"],function(d,f){var g={},l="";g.ie=function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]\x3e\x3ci\x3e\x3c/i\x3e\x3c![endif]--\x3e",c[0];);return 4<a?a:void 0};g.ajax=function(a){a=a||{};a.always=a.always||function(){};a.done=a.done||function(){};a.fail=a.fail||function(){};a.dataType=a.dataType||"";a.type=a.type||"GET";a.url=a.url||null;void 0===a.encode&&(a.encode=!0);if(10>g.ie&&window.XDomainRequest){var b=new XDomainRequest;a.encode?b.open(a.type,encodeURI(a.url)):b.open(a.type,a.url);b.onprogress=function(){};b.ontimeout=function(){};b.onload=function(){var c=b.responseText;if(a.dataType&&"json"===a.dataType.toLowerCase()&&"string"===typeof c)try{c=JSON.parse(c)}catch(p){}a.done(c,b)};b.onerror=function(){a.fail(b)};setTimeout(function(){b.send(a.data)},0)}else if(window.XMLHttpRequest){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState){if(200===c.status){if(c.response)var d=c.response;else!c.responseType||""!==c.responseType&&"text"!==c.responseType||(d=c.responseText);a.dataType&&"json"===a.dataType.toLowerCase()&&"string"===typeof d&&(d=JSON.parse(d));a.done(d,b)}else a.fail(c);a.always(c,d)}};a.encode?c.open(a.type,encodeURI(a.url)):c.open(a.type,a.url);a.contentType&&c.setRequestHeader("Content-Type",a.contentType);c.responseType=a.dataType;c.send(a.data)}};g.getCookie=function(a){var b,c=document.cookie.split(";");for(b=0;b<c.length;b++){var d=c[b].substr(0,c[b].indexOf("\x3d"));var e=c[b].substr(c[b].indexOf("\x3d")+1);d=d.replace(/^\s+|\s+$/g,"");if(d==a)return unescape(e)}};g.setCookie=function(a,b,c){var e=new Date;e.setDate(e.getDate()+c);b+=null==c?"":"; expires\x3d"+e.toUTCString();c=d.location.hostname.replace("www.",".");document.cookie=a+"\x3d"+b+(";domain\x3d"+c)+";path\x3d/"};g.appendAdobeMIDAndRedirect=function(a){if("undefined"!=typeof Visitor){var b=Visitor.getInstance(d.ADOBEORGID);l=a;""!=b.getMarketingCloudVisitorID(m)&&m()}else require(["dctk/dctk"],function(a){a.logMessage("LocateMe",{message:"Visitor is undefined"})})};g.getFormatedURL=function(a){var b=d.location.protocol+"//",c=e(),g=d.location.hash,l=d.location.pathname;var k=/www\./i;if(/(www|euro|taap)\./i.test(a)){var h=a.split(".");k.test(a)&&(h.splice(0,1),h[0]=n(h[0]));h=h.join(".");"prod"!==f.environment&&(a=a.split(".").join(""),k=d.location.hostname.split("."),k[0]=a,a=k.join("."))}else a=a.split(".")[0],h=a.slice(3),h=n(h),k=d.location.hostname.split("."),k[0]=a,a=k.join(".");g=a+l+c+g;return{URL:b+g,text:h,domain:a,search:c,urlWithoutProtocol:g}};var e=function(){var a=d.location.search,b=a.split("\x26");if(""===a)return"";if(0<b.length){if(-1<a.indexOf("spoof-location")){var c=-1;b.some(function(a,b){-1<a.indexOf("spoof-location")&&(c=b)});b.splice(c,1)}a=b.join("\x26");0<a.length&&"?"!==a[0]&&(a="?"+a);return a}},m=function(){var a=Visitor.getInstance(d.ADOBEORGID),b=l;b=a.appendVisitorIDsTo(b);window.location.replace(b)},n=function(a){return a[0].toUpperCase()+a.slice(1)};return g});define("locateme/config",["locateme/constants"],function(d){findEnvironment=function(){for(var f in d.PATTERNS)if(d.PATTERNS[f].test(d.location.href))return d.ENVIRONMENTS[f.toString()];return d.ENVIRONMENTS.PROD};setLocationObject=function(f){f=f||window.location;d.location={port:f.port,host:f.host,href:f.href,hash:f.hash,origin:f.origin,search:f.search,protocol:f.protocol,hostname:f.hostname,pathname:f.pathname}};return{environment:d.ENVIRONMENTS.PROD,initAppConfiguration:function(d){setLocationObject(d);this.environment=findEnvironment()}}});define("locateme/context",["locateme/utils","locateme/constants"],function(d,f){return{initializeAppContext:function(d){return d}}});define("locateme/core",["locateme/constants","locateme/config","locateme/utils","locateme/context"],function(d,f,g,l){var e={};e.utils=g;e.domainOverride=!1;e.spoofObject=null;f.initAppConfiguration();e.init=function(a,b,c){d.guid=a.GUID;d.eapid=a.EAPID;d.tpid=a.TPID;d.langid=a.LANGID;e.successCallback=b;e.errorCallback=c;a={};a.requestedUrl=d.location.host;a.spoofLocation=!1;b=d.location.search;b.match(/(spoof-location=)/g)?(a.spoofLocation=!0,a.requestedSiteId=1,b.match(/(country_code=)/g)&&(c=b.indexOf("country_code\x3d"),a.countryCode=b.substring(c+13,c+15))):null!=e.spoofObject&&(a.spoofLocation=e.spoofObject.spoofLocation,a.requestedSiteId=e.spoofObject.requestedSiteId,a.countryCode=e.spoofObject.countryCode);a.langId=d.langid;a=JSON.stringify(a);if(e.domainOverride)b="";else switch(f.environment){case d.ENVIRONMENTS.TEST:b=d.testUrl;break;case d.ENVIRONMENTS.INT:b=d.intUrl;break;case d.ENVIRONMENTS.PROD:b=d.prodUrl;break;default:b=d.devUrl}e.utils.ajax({url:b+("/api/locate-me?\x26_\x3d"+Math.floor(Math.random()*Math.pow(10,13))),data:a,done:m,fail:n,dataType:"json",contentType:"application/json; charset\x3dutf-8",type:"POST"})};e.saveUserPreference=function(a,b){var c=e.appContext;c.preference=c.requestedUrl;"LOCAL"===a&&(e.utils.setCookie("ipsnf3","v.3|"+c.countryCode+"|"+c.localSiteId+"|0|hsset"),c.preference=c.localSiteUrl)};e.getLocalURLObj=function(){return g.getFormatedURL(this.appContext.localSiteUrl)};e.getRequestedURLObj=function(){return g.getFormatedURL(this.appContext.requestedUrl)};var m=function(a){a.hasError?e.errorCallback(a.errorDetails):(e.appContext=l.initializeAppContext(a.redirectionDetails),e.utils.setCookie("ipsnf3","v.3|us|1|753|chandler"),e.successCallback(e.appContext))},n=function(a){a.response?e.errorCallback(a.response.errorDetails,a):e.errorCallback({status:"REQUEST_NOT_SENT",message:"Network faliure or CORS issue."},a)};return e});
//# sourceMappingURL=locateme-bundle.js.map